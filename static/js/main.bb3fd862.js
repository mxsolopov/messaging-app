/*! For license information please see main.bb3fd862.js.LICENSE.txt */
!function(){var e={108:function(e,t,n){"use strict";n.d(t,{$n:function(){return h},Fq:function(){return c},_j:function(){return l},mi:function(){return s}});var r=n(929);function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function a(e){if(e.type)return e;if("#"===e.charAt(0))return a(function(e){e=e.substr(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla"].indexOf(n))throw new Error((0,r.Z)(3,e));var i=e.substring(t+1,e.length-1).split(",");return{type:n,values:i=i.map((function(e){return parseFloat(e)}))}}function o(e){var t=e.type,n=e.values;return-1!==t.indexOf("rgb")?n=n.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(n[1]="".concat(n[1],"%"),n[2]="".concat(n[2],"%")),"".concat(t,"(").concat(n.join(", "),")")}function s(e,t){var n=u(e),r=u(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function u(e){var t="hsl"===(e=a(e)).type?a(function(e){var t=(e=a(e)).values,n=t[0],r=t[1]/100,i=t[2]/100,s=r*Math.min(i,1-i),u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-s*Math.max(Math.min(t-3,9-t,1),-1)},c="rgb",l=[Math.round(255*u(0)),Math.round(255*u(8)),Math.round(255*u(4))];return"hsla"===e.type&&(c+="a",l.push(t[3])),o({type:c,values:l})}(e)).values:e.values;return t=t.map((function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function c(e,t){return e=a(e),t=i(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),e.values[3]=t,o(e)}function l(e,t){if(e=a(e),t=i(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return o(e)}function h(e,t){if(e=a(e),t=i(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;return o(e)}},515:function(e,t,n){"use strict";n.d(t,{Z:function(){return kr}});var r=n(462),i=n(987),a=n(791),o=n(110),s=n.n(o),u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c="object"===("undefined"===typeof window?"undefined":u(window))&&"object"===("undefined"===typeof document?"undefined":u(document))&&9===document.nodeType,l=n(144),h=n(578),f=n(326),d=n(366),p={}.constructor;function v(e){if(null==e||"object"!==typeof e)return e;if(Array.isArray(e))return e.map(v);if(e.constructor!==p)return e;var t={};for(var n in e)t[n]=v(e[n]);return t}function y(e,t,n){void 0===e&&(e="unnamed");var r=n.jss,i=v(t),a=r.plugins.onCreateRule(e,i,n);return a||(e[0],null)}var m=function(e,t){for(var n="",r=0;r<e.length&&"!important"!==e[r];r++)n&&(n+=t),n+=e[r];return n},g=function(e){if(!Array.isArray(e))return e;var t="";if(Array.isArray(e[0]))for(var n=0;n<e.length&&"!important"!==e[n];n++)t&&(t+=", "),t+=m(e[n]," ");else t=m(e,", ");return"!important"===e[e.length-1]&&(t+=" !important"),t};function k(e){return e&&!1===e.format?{linebreak:"",space:""}:{linebreak:"\n",space:" "}}function b(e,t){for(var n="",r=0;r<t;r++)n+="  ";return n+e}function _(e,t,n){void 0===n&&(n={});var r="";if(!t)return r;var i=n.indent,a=void 0===i?0:i,o=t.fallbacks;!1===n.format&&(a=-1/0);var s=k(n),u=s.linebreak,c=s.space;if(e&&a++,o)if(Array.isArray(o))for(var l=0;l<o.length;l++){var h=o[l];for(var f in h){var d=h[f];null!=d&&(r&&(r+=u),r+=b(f+":"+c+g(d)+";",a))}}else for(var p in o){var v=o[p];null!=v&&(r&&(r+=u),r+=b(p+":"+c+g(v)+";",a))}for(var y in t){var m=t[y];null!=m&&"fallbacks"!==y&&(r&&(r+=u),r+=b(y+":"+c+g(m)+";",a))}return(r||n.allowEmpty)&&e?(r&&(r=""+u+r+u),b(""+e+c+"{"+r,--a)+b("}",a)):r}var w=/([[\].#*$><+~=|^:(),"'`\s])/g,x="undefined"!==typeof CSS&&CSS.escape,S=function(e){return x?x(e):e.replace(w,"\\$1")},T=function(){function e(e,t,n){this.type="style",this.isProcessed=!1;var r=n.sheet,i=n.Renderer;this.key=e,this.options=n,this.style=t,r?this.renderer=r.renderer:i&&(this.renderer=new i)}return e.prototype.prop=function(e,t,n){if(void 0===t)return this.style[e];var r=!!n&&n.force;if(!r&&this.style[e]===t)return this;var i=t;n&&!1===n.process||(i=this.options.jss.plugins.onChangeValue(t,e,this));var a=null==i||!1===i,o=e in this.style;if(a&&!o&&!r)return this;var s=a&&o;if(s?delete this.style[e]:this.style[e]=i,this.renderable&&this.renderer)return s?this.renderer.removeProperty(this.renderable,e):this.renderer.setProperty(this.renderable,e,i),this;var u=this.options.sheet;return u&&u.attached,this},e}(),I=function(e){function t(t,n,r){var i;i=e.call(this,t,n,r)||this;var a=r.selector,o=r.scoped,s=r.sheet,u=r.generateId;return a?i.selectorText=a:!1!==o&&(i.id=u((0,f.Z)((0,f.Z)(i)),s),i.selectorText="."+S(i.id)),i}(0,h.Z)(t,e);var n=t.prototype;return n.applyTo=function(e){var t=this.renderer;if(t){var n=this.toJSON();for(var r in n)t.setProperty(e,r,n[r])}return this},n.toJSON=function(){var e={};for(var t in this.style){var n=this.style[t];"object"!==typeof n?e[t]=n:Array.isArray(n)&&(e[t]=g(n))}return e},n.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?(0,r.Z)({},e,{allowEmpty:!0}):e;return _(this.selectorText,this.style,n)},(0,l.Z)(t,[{key:"selector",set:function(e){if(e!==this.selectorText){this.selectorText=e;var t=this.renderer,n=this.renderable;if(n&&t)t.setSelector(n,e)||t.replaceRule(n,this)}},get:function(){return this.selectorText}}]),t}(T),E={onCreateRule:function(e,t,n){return"@"===e[0]||n.parent&&"keyframes"===n.parent.type?null:new I(e,t,n)}},C={indent:1,children:!0},R=/@([\w-]+)/,N=function(){function e(e,t,n){this.type="conditional",this.isProcessed=!1,this.key=e;var i=e.match(R);for(var a in this.at=i?i[1]:"unknown",this.query=n.name||"@"+this.at,this.options=n,this.rules=new ee((0,r.Z)({},n,{parent:this})),t)this.rules.add(a,t[a]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.indexOf=function(e){return this.rules.indexOf(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r?(this.options.jss.plugins.onProcessRule(r),r):null},t.replaceRule=function(e,t,n){var r=this.rules.replace(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.toString=function(e){void 0===e&&(e=C);var t=k(e).linebreak;if(null==e.indent&&(e.indent=C.indent),null==e.children&&(e.children=C.children),!1===e.children)return this.query+" {}";var n=this.rules.toString(e);return n?this.query+" {"+t+n+t+"}":""},e}(),P=/@media|@supports\s+/,A={onCreateRule:function(e,t,n){return P.test(e)?new N(e,t,n):null}},O={indent:1,children:!0},D=/@keyframes\s+([\w-]+)/,L=function(){function e(e,t,n){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var i=e.match(D);i&&i[1]?this.name=i[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=n;var a=n.scoped,o=n.sheet,s=n.generateId;for(var u in this.id=!1===a?this.name:S(s(this,o)),this.rules=new ee((0,r.Z)({},n,{parent:this})),t)this.rules.add(u,t[u],(0,r.Z)({},n,{parent:this}));this.rules.process()}return e.prototype.toString=function(e){void 0===e&&(e=O);var t=k(e).linebreak;if(null==e.indent&&(e.indent=O.indent),null==e.children&&(e.children=O.children),!1===e.children)return this.at+" "+this.id+" {}";var n=this.rules.toString(e);return n&&(n=""+t+n+t),this.at+" "+this.id+" {"+n+"}"},e}(),M=/@keyframes\s+/,F=/\$([\w-]+)/g,U=function(e,t){return"string"===typeof e?e.replace(F,(function(e,n){return n in t?t[n]:e})):e},j=function(e,t,n){var r=e[t],i=U(r,n);i!==r&&(e[t]=i)},Z={onCreateRule:function(e,t,n){return"string"===typeof e&&M.test(e)?new L(e,t,n):null},onProcessStyle:function(e,t,n){return"style"===t.type&&n?("animation-name"in e&&j(e,"animation-name",n.keyframes),"animation"in e&&j(e,"animation",n.keyframes),e):e},onChangeValue:function(e,t,n){var r=n.options.sheet;if(!r)return e;switch(t){case"animation":case"animation-name":return U(e,r.keyframes);default:return e}}},V=function(e){function t(){return e.apply(this,arguments)||this}return(0,h.Z)(t,e),t.prototype.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?(0,r.Z)({},e,{allowEmpty:!0}):e;return _(this.key,this.style,n)},t}(T),q={onCreateRule:function(e,t,n){return n.parent&&"keyframes"===n.parent.type?new V(e,t,n):null}},B=function(){function e(e,t,n){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){var t=k(e).linebreak;if(Array.isArray(this.style)){for(var n="",r=0;r<this.style.length;r++)n+=_(this.at,this.style[r]),this.style[r+1]&&(n+=t);return n}return _(this.at,this.style,e)},e}(),z=/@font-face/,W={onCreateRule:function(e,t,n){return z.test(e)?new B(e,t,n):null}},H=function(){function e(e,t,n){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){return _(this.key,this.style,e)},e}(),K={onCreateRule:function(e,t,n){return"@viewport"===e||"@-ms-viewport"===e?new H(e,t,n):null}},G=function(){function e(e,t,n){this.type="simple",this.isProcessed=!1,this.key=e,this.value=t,this.options=n}return e.prototype.toString=function(e){if(Array.isArray(this.value)){for(var t="",n=0;n<this.value.length;n++)t+=this.key+" "+this.value[n]+";",this.value[n+1]&&(t+="\n");return t}return this.key+" "+this.value+";"},e}(),Q={"@charset":!0,"@import":!0,"@namespace":!0},Y={onCreateRule:function(e,t,n){return e in Q?new G(e,t,n):null}},$=[E,A,Z,q,W,K,Y],X={process:!0},J={force:!0,process:!0},ee=function(){function e(e){this.map={},this.raw={},this.index=[],this.counter=0,this.options=e,this.classes=e.classes,this.keyframes=e.keyframes}var t=e.prototype;return t.add=function(e,t,n){var i=this.options,a=i.parent,o=i.sheet,s=i.jss,u=i.Renderer,c=i.generateId,l=i.scoped,h=(0,r.Z)({classes:this.classes,parent:a,sheet:o,jss:s,Renderer:u,generateId:c,scoped:l,name:e,keyframes:this.keyframes,selector:void 0},n),f=e;e in this.raw&&(f=e+"-d"+this.counter++),this.raw[f]=t,f in this.classes&&(h.selector="."+S(this.classes[f]));var d=y(f,t,h);if(!d)return null;this.register(d);var p=void 0===h.index?this.index.length:h.index;return this.index.splice(p,0,d),d},t.replace=function(e,t,n){var i=this.get(e),a=this.index.indexOf(i);i&&this.remove(i);var o=n;return-1!==a&&(o=(0,r.Z)({},n,{index:a})),this.add(e,t,o)},t.get=function(e){return this.map[e]},t.remove=function(e){this.unregister(e),delete this.raw[e.key],this.index.splice(this.index.indexOf(e),1)},t.indexOf=function(e){return this.index.indexOf(e)},t.process=function(){var e=this.options.jss.plugins;this.index.slice(0).forEach(e.onProcessRule,e)},t.register=function(e){this.map[e.key]=e,e instanceof I?(this.map[e.selector]=e,e.id&&(this.classes[e.key]=e.id)):e instanceof L&&this.keyframes&&(this.keyframes[e.name]=e.id)},t.unregister=function(e){delete this.map[e.key],e instanceof I?(delete this.map[e.selector],delete this.classes[e.key]):e instanceof L&&delete this.keyframes[e.name]},t.update=function(){var e,t,n;if("string"===typeof(arguments.length<=0?void 0:arguments[0])?(e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2]):(t=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],e=null),e)this.updateOne(this.get(e),t,n);else for(var r=0;r<this.index.length;r++)this.updateOne(this.index[r],t,n)},t.updateOne=function(t,n,r){void 0===r&&(r=X);var i=this.options,a=i.jss.plugins,o=i.sheet;if(t.rules instanceof e)t.rules.update(n,r);else{var s=t.style;if(a.onUpdate(n,t,o,r),r.process&&s&&s!==t.style){for(var u in a.onProcessStyle(t.style,t,o),t.style){var c=t.style[u];c!==s[u]&&t.prop(u,c,J)}for(var l in s){var h=t.style[l],f=s[l];null==h&&h!==f&&t.prop(l,null,J)}}}},t.toString=function(e){for(var t="",n=this.options.sheet,r=!!n&&n.options.link,i=k(e).linebreak,a=0;a<this.index.length;a++){var o=this.index[a].toString(e);(o||r)&&(t&&(t+=i),t+=o)}return t},e}(),te=function(){function e(e,t){for(var n in this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=(0,r.Z)({},t,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),t.Renderer&&(this.renderer=new t.Renderer(this)),this.rules=new ee(this.options),e)this.rules.add(n,e[n]);this.rules.process()}var t=e.prototype;return t.attach=function(){return this.attached||(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy()),this},t.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},t.addRule=function(e,t,n){var r=this.queue;this.attached&&!r&&(this.queue=[]);var i=this.rules.add(e,t,n);return i?(this.options.jss.plugins.onProcessRule(i),this.attached?this.deployed?(r?r.push(i):(this.insertRule(i),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),i):i:(this.deployed=!1,i)):null},t.replaceRule=function(e,t,n){var r=this.rules.get(e);if(!r)return this.addRule(e,t,n);var i=this.rules.replace(e,t,n);return i&&this.options.jss.plugins.onProcessRule(i),this.attached?this.deployed?(this.renderer&&(i?r.renderable&&this.renderer.replaceRule(r.renderable,i):this.renderer.deleteRule(r)),i):i:(this.deployed=!1,i)},t.insertRule=function(e){this.renderer&&this.renderer.insertRule(e)},t.addRules=function(e,t){var n=[];for(var r in e){var i=this.addRule(r,e[r],t);i&&n.push(i)}return n},t.getRule=function(e){return this.rules.get(e)},t.deleteRule=function(e){var t="object"===typeof e?e:this.rules.get(e);return!(!t||this.attached&&!t.renderable)&&(this.rules.remove(t),!(this.attached&&t.renderable&&this.renderer)||this.renderer.deleteRule(t.renderable))},t.indexOf=function(e){return this.rules.indexOf(e)},t.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},t.update=function(){var e;return(e=this.rules).update.apply(e,arguments),this},t.updateOne=function(e,t,n){return this.rules.updateOne(e,t,n),this},t.toString=function(e){return this.rules.toString(e)},e}(),ne=function(){function e(){this.plugins={internal:[],external:[]},this.registry={}}var t=e.prototype;return t.onCreateRule=function(e,t,n){for(var r=0;r<this.registry.onCreateRule.length;r++){var i=this.registry.onCreateRule[r](e,t,n);if(i)return i}return null},t.onProcessRule=function(e){if(!e.isProcessed){for(var t=e.options.sheet,n=0;n<this.registry.onProcessRule.length;n++)this.registry.onProcessRule[n](e,t);e.style&&this.onProcessStyle(e.style,e,t),e.isProcessed=!0}},t.onProcessStyle=function(e,t,n){for(var r=0;r<this.registry.onProcessStyle.length;r++)t.style=this.registry.onProcessStyle[r](t.style,t,n)},t.onProcessSheet=function(e){for(var t=0;t<this.registry.onProcessSheet.length;t++)this.registry.onProcessSheet[t](e)},t.onUpdate=function(e,t,n,r){for(var i=0;i<this.registry.onUpdate.length;i++)this.registry.onUpdate[i](e,t,n,r)},t.onChangeValue=function(e,t,n){for(var r=e,i=0;i<this.registry.onChangeValue.length;i++)r=this.registry.onChangeValue[i](r,t,n);return r},t.use=function(e,t){void 0===t&&(t={queue:"external"});var n=this.plugins[t.queue];-1===n.indexOf(e)&&(n.push(e),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce((function(e,t){for(var n in t)n in e&&e[n].push(t[n]);return e}),{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},e}(),re=function(){function e(){this.registry=[]}var t=e.prototype;return t.add=function(e){var t=this.registry,n=e.options.index;if(-1===t.indexOf(e))if(0===t.length||n>=this.index)t.push(e);else for(var r=0;r<t.length;r++)if(t[r].options.index>n)return void t.splice(r,0,e)},t.reset=function(){this.registry=[]},t.remove=function(e){var t=this.registry.indexOf(e);this.registry.splice(t,1)},t.toString=function(e){for(var t=void 0===e?{}:e,n=t.attached,r=(0,d.Z)(t,["attached"]),i=k(r).linebreak,a="",o=0;o<this.registry.length;o++){var s=this.registry[o];null!=n&&s.attached!==n||(a&&(a+=i),a+=s.toString(r))}return a},(0,l.Z)(e,[{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),e}(),ie=new re,ae="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window&&window.Math===Math?window:"undefined"!==typeof self&&self.Math===Math?self:Function("return this")(),oe="2f1acc6c3a606b082e5eef5e54414ffb";null==ae[oe]&&(ae[oe]=0);var se=ae[oe]++,ue=function(e){void 0===e&&(e={});var t=0;return function(n,r){t+=1;var i="",a="";return r&&(r.options.classNamePrefix&&(a=r.options.classNamePrefix),null!=r.options.jss.id&&(i=String(r.options.jss.id))),e.minify?""+(a||"c")+se+i+t:a+n.key+"-"+se+(i?"-"+i:"")+"-"+t}},ce=function(e){var t;return function(){return t||(t=e()),t}},le=function(e,t){try{return e.attributeStyleMap?e.attributeStyleMap.get(t):e.style.getPropertyValue(t)}catch(n){return""}},he=function(e,t,n){try{var r=n;if(Array.isArray(n)&&(r=g(n)),e.attributeStyleMap)e.attributeStyleMap.set(t,r);else{var i=r?r.indexOf("!important"):-1,a=i>-1?r.substr(0,i-1):r;e.style.setProperty(t,a,i>-1?"important":"")}}catch(o){return!1}return!0},fe=function(e,t){try{e.attributeStyleMap?e.attributeStyleMap.delete(t):e.style.removeProperty(t)}catch(n){}},de=function(e,t){return e.selectorText=t,e.selectorText===t},pe=ce((function(){return document.querySelector("head")}));function ve(e){var t=ie.registry;if(t.length>0){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.attached&&r.options.index>t.index&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.attached&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=e.insertionPoint;if(r&&"string"===typeof r){var i=function(e){for(var t=pe(),n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(8===r.nodeType&&r.nodeValue.trim()===e)return r}return null}(r);if(i)return{parent:i.parentNode,node:i.nextSibling}}return!1}var ye=ce((function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null})),me=function(e,t,n){try{"insertRule"in e?e.insertRule(t,n):"appendRule"in e&&e.appendRule(t)}catch(r){return!1}return e.cssRules[n]},ge=function(e,t){var n=e.cssRules.length;return void 0===t||t>n?n:t},ke=function(){function e(e){this.getPropertyValue=le,this.setProperty=he,this.removeProperty=fe,this.setSelector=de,this.hasInsertedRules=!1,this.cssRules=[],e&&ie.add(e),this.sheet=e;var t=this.sheet?this.sheet.options:{},n=t.media,r=t.meta,i=t.element;this.element=i||function(){var e=document.createElement("style");return e.textContent="\n",e}(),this.element.setAttribute("data-jss",""),n&&this.element.setAttribute("media",n),r&&this.element.setAttribute("data-meta",r);var a=ye();a&&this.element.setAttribute("nonce",a)}var t=e.prototype;return t.attach=function(){if(!this.element.parentNode&&this.sheet){!function(e,t){var n=t.insertionPoint,r=ve(t);if(!1!==r&&r.parent)r.parent.insertBefore(e,r.node);else if(n&&"number"===typeof n.nodeType){var i=n,a=i.parentNode;a&&a.insertBefore(e,i.nextSibling)}else pe().appendChild(e)}(this.element,this.sheet.options);var e=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&e&&(this.hasInsertedRules=!1,this.deploy())}},t.detach=function(){if(this.sheet){var e=this.element.parentNode;e&&e.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent="\n")}},t.deploy=function(){var e=this.sheet;e&&(e.options.link?this.insertRules(e.rules):this.element.textContent="\n"+e.toString()+"\n")},t.insertRules=function(e,t){for(var n=0;n<e.index.length;n++)this.insertRule(e.index[n],n,t)},t.insertRule=function(e,t,n){if(void 0===n&&(n=this.element.sheet),e.rules){var r=e,i=n;if("conditional"===e.type||"keyframes"===e.type){var a=ge(n,t);if(!1===(i=me(n,r.toString({children:!1}),a)))return!1;this.refCssRule(e,a,i)}return this.insertRules(r.rules,i),i}var o=e.toString();if(!o)return!1;var s=ge(n,t),u=me(n,o,s);return!1!==u&&(this.hasInsertedRules=!0,this.refCssRule(e,s,u),u)},t.refCssRule=function(e,t,n){e.renderable=n,e.options.parent instanceof te&&this.cssRules.splice(t,0,n)},t.deleteRule=function(e){var t=this.element.sheet,n=this.indexOf(e);return-1!==n&&(t.deleteRule(n),this.cssRules.splice(n,1),!0)},t.indexOf=function(e){return this.cssRules.indexOf(e)},t.replaceRule=function(e,t){var n=this.indexOf(e);return-1!==n&&(this.element.sheet.deleteRule(n),this.cssRules.splice(n,1),this.insertRule(t,n))},t.getRules=function(){return this.element.sheet.cssRules},e}(),be=0,_e=function(){function e(e){this.id=be++,this.version="10.9.2",this.plugins=new ne,this.options={id:{minify:!1},createGenerateId:ue,Renderer:c?ke:null,plugins:[]},this.generateId=ue({minify:!1});for(var t=0;t<$.length;t++)this.plugins.use($[t],{queue:"internal"});this.setup(e)}var t=e.prototype;return t.setup=function(e){return void 0===e&&(e={}),e.createGenerateId&&(this.options.createGenerateId=e.createGenerateId),e.id&&(this.options.id=(0,r.Z)({},this.options.id,e.id)),(e.createGenerateId||e.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),null!=e.insertionPoint&&(this.options.insertionPoint=e.insertionPoint),"Renderer"in e&&(this.options.Renderer=e.Renderer),e.plugins&&this.use.apply(this,e.plugins),this},t.createStyleSheet=function(e,t){void 0===t&&(t={});var n=t.index;"number"!==typeof n&&(n=0===ie.index?0:ie.index+1);var i=new te(e,(0,r.Z)({},t,{jss:this,generateId:t.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:n}));return this.plugins.onProcessSheet(i),i},t.removeStyleSheet=function(e){return e.detach(),ie.remove(e),this},t.createRule=function(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n={}),"object"===typeof e)return this.createRule(void 0,e,t);var i=(0,r.Z)({},n,{name:e,jss:this,Renderer:this.options.Renderer});i.generateId||(i.generateId=this.generateId),i.classes||(i.classes={}),i.keyframes||(i.keyframes={});var a=y(e,t,i);return a&&this.plugins.onProcessRule(a),a},t.use=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){e.plugins.use(t)})),this},e}(),we=function(e){return new _e(e)},xe="object"===typeof CSS&&null!=CSS&&"number"in CSS;function Se(e){var t=null;for(var n in e){var r=e[n],i=typeof r;if("function"===i)t||(t={}),t[n]=r;else if("object"===i&&null!==r&&!Array.isArray(r)){var a=Se(r);a&&(t||(t={}),t[n]=a)}}return t}we();function Te(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.baseClasses,n=e.newClasses;e.Component;if(!n)return t;var i=(0,r.Z)({},t);return Object.keys(n).forEach((function(e){n[e]&&(i[e]="".concat(t[e]," ").concat(n[e]))})),i}var Ie={set:function(e,t,n,r){var i=e.get(t);i||(i=new Map,e.set(t,i)),i.set(n,r)},get:function(e,t,n){var r=e.get(t);return r?r.get(n):void 0},delete:function(e,t,n){e.get(t).delete(n)}},Ee=Ie;var Ce=a.createContext(null);function Re(){return a.useContext(Ce)}var Ne="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__",Pe=["checked","disabled","error","focused","focusVisible","required","expanded","selected"];var Ae=Date.now(),Oe="fnValues"+Ae,De="fnStyle"+ ++Ae,Le=function(){return{onCreateRule:function(e,t,n){if("function"!==typeof t)return null;var r=y(e,{},n);return r[De]=t,r},onProcessStyle:function(e,t){if(Oe in t||De in t)return e;var n={};for(var r in e){var i=e[r];"function"===typeof i&&(delete e[r],n[r]=i)}return t[Oe]=n,e},onUpdate:function(e,t,n,r){var i=t,a=i[De];a&&(i.style=a(e)||{});var o=i[Oe];if(o)for(var s in o)i.prop(s,o[s](e),r)}}},Me="@global",Fe="@global ",Ue=function(){function e(e,t,n){for(var i in this.type="global",this.at=Me,this.isProcessed=!1,this.key=e,this.options=n,this.rules=new ee((0,r.Z)({},n,{parent:this})),t)this.rules.add(i,t[i]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.replaceRule=function(e,t,n){var r=this.rules.replace(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.indexOf=function(e){return this.rules.indexOf(e)},t.toString=function(e){return this.rules.toString(e)},e}(),je=function(){function e(e,t,n){this.type="global",this.at=Me,this.isProcessed=!1,this.key=e,this.options=n;var i=e.substr(Fe.length);this.rule=n.jss.createRule(i,t,(0,r.Z)({},n,{parent:this}))}return e.prototype.toString=function(e){return this.rule?this.rule.toString(e):""},e}(),Ze=/\s*,\s*/g;function Ve(e,t){for(var n=e.split(Ze),r="",i=0;i<n.length;i++)r+=t+" "+n[i].trim(),n[i+1]&&(r+=", ");return r}var qe=function(){return{onCreateRule:function(e,t,n){if(!e)return null;if(e===Me)return new Ue(e,t,n);if("@"===e[0]&&e.substr(0,Fe.length)===Fe)return new je(e,t,n);var r=n.parent;return r&&("global"===r.type||r.options.parent&&"global"===r.options.parent.type)&&(n.scoped=!1),n.selector||!1!==n.scoped||(n.selector=e),null},onProcessRule:function(e,t){"style"===e.type&&t&&(function(e,t){var n=e.options,i=e.style,a=i?i[Me]:null;if(a){for(var o in a)t.addRule(o,a[o],(0,r.Z)({},n,{selector:Ve(o,e.selector)}));delete i[Me]}}(e,t),function(e,t){var n=e.options,i=e.style;for(var a in i)if("@"===a[0]&&a.substr(0,Me.length)===Me){var o=Ve(a.substr(Me.length),e.selector);t.addRule(o,i[a],(0,r.Z)({},n,{selector:o})),delete i[a]}}(e,t))}}},Be=/\s*,\s*/g,ze=/&/g,We=/\$([\w-]+)/g;var He=function(){function e(e,t){return function(n,r){var i=e.getRule(r)||t&&t.getRule(r);return i?i.selector:r}}function t(e,t){for(var n=t.split(Be),r=e.split(Be),i="",a=0;a<n.length;a++)for(var o=n[a],s=0;s<r.length;s++){var u=r[s];i&&(i+=", "),i+=-1!==u.indexOf("&")?u.replace(ze,o):o+" "+u}return i}function n(e,t,n){if(n)return(0,r.Z)({},n,{index:n.index+1});var i=e.options.nestingLevel;i=void 0===i?1:i+1;var a=(0,r.Z)({},e.options,{nestingLevel:i,index:t.indexOf(e)+1});return delete a.name,a}return{onProcessStyle:function(i,a,o){if("style"!==a.type)return i;var s,u,c=a,l=c.options.parent;for(var h in i){var f=-1!==h.indexOf("&"),d="@"===h[0];if(f||d){if(s=n(c,l,s),f){var p=t(h,c.selector);u||(u=e(l,o)),p=p.replace(We,u);var v=c.key+"-"+h;"replaceRule"in l?l.replaceRule(v,i[h],(0,r.Z)({},s,{selector:p})):l.addRule(v,i[h],(0,r.Z)({},s,{selector:p}))}else d&&l.addRule(h,{},s).addRule(c.key,i[h],{selector:c.selector});delete i[h]}}return i}}},Ke=/[A-Z]/g,Ge=/^ms-/,Qe={};function Ye(e){return"-"+e.toLowerCase()}var $e=function(e){if(Qe.hasOwnProperty(e))return Qe[e];var t=e.replace(Ke,Ye);return Qe[e]=Ge.test(t)?"-"+t:t};function Xe(e){var t={};for(var n in e){t[0===n.indexOf("--")?n:$e(n)]=e[n]}return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(Xe):t.fallbacks=Xe(e.fallbacks)),t}var Je=function(){return{onProcessStyle:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)e[t]=Xe(e[t]);return e}return Xe(e)},onChangeValue:function(e,t,n){if(0===t.indexOf("--"))return e;var r=$e(t);return t===r?e:(n.prop(r,e),null)}}},et=xe&&CSS?CSS.px:"px",tt=xe&&CSS?CSS.ms:"ms",nt=xe&&CSS?CSS.percent:"%";function rt(e){var t=/(-[a-z])/g,n=function(e){return e[1].toUpperCase()},r={};for(var i in e)r[i]=e[i],r[i.replace(t,n)]=e[i];return r}var it=rt({"animation-delay":tt,"animation-duration":tt,"background-position":et,"background-position-x":et,"background-position-y":et,"background-size":et,border:et,"border-bottom":et,"border-bottom-left-radius":et,"border-bottom-right-radius":et,"border-bottom-width":et,"border-left":et,"border-left-width":et,"border-radius":et,"border-right":et,"border-right-width":et,"border-top":et,"border-top-left-radius":et,"border-top-right-radius":et,"border-top-width":et,"border-width":et,"border-block":et,"border-block-end":et,"border-block-end-width":et,"border-block-start":et,"border-block-start-width":et,"border-block-width":et,"border-inline":et,"border-inline-end":et,"border-inline-end-width":et,"border-inline-start":et,"border-inline-start-width":et,"border-inline-width":et,"border-start-start-radius":et,"border-start-end-radius":et,"border-end-start-radius":et,"border-end-end-radius":et,margin:et,"margin-bottom":et,"margin-left":et,"margin-right":et,"margin-top":et,"margin-block":et,"margin-block-end":et,"margin-block-start":et,"margin-inline":et,"margin-inline-end":et,"margin-inline-start":et,padding:et,"padding-bottom":et,"padding-left":et,"padding-right":et,"padding-top":et,"padding-block":et,"padding-block-end":et,"padding-block-start":et,"padding-inline":et,"padding-inline-end":et,"padding-inline-start":et,"mask-position-x":et,"mask-position-y":et,"mask-size":et,height:et,width:et,"min-height":et,"max-height":et,"min-width":et,"max-width":et,bottom:et,left:et,top:et,right:et,inset:et,"inset-block":et,"inset-block-end":et,"inset-block-start":et,"inset-inline":et,"inset-inline-end":et,"inset-inline-start":et,"box-shadow":et,"text-shadow":et,"column-gap":et,"column-rule":et,"column-rule-width":et,"column-width":et,"font-size":et,"font-size-delta":et,"letter-spacing":et,"text-decoration-thickness":et,"text-indent":et,"text-stroke":et,"text-stroke-width":et,"word-spacing":et,motion:et,"motion-offset":et,outline:et,"outline-offset":et,"outline-width":et,perspective:et,"perspective-origin-x":nt,"perspective-origin-y":nt,"transform-origin":nt,"transform-origin-x":nt,"transform-origin-y":nt,"transform-origin-z":nt,"transition-delay":tt,"transition-duration":tt,"vertical-align":et,"flex-basis":et,"shape-margin":et,size:et,gap:et,grid:et,"grid-gap":et,"row-gap":et,"grid-row-gap":et,"grid-column-gap":et,"grid-template-rows":et,"grid-template-columns":et,"grid-auto-rows":et,"grid-auto-columns":et,"box-shadow-x":et,"box-shadow-y":et,"box-shadow-blur":et,"box-shadow-spread":et,"font-line-height":et,"text-shadow-x":et,"text-shadow-y":et,"text-shadow-blur":et});function at(e,t,n){if(null==t)return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]=at(e,t[r],n);else if("object"===typeof t)if("fallbacks"===e)for(var i in t)t[i]=at(i,t[i],n);else for(var a in t)t[a]=at(e+"-"+a,t[a],n);else if("number"===typeof t&&!1===isNaN(t)){var o=n[e]||it[e];return!o||0===t&&o===et?t.toString():"function"===typeof o?o(t).toString():""+t+o}return t}var ot=function(e){void 0===e&&(e={});var t=rt(e);return{onProcessStyle:function(e,n){if("style"!==n.type)return e;for(var r in e)e[r]=at(r,e[r],t);return e},onChangeValue:function(e,n){return at(n,e,t)}}},st=n(433),ut="",ct="",lt="",ht="",ft=c&&"ontouchstart"in document.documentElement;if(c){var dt={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},pt=document.createElement("p").style;for(var vt in dt)if(vt+"Transform"in pt){ut=vt,ct=dt[vt];break}"Webkit"===ut&&"msHyphens"in pt&&(ut="ms",ct=dt.ms,ht="edge"),"Webkit"===ut&&"-apple-trailing-word"in pt&&(lt="apple")}var yt=ut,mt=ct,gt=lt,kt=ht,bt=ft;var _t={noPrefill:["appearance"],supportedProperty:function(e){return"appearance"===e&&("ms"===yt?"-webkit-"+e:mt+e)}},wt={noPrefill:["color-adjust"],supportedProperty:function(e){return"color-adjust"===e&&("Webkit"===yt?mt+"print-"+e:e)}},xt=/[-\s]+(.)?/g;function St(e,t){return t?t.toUpperCase():""}function Tt(e){return e.replace(xt,St)}function It(e){return Tt("-"+e)}var Et,Ct={noPrefill:["mask"],supportedProperty:function(e,t){if(!/^mask/.test(e))return!1;if("Webkit"===yt){var n="mask-image";if(Tt(n)in t)return e;if(yt+It(n)in t)return mt+e}return e}},Rt={noPrefill:["text-orientation"],supportedProperty:function(e){return"text-orientation"===e&&("apple"!==gt||bt?e:mt+e)}},Nt={noPrefill:["transform"],supportedProperty:function(e,t,n){return"transform"===e&&(n.transform?e:mt+e)}},Pt={noPrefill:["transition"],supportedProperty:function(e,t,n){return"transition"===e&&(n.transition?e:mt+e)}},At={noPrefill:["writing-mode"],supportedProperty:function(e){return"writing-mode"===e&&("Webkit"===yt||"ms"===yt&&"edge"!==kt?mt+e:e)}},Ot={noPrefill:["user-select"],supportedProperty:function(e){return"user-select"===e&&("Moz"===yt||"ms"===yt||"apple"===gt?mt+e:e)}},Dt={supportedProperty:function(e,t){return!!/^break-/.test(e)&&("Webkit"===yt?"WebkitColumn"+It(e)in t&&mt+"column-"+e:"Moz"===yt&&("page"+It(e)in t&&"page-"+e))}},Lt={supportedProperty:function(e,t){if(!/^(border|margin|padding)-inline/.test(e))return!1;if("Moz"===yt)return e;var n=e.replace("-inline","");return yt+It(n)in t&&mt+n}},Mt={supportedProperty:function(e,t){return Tt(e)in t&&e}},Ft={supportedProperty:function(e,t){var n=It(e);return"-"===e[0]||"-"===e[0]&&"-"===e[1]?e:yt+n in t?mt+e:"Webkit"!==yt&&"Webkit"+n in t&&"-webkit-"+e}},Ut={supportedProperty:function(e){return"scroll-snap"===e.substring(0,11)&&("ms"===yt?""+mt+e:e)}},jt={supportedProperty:function(e){return"overscroll-behavior"===e&&("ms"===yt?mt+"scroll-chaining":e)}},Zt={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},Vt={supportedProperty:function(e,t){var n=Zt[e];return!!n&&(yt+It(n)in t&&mt+n)}},qt={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},Bt=Object.keys(qt),zt=function(e){return mt+e},Wt={supportedProperty:function(e,t,n){var r=n.multiple;if(Bt.indexOf(e)>-1){var i=qt[e];if(!Array.isArray(i))return yt+It(i)in t&&mt+i;if(!r)return!1;for(var a=0;a<i.length;a++)if(!(yt+It(i[0])in t))return!1;return i.map(zt)}return!1}},Ht=[_t,wt,Ct,Rt,Nt,Pt,At,Ot,Dt,Lt,Mt,Ft,Ut,jt,Vt,Wt],Kt=Ht.filter((function(e){return e.supportedProperty})).map((function(e){return e.supportedProperty})),Gt=Ht.filter((function(e){return e.noPrefill})).reduce((function(e,t){return e.push.apply(e,(0,st.Z)(t.noPrefill)),e}),[]),Qt={};if(c){Et=document.createElement("p");var Yt=window.getComputedStyle(document.documentElement,"");for(var $t in Yt)isNaN($t)||(Qt[Yt[$t]]=Yt[$t]);Gt.forEach((function(e){return delete Qt[e]}))}function Xt(e,t){if(void 0===t&&(t={}),!Et)return e;if(null!=Qt[e])return Qt[e];"transition"!==e&&"transform"!==e||(t[e]=e in Et.style);for(var n=0;n<Kt.length&&(Qt[e]=Kt[n](e,Et.style,t),!Qt[e]);n++);try{Et.style[e]=""}catch(r){return!1}return Qt[e]}var Jt,en={},tn={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},nn=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g;function rn(e,t,n){if("var"===t)return"var";if("all"===t)return"all";if("all"===n)return", all";var r=t?Xt(t):", "+Xt(n);return r||(t||n)}function an(e,t){var n=t;if(!Jt||"content"===e)return t;if("string"!==typeof n||!isNaN(parseInt(n,10)))return n;var r=e+n;if(null!=en[r])return en[r];try{Jt.style[e]=n}catch(i){return en[r]=!1,!1}if(tn[e])n=n.replace(nn,rn);else if(""===Jt.style[e]&&("-ms-flex"===(n=mt+n)&&(Jt.style[e]="-ms-flexbox"),Jt.style[e]=n,""===Jt.style[e]))return en[r]=!1,!1;return Jt.style[e]="",en[r]=n,en[r]}c&&(Jt=document.createElement("p"));var on=function(){function e(t){for(var n in t){var r=t[n];if("fallbacks"===n&&Array.isArray(r))t[n]=r.map(e);else{var i=!1,a=Xt(n);a&&a!==n&&(i=!0);var o=!1,s=an(a,g(r));s&&s!==r&&(o=!0),(i||o)&&(i&&delete t[n],t[a||n]=s||r)}}return t}return{onProcessRule:function(e){if("keyframes"===e.type){var t=e;t.at=function(e){return"-"===e[1]||"ms"===yt?e:"@"+mt+"keyframes"+e.substr(10)}(t.at)}},onProcessStyle:function(t,n){return"style"!==n.type?t:e(t)},onChangeValue:function(e,t){return an(t,g(e))||e}}};var sn=function(){var e=function(e,t){return e.length===t.length?e>t?1:-1:e.length-t.length};return{onProcessStyle:function(t,n){if("style"!==n.type)return t;for(var r={},i=Object.keys(t).sort(e),a=0;a<i.length;a++)r[i[a]]=t[i[a]];return r}}};var un=we({plugins:[Le(),qe(),He(),Je(),ot(),"undefined"===typeof window?null:on(),sn()]}),cn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disableGlobal,n=void 0!==t&&t,r=e.productionPrefix,i=void 0===r?"jss":r,a=e.seed,o=void 0===a?"":a,s=""===o?"":"".concat(o,"-"),u=0,c=function(){return u+=1};return function(e,t){var r=t.options.name;if(r&&0===r.indexOf("Mui")&&!t.options.link&&!n){if(-1!==Pe.indexOf(e.key))return"Mui-".concat(e.key);var a="".concat(s).concat(r,"-").concat(e.key);return t.options.theme[Ne]&&""===o?"".concat(a,"-").concat(c()):a}return"".concat(s).concat(i).concat(c())}}(),ln={disableGeneration:!1,generateClassName:cn,jss:un,sheetsCache:null,sheetsManager:new Map,sheetsRegistry:null},hn=a.createContext(ln);var fn=-1e9;function dn(){return fn+=1}var pn=n(2);function vn(e){return e&&"object"===(0,pn.Z)(e)&&e.constructor===Object}function yn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},i=n.clone?(0,r.Z)({},e):e;return vn(e)&&vn(t)&&Object.keys(t).forEach((function(r){"__proto__"!==r&&(vn(t[r])&&r in e?i[r]=yn(e[r],t[r],n):i[r]=t[r])})),i}function mn(e){var t="function"===typeof e;return{create:function(n,i){var a;try{a=t?e(n):e}catch(u){throw u}if(!i||!n.overrides||!n.overrides[i])return a;var o=n.overrides[i],s=(0,r.Z)({},a);return Object.keys(o).forEach((function(e){s[e]=yn(s[e],o[e])})),s},options:{}}}var gn={};function kn(e,t,n){var r=e.state;if(e.stylesOptions.disableGeneration)return t||{};r.cacheClasses||(r.cacheClasses={value:null,lastProp:null,lastJSS:{}});var i=!1;return r.classes!==r.cacheClasses.lastJSS&&(r.cacheClasses.lastJSS=r.classes,i=!0),t!==r.cacheClasses.lastProp&&(r.cacheClasses.lastProp=t,i=!0),i&&(r.cacheClasses.value=Te({baseClasses:r.cacheClasses.lastJSS,newClasses:t,Component:n})),r.cacheClasses.value}function bn(e,t){var n=e.state,i=e.theme,a=e.stylesOptions,o=e.stylesCreator,s=e.name;if(!a.disableGeneration){var u=Ee.get(a.sheetsManager,o,i);u||(u={refs:0,staticSheet:null,dynamicStyles:null},Ee.set(a.sheetsManager,o,i,u));var c=(0,r.Z)({},o.options,a,{theme:i,flip:"boolean"===typeof a.flip?a.flip:"rtl"===i.direction});c.generateId=c.serverGenerateClassName||c.generateClassName;var l=a.sheetsRegistry;if(0===u.refs){var h;a.sheetsCache&&(h=Ee.get(a.sheetsCache,o,i));var f=o.create(i,s);h||((h=a.jss.createStyleSheet(f,(0,r.Z)({link:!1},c))).attach(),a.sheetsCache&&Ee.set(a.sheetsCache,o,i,h)),l&&l.add(h),u.staticSheet=h,u.dynamicStyles=Se(f)}if(u.dynamicStyles){var d=a.jss.createStyleSheet(u.dynamicStyles,(0,r.Z)({link:!0},c));d.update(t),d.attach(),n.dynamicSheet=d,n.classes=Te({baseClasses:u.staticSheet.classes,newClasses:d.classes}),l&&l.add(d)}else n.classes=u.staticSheet.classes;u.refs+=1}}function _n(e,t){var n=e.state;n.dynamicSheet&&n.dynamicSheet.update(t)}function wn(e){var t=e.state,n=e.theme,r=e.stylesOptions,i=e.stylesCreator;if(!r.disableGeneration){var a=Ee.get(r.sheetsManager,i,n);a.refs-=1;var o=r.sheetsRegistry;0===a.refs&&(Ee.delete(r.sheetsManager,i,n),r.jss.removeStyleSheet(a.staticSheet),o&&o.remove(a.staticSheet)),t.dynamicSheet&&(r.jss.removeStyleSheet(t.dynamicSheet),o&&o.remove(t.dynamicSheet))}}function xn(e,t){var n,r=a.useRef([]),i=a.useMemo((function(){return{}}),t);r.current!==i&&(r.current=i,n=e()),a.useEffect((function(){return function(){n&&n()}}),[i])}function Sn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.name,o=t.classNamePrefix,s=t.Component,u=t.defaultTheme,c=void 0===u?gn:u,l=(0,i.Z)(t,["name","classNamePrefix","Component","defaultTheme"]),h=mn(e),f=n||o||"makeStyles";h.options={index:dn(),name:n,meta:f,classNamePrefix:f};var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Re()||c,i=(0,r.Z)({},a.useContext(hn),l),o=a.useRef(),u=a.useRef();xn((function(){var r={name:n,state:{},stylesCreator:h,stylesOptions:i,theme:t};return bn(r,e),u.current=!1,o.current=r,function(){wn(r)}}),[t,h]),a.useEffect((function(){u.current&&_n(o.current,e),u.current=!0}));var f=kn(o.current,e.classes,s);return f};return d}function Tn(e){var t=e.theme,n=e.name,r=e.props;if(!t||!t.props||!t.props[n])return r;var i,a=t.props[n];for(i in a)void 0===r[i]&&(r[i]=a[i]);return r}var In=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var o=t.defaultTheme,u=t.withTheme,c=void 0!==u&&u,l=t.name,h=(0,i.Z)(t,["defaultTheme","withTheme","name"]);var f=l,d=Sn(e,(0,r.Z)({defaultTheme:o,Component:n,name:l||n.displayName,classNamePrefix:f},h)),p=a.forwardRef((function(e,t){e.classes;var s,u=e.innerRef,h=(0,i.Z)(e,["classes","innerRef"]),f=d((0,r.Z)({},n.defaultProps,e)),p=h;return("string"===typeof l||c)&&(s=Re()||o,l&&(p=Tn({theme:s,name:l,props:h})),c&&!p.theme&&(p.theme=s)),a.createElement(n,(0,r.Z)({ref:u||t,classes:f},p))}));return s()(p,n),p}},En=["xs","sm","md","lg","xl"];function Cn(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:960,lg:1280,xl:1920}:t,a=e.unit,o=void 0===a?"px":a,s=e.step,u=void 0===s?5:s,c=(0,i.Z)(e,["values","unit","step"]);function l(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(o,")")}function h(e,t){var r=En.indexOf(t);return r===En.length-1?l(e):"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(o,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[En[r+1]]?n[En[r+1]]:t)-u/100).concat(o,")")}return(0,r.Z)({keys:En,values:n,up:l,down:function(e){var t=En.indexOf(e)+1,r=n[En[t]];return t===En.length?l("xs"):"@media (max-width:".concat(("number"===typeof r&&t>0?r:e)-u/100).concat(o,")")},between:h,only:function(e){return h(e,e)},width:function(e){return n[e]}},c)}var Rn=n(942);function Nn(e,t,n){var i;return(0,r.Z)({gutters:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return console.warn(["Material-UI: theme.mixins.gutters() is deprecated.","You can use the source of the mixin directly:","\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2),\n      [theme.breakpoints.up('sm')]: {\n        paddingLeft: theme.spacing(3),\n        paddingRight: theme.spacing(3),\n      },\n      "].join("\n")),(0,r.Z)({paddingLeft:t(2),paddingRight:t(2)},n,(0,Rn.Z)({},e.up("sm"),(0,r.Z)({paddingLeft:t(3),paddingRight:t(3)},n[e.up("sm")])))},toolbar:(i={minHeight:56},(0,Rn.Z)(i,"".concat(e.up("xs")," and (orientation: landscape)"),{minHeight:48}),(0,Rn.Z)(i,e.up("sm"),{minHeight:64}),i)},n)}var Pn=n(929),An={black:"#000",white:"#fff"},On={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"},Dn={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"},Ln={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"},Mn={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Fn={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Un={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},jn={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Zn=n(108),Vn={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:An.white,default:On[50]},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},qn={text:{primary:An.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",hint:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:On[800],default:"#303030"},action:{active:An.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function Bn(e,t,n,r){var i=r.light||r,a=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=(0,Zn.$n)(e.main,i):"dark"===t&&(e.dark=(0,Zn._j)(e.main,a)))}function zn(e){var t=e.primary,n=void 0===t?{light:Dn[300],main:Dn[500],dark:Dn[700]}:t,a=e.secondary,o=void 0===a?{light:Ln.A200,main:Ln.A400,dark:Ln.A700}:a,s=e.error,u=void 0===s?{light:Mn[300],main:Mn[500],dark:Mn[700]}:s,c=e.warning,l=void 0===c?{light:Fn[300],main:Fn[500],dark:Fn[700]}:c,h=e.info,f=void 0===h?{light:Un[300],main:Un[500],dark:Un[700]}:h,d=e.success,p=void 0===d?{light:jn[300],main:jn[500],dark:jn[700]}:d,v=e.type,y=void 0===v?"light":v,m=e.contrastThreshold,g=void 0===m?3:m,k=e.tonalOffset,b=void 0===k?.2:k,_=(0,i.Z)(e,["primary","secondary","error","warning","info","success","type","contrastThreshold","tonalOffset"]);function w(e){return(0,Zn.mi)(e,qn.text.primary)>=g?qn.text.primary:Vn.text.primary}var x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:700;if(!(e=(0,r.Z)({},e)).main&&e[t]&&(e.main=e[t]),!e.main)throw new Error((0,Pn.Z)(4,t));if("string"!==typeof e.main)throw new Error((0,Pn.Z)(5,JSON.stringify(e.main)));return Bn(e,"light",n,b),Bn(e,"dark",i,b),e.contrastText||(e.contrastText=w(e.main)),e},S={dark:qn,light:Vn};return yn((0,r.Z)({common:An,type:y,primary:x(n),secondary:x(o,"A400","A200","A700"),error:x(u),warning:x(l),info:x(f),success:x(p),grey:On,contrastThreshold:g,getContrastText:w,augmentColor:x,tonalOffset:b},S[y]),_)}function Wn(e){return Math.round(1e5*e)/1e5}function Hn(e){return Wn(e)}var Kn={textTransform:"uppercase"},Gn='"Roboto", "Helvetica", "Arial", sans-serif';function Qn(e,t){var n="function"===typeof t?t(e):t,a=n.fontFamily,o=void 0===a?Gn:a,s=n.fontSize,u=void 0===s?14:s,c=n.fontWeightLight,l=void 0===c?300:c,h=n.fontWeightRegular,f=void 0===h?400:h,d=n.fontWeightMedium,p=void 0===d?500:d,v=n.fontWeightBold,y=void 0===v?700:v,m=n.htmlFontSize,g=void 0===m?16:m,k=n.allVariants,b=n.pxToRem,_=(0,i.Z)(n,["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"]);var w=u/14,x=b||function(e){return"".concat(e/g*w,"rem")},S=function(e,t,n,i,a){return(0,r.Z)({fontFamily:o,fontWeight:e,fontSize:x(t),lineHeight:n},o===Gn?{letterSpacing:"".concat(Wn(i/t),"em")}:{},a,k)},T={h1:S(l,96,1.167,-1.5),h2:S(l,60,1.2,-.5),h3:S(f,48,1.167,0),h4:S(f,34,1.235,.25),h5:S(f,24,1.334,0),h6:S(p,20,1.6,.15),subtitle1:S(f,16,1.75,.15),subtitle2:S(p,14,1.57,.1),body1:S(f,16,1.5,.15),body2:S(f,14,1.43,.15),button:S(p,14,1.75,.4,Kn),caption:S(f,12,1.66,.4),overline:S(f,12,2.66,1,Kn)};return yn((0,r.Z)({htmlFontSize:g,pxToRem:x,round:Hn,fontFamily:o,fontSize:u,fontWeightLight:l,fontWeightRegular:f,fontWeightMedium:p,fontWeightBold:y},T),_,{clone:!1})}function Yn(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var $n=["none",Yn(0,2,1,-1,0,1,1,0,0,1,3,0),Yn(0,3,1,-2,0,2,2,0,0,1,5,0),Yn(0,3,3,-2,0,3,4,0,0,1,8,0),Yn(0,2,4,-1,0,4,5,0,0,1,10,0),Yn(0,3,5,-1,0,5,8,0,0,1,14,0),Yn(0,3,5,-1,0,6,10,0,0,1,18,0),Yn(0,4,5,-2,0,7,10,1,0,2,16,1),Yn(0,5,5,-3,0,8,10,1,0,3,14,2),Yn(0,5,6,-3,0,9,12,1,0,3,16,2),Yn(0,6,6,-3,0,10,14,1,0,4,18,3),Yn(0,6,7,-4,0,11,15,1,0,4,20,3),Yn(0,7,8,-4,0,12,17,2,0,5,22,4),Yn(0,7,8,-4,0,13,19,2,0,5,24,4),Yn(0,7,9,-4,0,14,21,2,0,5,26,4),Yn(0,8,9,-5,0,15,22,2,0,6,28,5),Yn(0,8,10,-5,0,16,24,2,0,6,30,5),Yn(0,8,11,-5,0,17,26,2,0,6,32,5),Yn(0,9,11,-5,0,18,28,2,0,7,34,6),Yn(0,9,12,-6,0,19,29,2,0,7,36,6),Yn(0,10,13,-6,0,20,31,3,0,8,38,7),Yn(0,10,13,-6,0,21,33,3,0,8,40,7),Yn(0,10,14,-6,0,22,35,3,0,8,42,7),Yn(0,11,14,-7,0,23,36,3,0,9,44,8),Yn(0,11,15,-7,0,24,38,3,0,9,46,8)],Xn={borderRadius:4},Jn=n(439),er={xs:0,sm:600,md:960,lg:1280,xl:1920},tr={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(er[e],"px)")}};var nr=function(e,t){return t?yn(e,t,{clone:!1}):e};var rr={m:"margin",p:"padding"},ir={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},ar={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},or=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!ar[e])return[e];e=ar[e]}var t=e.split(""),n=(0,Jn.Z)(t,2),r=n[0],i=n[1],a=rr[r],o=ir[i]||"";return Array.isArray(o)?o.map((function(e){return a+e})):[a+o]})),sr=["m","mt","mr","mb","ml","mx","my","p","pt","pr","pb","pl","px","py","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY"];function ur(e){var t=e.spacing||8;return"number"===typeof t?function(e){return t*e}:Array.isArray(t)?function(e){return t[e]}:"function"===typeof t?t:function(){}}function cr(e,t){return function(n){return e.reduce((function(e,r){return e[r]=function(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}(t,n),e}),{})}}function lr(e){var t=ur(e.theme);return Object.keys(e).map((function(n){if(-1===sr.indexOf(n))return null;var r=cr(or(n),t),i=e[n];return function(e,t,n){if(Array.isArray(t)){var r=e.theme.breakpoints||tr;return t.reduce((function(e,i,a){return e[r.up(r.keys[a])]=n(t[a]),e}),{})}if("object"===(0,pn.Z)(t)){var i=e.theme.breakpoints||tr;return Object.keys(t).reduce((function(e,r){return e[i.up(r)]=n(t[r]),e}),{})}return n(t)}(e,i,r)})).reduce(nr,{})}lr.propTypes={},lr.filterProps=sr;function hr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=ur({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return 0===n.length?t(1):1===n.length?t(n[0]):n.map((function(e){if("string"===typeof e)return e;var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return Object.defineProperty(n,"unit",{get:function(){return e}}),n.mui=!0,n}var fr={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},dr={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function pr(e){return"".concat(Math.round(e),"ms")}var vr={easing:fr,duration:dr,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.duration,r=void 0===n?dr.standard:n,a=t.easing,o=void 0===a?fr.easeInOut:a,s=t.delay,u=void 0===s?0:s;(0,i.Z)(t,["duration","easing","delay"]);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof r?r:pr(r)," ").concat(o," ").concat("string"===typeof u?u:pr(u))})).join(",")},getAutoHeightDuration:function(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}},yr={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function mr(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,r=e.mixins,a=void 0===r?{}:r,o=e.palette,s=void 0===o?{}:o,u=e.spacing,c=e.typography,l=void 0===c?{}:c,h=(0,i.Z)(e,["breakpoints","mixins","palette","spacing","typography"]),f=zn(s),d=Cn(n),p=hr(u),v=yn({breakpoints:d,direction:"ltr",mixins:Nn(d,p,a),overrides:{},palette:f,props:{},shadows:$n,typography:Qn(f,l),spacing:p,shape:Xn,transitions:vr,zIndex:yr},h),y=arguments.length,m=new Array(y>1?y-1:0),g=1;g<y;g++)m[g-1]=arguments[g];return v=m.reduce((function(e,t){return yn(e,t)}),v)}var gr=mr();var kr=function(e,t){return In(e,(0,r.Z)({defaultTheme:gr},t))}},122:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(929);function i(e){if("string"!==typeof e)throw new Error((0,r.Z)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},499:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(462),i=n(791),a=n(987),o=n(182),s=n(515),u=n(122),c=i.forwardRef((function(e,t){var n=e.children,s=e.classes,c=e.className,l=e.color,h=void 0===l?"inherit":l,f=e.component,d=void 0===f?"svg":f,p=e.fontSize,v=void 0===p?"medium":p,y=e.htmlColor,m=e.titleAccess,g=e.viewBox,k=void 0===g?"0 0 24 24":g,b=(0,a.Z)(e,["children","classes","className","color","component","fontSize","htmlColor","titleAccess","viewBox"]);return i.createElement(d,(0,r.Z)({className:(0,o.Z)(s.root,c,"inherit"!==h&&s["color".concat((0,u.Z)(h))],"default"!==v&&"medium"!==v&&s["fontSize".concat((0,u.Z)(v))]),focusable:"false",viewBox:k,color:y,"aria-hidden":!m||void 0,role:m?"img":void 0,ref:t},b),n,m?i.createElement("title",null,m):null)}));c.muiName="SvgIcon";var l=(0,s.Z)((function(e){return{root:{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,fontSize:e.typography.pxToRem(24),transition:e.transitions.create("fill",{duration:e.transitions.duration.shorter})},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorAction:{color:e.palette.action.active},colorError:{color:e.palette.error.main},colorDisabled:{color:e.palette.action.disabled},fontSizeInherit:{fontSize:"inherit"},fontSizeSmall:{fontSize:e.typography.pxToRem(20)},fontSizeLarge:{fontSize:e.typography.pxToRem(35)}}}),{name:"MuiSvgIcon"})(c);function h(e,t){var n=function(t,n){return i.createElement(l,(0,r.Z)({ref:n},t),e)};return n.muiName=l.muiName,i.memo(i.forwardRef(n))}},352:function(e,t,n){"use strict";n.r(t),n.d(t,{capitalize:function(){return r.Z},createChainedFunction:function(){return i},createSvgIcon:function(){return a.Z},debounce:function(){return o},deprecatedPropType:function(){return s},isMuiElement:function(){return c},ownerDocument:function(){return l},ownerWindow:function(){return h},requirePropFactory:function(){return f},setRef:function(){return d.Z},unstable_useId:function(){return g},unsupportedProp:function(){return p},useControlled:function(){return v},useEventCallback:function(){return y.Z},useForkRef:function(){return m.Z},useIsFocusVisible:function(){return k.Z}});var r=n(122);function i(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),(function(){}))}var a=n(499);function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=this,s=function(){e.apply(o,i)};clearTimeout(t),t=setTimeout(s,n)}return r.clear=function(){clearTimeout(t)},r}function s(e,t){return function(){return null}}var u=n(791);function c(e,t){return u.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)}function l(e){return e&&e.ownerDocument||document}function h(e){return l(e).defaultView||window}function f(e){return function(){return null}}var d=n(565);function p(e,t,n,r,i){return null}function v(e){var t=e.controlled,n=e.default,r=(e.name,e.state,u.useRef(void 0!==t).current),i=u.useState(n),a=i[0],o=i[1];return[r?t:a,u.useCallback((function(e){r||o(e)}),[])]}var y=n(216),m=n(806);function g(e){var t=u.useState(e),n=t[0],r=t[1],i=e||n;return u.useEffect((function(){null==n&&r("mui-".concat(Math.round(1e5*Math.random())))}),[n]),i}var k=n(175)},565:function(e,t,n){"use strict";function r(e,t){"function"===typeof e?e(t):e&&(e.current=t)}n.d(t,{Z:function(){return r}})},216:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(791),i="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;function a(e){var t=r.useRef(e);return i((function(){t.current=e})),r.useCallback((function(){return t.current.apply(void 0,arguments)}),[])}},806:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(791),i=n(565);function a(e,t){return r.useMemo((function(){return null==e&&null==t?null:function(n){(0,i.Z)(e,n),(0,i.Z)(t,n)}}),[e,t])}},175:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(791),i=n(164),a=!0,o=!1,s=null,u={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function c(e){e.metaKey||e.altKey||e.ctrlKey||(a=!0)}function l(){a=!1}function h(){"hidden"===this.visibilityState&&o&&(a=!0)}function f(e){var t=e.target;try{return t.matches(":focus-visible")}catch(n){}return a||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!u[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}function d(){o=!0,window.clearTimeout(s),s=window.setTimeout((function(){o=!1}),100)}function p(){return{isFocusVisible:f,onBlurVisible:d,ref:r.useCallback((function(e){var t,n=i.findDOMNode(e);null!=n&&((t=n.ownerDocument).addEventListener("keydown",c,!0),t.addEventListener("mousedown",l,!0),t.addEventListener("pointerdown",l,!0),t.addEventListener("touchstart",l,!0),t.addEventListener("visibilitychange",h,!0))}),[])}}},929:function(e,t,n){"use strict";function r(e){for(var t="https://mui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified Material-UI error #"+e+"; visit "+t+" for the full message."}n.d(t,{Z:function(){return r}})},579:function(e,t,n){"use strict";var r=n(836),i=n(263);t.Z=void 0;var a=i(n(791)),o=(0,r(n(894)).default)(a.createElement("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z"}),"Chat");t.Z=o},738:function(e,t,n){"use strict";var r=n(836),i=n(263);t.Z=void 0;var a=i(n(791)),o=(0,r(n(894)).default)(a.createElement("path",{d:"M11 5.08V2c-5 .5-9 4.81-9 10s4 9.5 9 10v-3.08c-3-.48-6-3.4-6-6.92s3-6.44 6-6.92zM18.97 11H22c-.47-5-4-8.53-9-9v3.08C16 5.51 18.54 8 18.97 11zM13 18.92V22c5-.47 8.53-4 9-9h-3.03c-.43 3-2.97 5.49-5.97 5.92z"}),"DonutLarge");t.Z=o},931:function(e,t,n){"use strict";var r=n(836),i=n(263);t.Z=void 0;var a=i(n(791)),o=(0,r(n(894)).default)(a.createElement("path",{d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"}),"Mic");t.Z=o},952:function(e,t,n){"use strict";var r=n(836),i=n(263);t.Z=void 0;var a=i(n(791)),o=(0,r(n(894)).default)(a.createElement("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert");t.Z=o},894:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(352)},472:function(e){e.exports="object"==typeof self?self.FormData:window.FormData},182:function(e,t,n){"use strict";function r(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}t.Z=function(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(i&&(i+=" "),i+=t);return i}},110:function(e,t,n){"use strict";var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?o:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);h&&(o=o.concat(h(n)));for(var s=u(t),v=u(n),y=0;y<o.length;++y){var m=o[y];if(!a[m]&&(!r||!r[m])&&(!v||!v[m])&&(!s||!s[m])){var g=f(n,m);try{c(t,m,g)}catch(k){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function _(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case h:case a:case s:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case f:case y:case v:case u:return e;default:return t}}case i:return t}}}function w(e){return _(e)===h}t.AsyncMode=l,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=u,t.Element=r,t.ForwardRef=f,t.Fragment=a,t.Lazy=y,t.Memo=v,t.Portal=i,t.Profiler=s,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return w(e)||_(e)===l},t.isConcurrentMode=w,t.isContextConsumer=function(e){return _(e)===c},t.isContextProvider=function(e){return _(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return _(e)===f},t.isFragment=function(e){return _(e)===a},t.isLazy=function(e){return _(e)===y},t.isMemo=function(e){return _(e)===v},t.isPortal=function(e){return _(e)===i},t.isProfiler=function(e){return _(e)===s},t.isStrictMode=function(e){return _(e)===o},t.isSuspense=function(e){return _(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===h||e===s||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===v||e.$$typeof===u||e.$$typeof===c||e.$$typeof===f||e.$$typeof===g||e.$$typeof===k||e.$$typeof===b||e.$$typeof===m)},t.typeOf=_},309:function(e,t,n){"use strict";e.exports=n(746)},281:function(e){var t;window,t=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=256,a=function(){function e(e){void 0===e&&(e="="),this._paddingCharacter=e}return e.prototype.encodedLength=function(e){return this._paddingCharacter?(e+2)/3*4|0:(8*e+5)/6|0},e.prototype.encode=function(e){for(var t="",n=0;n<e.length-2;n+=3){var r=e[n]<<16|e[n+1]<<8|e[n+2];t+=this._encodeByte(r>>>18&63),t+=this._encodeByte(r>>>12&63),t+=this._encodeByte(r>>>6&63),t+=this._encodeByte(r>>>0&63)}var i=e.length-n;return i>0&&(r=e[n]<<16|(2===i?e[n+1]<<8:0),t+=this._encodeByte(r>>>18&63),t+=this._encodeByte(r>>>12&63),t+=2===i?this._encodeByte(r>>>6&63):this._paddingCharacter||"",t+=this._paddingCharacter||""),t},e.prototype.maxDecodedLength=function(e){return this._paddingCharacter?e/4*3|0:(6*e+7)/8|0},e.prototype.decodedLength=function(e){return this.maxDecodedLength(e.length-this._getPaddingLength(e))},e.prototype.decode=function(e){if(0===e.length)return new Uint8Array(0);for(var t=this._getPaddingLength(e),n=e.length-t,r=new Uint8Array(this.maxDecodedLength(n)),a=0,o=0,s=0,u=0,c=0,l=0,h=0;o<n-4;o+=4)u=this._decodeChar(e.charCodeAt(o+0)),c=this._decodeChar(e.charCodeAt(o+1)),l=this._decodeChar(e.charCodeAt(o+2)),h=this._decodeChar(e.charCodeAt(o+3)),r[a++]=u<<2|c>>>4,r[a++]=c<<4|l>>>2,r[a++]=l<<6|h,s|=u&i,s|=c&i,s|=l&i,s|=h&i;if(o<n-1&&(u=this._decodeChar(e.charCodeAt(o)),c=this._decodeChar(e.charCodeAt(o+1)),r[a++]=u<<2|c>>>4,s|=u&i,s|=c&i),o<n-2&&(l=this._decodeChar(e.charCodeAt(o+2)),r[a++]=c<<4|l>>>2,s|=l&i),o<n-3&&(h=this._decodeChar(e.charCodeAt(o+3)),r[a++]=l<<6|h,s|=h&i),0!==s)throw new Error("Base64Coder: incorrect characters for decoding");return r},e.prototype._encodeByte=function(e){var t=e;return t+=65,t+=25-e>>>8&6,t+=51-e>>>8&-75,t+=61-e>>>8&-15,t+=62-e>>>8&3,String.fromCharCode(t)},e.prototype._decodeChar=function(e){var t=i;return t+=(42-e&e-44)>>>8&-256+e-43+62,t+=(46-e&e-48)>>>8&-256+e-47+63,t+=(47-e&e-58)>>>8&-256+e-48+52,t+=(64-e&e-91)>>>8&-256+e-65+0,t+=(96-e&e-123)>>>8&-256+e-97+26},e.prototype._getPaddingLength=function(e){var t=0;if(this._paddingCharacter){for(var n=e.length-1;n>=0&&e[n]===this._paddingCharacter;n--)t++;if(e.length<4||t>2)throw new Error("Base64Coder: incorrect padding")}return t},e}();t.Coder=a;var o=new a;t.encode=function(e){return o.encode(e)},t.decode=function(e){return o.decode(e)};var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype._encodeByte=function(e){var t=e;return t+=65,t+=25-e>>>8&6,t+=51-e>>>8&-75,t+=61-e>>>8&-13,t+=62-e>>>8&49,String.fromCharCode(t)},t.prototype._decodeChar=function(e){var t=i;return t+=(44-e&e-46)>>>8&-256+e-45+62,t+=(94-e&e-96)>>>8&-256+e-95+63,t+=(47-e&e-58)>>>8&-256+e-48+52,t+=(64-e&e-91)>>>8&-256+e-65+0,t+=(96-e&e-123)>>>8&-256+e-97+26},t}(a);t.URLSafeCoder=s;var u=new s;t.encodeURLSafe=function(e){return u.encode(e)},t.decodeURLSafe=function(e){return u.decode(e)},t.encodedLength=function(e){return o.encodedLength(e)},t.maxDecodedLength=function(e){return o.maxDecodedLength(e)},t.decodedLength=function(e){return o.decodedLength(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="utf8: invalid string",i="utf8: invalid source encoding";function a(e){for(var t=0,n=0;n<e.length;n++){var i=e.charCodeAt(n);if(i<128)t+=1;else if(i<2048)t+=2;else if(i<55296)t+=3;else{if(!(i<=57343))throw new Error(r);if(n>=e.length-1)throw new Error(r);n++,t+=4}}return t}t.encode=function(e){for(var t=new Uint8Array(a(e)),n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=192|i>>6,t[n++]=128|63&i):i<55296?(t[n++]=224|i>>12,t[n++]=128|i>>6&63,t[n++]=128|63&i):(r++,i=(1023&i)<<10,i|=1023&e.charCodeAt(r),i+=65536,t[n++]=240|i>>18,t[n++]=128|i>>12&63,t[n++]=128|i>>6&63,t[n++]=128|63&i)}return t},t.encodedLength=a,t.decode=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(128&r){var a=void 0;if(r<224){if(n>=e.length)throw new Error(i);if(128!==(192&(o=e[++n])))throw new Error(i);r=(31&r)<<6|63&o,a=128}else if(r<240){if(n>=e.length-1)throw new Error(i);var o=e[++n],s=e[++n];if(128!==(192&o)||128!==(192&s))throw new Error(i);r=(15&r)<<12|(63&o)<<6|63&s,a=2048}else{if(!(r<248))throw new Error(i);if(n>=e.length-2)throw new Error(i);o=e[++n],s=e[++n];var u=e[++n];if(128!==(192&o)||128!==(192&s)||128!==(192&u))throw new Error(i);r=(15&r)<<18|(63&o)<<12|(63&s)<<6|63&u,a=65536}if(r<a||r>=55296&&r<=57343)throw new Error(i);if(r>=65536){if(r>1114111)throw new Error(i);r-=65536,t.push(String.fromCharCode(55296|r>>10)),r=56320|1023&r}}t.push(String.fromCharCode(r))}return t.join("")}},function(e,t,n){e.exports=n(3).default},function(e,t,n){"use strict";n.r(t);var r,i=function(){function e(e,t){this.lastId=0,this.prefix=e,this.name=t}return e.prototype.create=function(e){this.lastId++;var t=this.lastId,n=this.prefix+t,r=this.name+"["+t+"]",i=!1,a=function(){i||(e.apply(null,arguments),i=!0)};return this[t]=a,{number:t,id:n,name:r,callback:a}},e.prototype.remove=function(e){delete this[e.number]},e}(),a=new i("_pusher_script_","Pusher.ScriptReceivers"),o={VERSION:"7.4.0",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,cluster:"mt1",userAuthentication:{endpoint:"/pusher/user-auth",transport:"ajax"},channelAuthorization:{endpoint:"/pusher/auth",transport:"ajax"},cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},s=function(){function e(e){this.options=e,this.receivers=e.receivers||a,this.loading={}}return e.prototype.load=function(e,t,n){var r=this;if(r.loading[e]&&r.loading[e].length>0)r.loading[e].push(n);else{r.loading[e]=[n];var i=Rt.createScriptRequest(r.getPath(e,t)),a=r.receivers.create((function(t){if(r.receivers.remove(a),r.loading[e]){var n=r.loading[e];delete r.loading[e];for(var o=function(e){e||i.cleanup()},s=0;s<n.length;s++)n[s](t,o)}}));i.send(a)}},e.prototype.getRoot=function(e){var t=Rt.getDocument().location.protocol;return(e&&e.useTLS||"https:"===t?this.options.cdn_https:this.options.cdn_http).replace(/\/*$/,"")+"/"+this.options.version},e.prototype.getPath=function(e,t){return this.getRoot(t)+"/"+e+this.options.suffix+".js"},e}(),u=new i("_pusher_dependencies","Pusher.DependenciesReceivers"),c=new s({cdn_http:o.cdn_http,cdn_https:o.cdn_https,version:o.VERSION,suffix:o.dependency_suffix,receivers:u}),l={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/channels/server_api/authenticating_users"},authorizationEndpoint:{path:"/docs/channels/server_api/authorizing-users/"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}},h=function(e){var t,n=l.urls[e];return n?(n.fullUrl?t=n.fullUrl:n.path&&(t=l.baseUrl+n.path),t?"See: "+t:""):""};!function(e){e.UserAuthentication="user-authentication",e.ChannelAuthorization="channel-authorization"}(r||(r={}));for(var f=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),d=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return Object.setPrototypeOf(r,n.prototype),r}return f(t,e),t}(Error),p=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return Object.setPrototypeOf(r,n.prototype),r}return f(t,e),t}(Error),v=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return Object.setPrototypeOf(r,n.prototype),r}return f(t,e),t}(Error),y=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return Object.setPrototypeOf(r,n.prototype),r}return f(t,e),t}(Error),m=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return Object.setPrototypeOf(r,n.prototype),r}return f(t,e),t}(Error),g=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return Object.setPrototypeOf(r,n.prototype),r}return f(t,e),t}(Error),k=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return Object.setPrototypeOf(r,n.prototype),r}return f(t,e),t}(Error),b=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return Object.setPrototypeOf(r,n.prototype),r}return f(t,e),t}(Error),_=function(e){function t(t,n){var r=this.constructor,i=e.call(this,n)||this;return i.status=t,Object.setPrototypeOf(i,r.prototype),i}return f(t,e),t}(Error),w=function(e,t,n,i,a){var o=Rt.createXHR();for(var s in o.open("POST",n.endpoint,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.headers)o.setRequestHeader(s,n.headers[s]);return o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status){var e=void 0,t=!1;try{e=JSON.parse(o.responseText),t=!0}catch(u){a(new _(200,"JSON returned from "+i.toString()+" endpoint was invalid, yet status code was 200. Data was: "+o.responseText),null)}t&&a(null,e)}else{var s="";switch(i){case r.UserAuthentication:s=h("authenticationEndpoint");break;case r.ChannelAuthorization:s="Clients must be authenticated to join private or presence channels. "+h("authorizationEndpoint")}a(new _(o.status,"Unable to retrieve auth string from "+i.toString()+" endpoint - received status: "+o.status+" from "+n.endpoint+". "+s),null)}},o.send(t),o},x=String.fromCharCode,S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T={},I=0,E=S.length;I<E;I++)T[S.charAt(I)]=I;var C=function(e){var t=e.charCodeAt(0);return t<128?e:t<2048?x(192|t>>>6)+x(128|63&t):x(224|t>>>12&15)+x(128|t>>>6&63)+x(128|63&t)},R=function(e){return e.replace(/[^\x00-\x7F]/g,C)},N=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[S.charAt(n>>>18),S.charAt(n>>>12&63),t>=2?"=":S.charAt(n>>>6&63),t>=1?"=":S.charAt(63&n)].join("")},P=window.btoa||function(e){return e.replace(/[\s\S]{1,3}/g,N)},A=function(){function e(e,t,n,r){var i=this;this.clear=t,this.timer=e((function(){i.timer&&(i.timer=r(i.timer))}),n)}return e.prototype.isRunning=function(){return null!==this.timer},e.prototype.ensureAborted=function(){this.timer&&(this.clear(this.timer),this.timer=null)},e}(),O=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function D(e){window.clearTimeout(e)}function L(e){window.clearInterval(e)}var M=function(e){function t(t,n){return e.call(this,setTimeout,D,t,(function(e){return n(),null}))||this}return O(t,e),t}(A),F=function(e){function t(t,n){return e.call(this,setInterval,L,t,(function(e){return n(),e}))||this}return O(t,e),t}(A),U={now:function(){return Date.now?Date.now():(new Date).valueOf()},defer:function(e){return new M(0,e)},method:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Array.prototype.slice.call(arguments,1);return function(t){return t[e].apply(t,r.concat(arguments))}}},j=U;function Z(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++){var i=t[r];for(var a in i)i[a]&&i[a].constructor&&i[a].constructor===Object?e[a]=Z(e[a]||{},i[a]):e[a]=i[a]}return e}function V(){for(var e=["Pusher"],t=0;t<arguments.length;t++)"string"===typeof arguments[t]?e.push(arguments[t]):e.push(X(arguments[t]));return e.join(" : ")}function q(e,t){var n=Array.prototype.indexOf;if(null===e)return-1;if(n&&e.indexOf===n)return e.indexOf(t);for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1}function B(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(e[n],n,e)}function z(e){var t=[];return B(e,(function(e,n){t.push(n)})),t}function W(e,t,n){for(var r=0;r<e.length;r++)t.call(n||window,e[r],r,e)}function H(e,t){for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r,e,n));return n}function K(e,t){t=t||function(e){return!!e};for(var n=[],r=0;r<e.length;r++)t(e[r],r,e,n)&&n.push(e[r]);return n}function G(e,t){var n={};return B(e,(function(r,i){(t&&t(r,i,e,n)||Boolean(r))&&(n[i]=r)})),n}function Q(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n,e))return!0;return!1}function Y(e){return function(e,t){var n={};return B(e,(function(e,r){n[r]=t(e)})),n}(e,(function(e){return"object"===typeof e&&(e=X(e)),encodeURIComponent((t=e.toString(),P(R(t))));var t}))}function $(e){return H(function(e){var t=[];return B(e,(function(e,n){t.push([n,e])})),t}(Y(G(e,(function(e){return void 0!==e})))),j.method("join","=")).join("&")}function X(e){try{return JSON.stringify(e)}catch(t){return JSON.stringify(function(e){var t=[],n=[];return function e(r,i){var a,o,s;switch(typeof r){case"object":if(!r)return null;for(a=0;a<t.length;a+=1)if(t[a]===r)return{$ref:n[a]};if(t.push(r),n.push(i),"[object Array]"===Object.prototype.toString.apply(r))for(s=[],a=0;a<r.length;a+=1)s[a]=e(r[a],i+"["+a+"]");else for(o in s={},r)Object.prototype.hasOwnProperty.call(r,o)&&(s[o]=e(r[o],i+"["+JSON.stringify(o)+"]"));return s;case"number":case"string":case"boolean":return r}}(e,"$")}(e))}}var J=function(){function e(){this.globalLog=function(e){window.console&&window.console.log&&window.console.log(e)}}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.log(this.globalLog,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.log(this.globalLogWarn,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.log(this.globalLogError,e)},e.prototype.globalLogWarn=function(e){window.console&&window.console.warn?window.console.warn(e):this.globalLog(e)},e.prototype.globalLogError=function(e){window.console&&window.console.error?window.console.error(e):this.globalLogWarn(e)},e.prototype.log=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=V.apply(this,arguments);if($t.log)$t.log(r);else if($t.logToConsole){var i=e.bind(this);i(r)}},e}(),ee=new J,te=function(e,t,n,r,i){void 0!==n.headers&&ee.warn("To send headers with the "+r.toString()+" request, you must use AJAX, rather than JSONP.");var a=e.nextAuthCallbackID.toString();e.nextAuthCallbackID++;var o=e.getDocument(),s=o.createElement("script");e.auth_callbacks[a]=function(e){i(null,e)};var u="Pusher.auth_callbacks['"+a+"']";s.src=n.endpoint+"?callback="+encodeURIComponent(u)+"&"+t;var c=o.getElementsByTagName("head")[0]||o.documentElement;c.insertBefore(s,c.firstChild)},ne=function(){function e(e){this.src=e}return e.prototype.send=function(e){var t=this,n="Error loading "+t.src;t.script=document.createElement("script"),t.script.id=e.id,t.script.src=t.src,t.script.type="text/javascript",t.script.charset="UTF-8",t.script.addEventListener?(t.script.onerror=function(){e.callback(n)},t.script.onload=function(){e.callback(null)}):t.script.onreadystatechange=function(){"loaded"!==t.script.readyState&&"complete"!==t.script.readyState||e.callback(null)},void 0===t.script.async&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(t.errorScript=document.createElement("script"),t.errorScript.id=e.id+"_error",t.errorScript.text=e.name+"('"+n+"');",t.script.async=t.errorScript.async=!1):t.script.async=!0;var r=document.getElementsByTagName("head")[0];r.insertBefore(t.script,r.firstChild),t.errorScript&&r.insertBefore(t.errorScript,t.script.nextSibling)},e.prototype.cleanup=function(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null},e}(),re=function(){function e(e,t){this.url=e,this.data=t}return e.prototype.send=function(e){if(!this.request){var t=$(this.data),n=this.url+"/"+e.number+"?"+t;this.request=Rt.createScriptRequest(n),this.request.send(e)}},e.prototype.cleanup=function(){this.request&&this.request.cleanup()},e}(),ie={name:"jsonp",getAgent:function(e,t){return function(n,r){var i="http"+(t?"s":"")+"://"+(e.host||e.options.host)+e.options.path,o=Rt.createJSONPRequest(i,n),s=Rt.ScriptReceivers.create((function(t,n){a.remove(s),o.cleanup(),n&&n.host&&(e.host=n.host),r&&r(t,n)}));o.send(s)}}};function ae(e,t,n){return e+(t.useTLS?"s":"")+"://"+(t.useTLS?t.hostTLS:t.hostNonTLS)+n}function oe(e,t){return"/app/"+e+"?protocol="+o.PROTOCOL+"&client=js&version="+o.VERSION+(t?"&"+t:"")}var se={getInitial:function(e,t){return ae("ws",t,(t.httpPath||"")+oe(e,"flash=false"))}},ue={getInitial:function(e,t){return ae("http",t,(t.httpPath||"/pusher")+oe(e))}},ce={getInitial:function(e,t){return ae("http",t,t.httpPath||"/pusher")},getPath:function(e,t){return oe(e)}},le=function(){function e(){this._callbacks={}}return e.prototype.get=function(e){return this._callbacks[he(e)]},e.prototype.add=function(e,t,n){var r=he(e);this._callbacks[r]=this._callbacks[r]||[],this._callbacks[r].push({fn:t,context:n})},e.prototype.remove=function(e,t,n){if(e||t||n){var r=e?[he(e)]:z(this._callbacks);t||n?this.removeCallback(r,t,n):this.removeAllCallbacks(r)}else this._callbacks={}},e.prototype.removeCallback=function(e,t,n){W(e,(function(e){this._callbacks[e]=K(this._callbacks[e]||[],(function(e){return t&&t!==e.fn||n&&n!==e.context})),0===this._callbacks[e].length&&delete this._callbacks[e]}),this)},e.prototype.removeAllCallbacks=function(e){W(e,(function(e){delete this._callbacks[e]}),this)},e}();function he(e){return"_"+e}var fe=function(){function e(e){this.callbacks=new le,this.global_callbacks=[],this.failThrough=e}return e.prototype.bind=function(e,t,n){return this.callbacks.add(e,t,n),this},e.prototype.bind_global=function(e){return this.global_callbacks.push(e),this},e.prototype.unbind=function(e,t,n){return this.callbacks.remove(e,t,n),this},e.prototype.unbind_global=function(e){return e?(this.global_callbacks=K(this.global_callbacks||[],(function(t){return t!==e})),this):(this.global_callbacks=[],this)},e.prototype.unbind_all=function(){return this.unbind(),this.unbind_global(),this},e.prototype.emit=function(e,t,n){for(var r=0;r<this.global_callbacks.length;r++)this.global_callbacks[r](e,t);var i=this.callbacks.get(e),a=[];if(n?a.push(t,n):t&&a.push(t),i&&i.length>0)for(r=0;r<i.length;r++)i[r].fn.apply(i[r].context||window,a);else this.failThrough&&this.failThrough(e,t);return this},e}(),de=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pe=function(e){function t(t,n,r,i,a){var o=e.call(this)||this;return o.initialize=Rt.transportConnectionInitializer,o.hooks=t,o.name=n,o.priority=r,o.key=i,o.options=a,o.state="new",o.timeline=a.timeline,o.activityTimeout=a.activityTimeout,o.id=o.timeline.generateUniqueID(),o}return de(t,e),t.prototype.handlesActivityChecks=function(){return Boolean(this.hooks.handlesActivityChecks)},t.prototype.supportsPing=function(){return Boolean(this.hooks.supportsPing)},t.prototype.connect=function(){var e=this;if(this.socket||"initialized"!==this.state)return!1;var t=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(t,this.options)}catch(n){return j.defer((function(){e.onError(n),e.changeState("closed")})),!1}return this.bindListeners(),ee.debug("Connecting",{transport:this.name,url:t}),this.changeState("connecting"),!0},t.prototype.close=function(){return!!this.socket&&(this.socket.close(),!0)},t.prototype.send=function(e){var t=this;return"open"===this.state&&(j.defer((function(){t.socket&&t.socket.send(e)})),!0)},t.prototype.ping=function(){"open"===this.state&&this.supportsPing()&&this.socket.ping()},t.prototype.onOpen=function(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0},t.prototype.onError=function(e){this.emit("error",{type:"WebSocketError",error:e}),this.timeline.error(this.buildTimelineMessage({error:e.toString()}))},t.prototype.onClose=function(e){e?this.changeState("closed",{code:e.code,reason:e.reason,wasClean:e.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0},t.prototype.onMessage=function(e){this.emit("message",e)},t.prototype.onActivity=function(){this.emit("activity")},t.prototype.bindListeners=function(){var e=this;this.socket.onopen=function(){e.onOpen()},this.socket.onerror=function(t){e.onError(t)},this.socket.onclose=function(t){e.onClose(t)},this.socket.onmessage=function(t){e.onMessage(t)},this.supportsPing()&&(this.socket.onactivity=function(){e.onActivity()})},t.prototype.unbindListeners=function(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))},t.prototype.changeState=function(e,t){this.state=e,this.timeline.info(this.buildTimelineMessage({state:e,params:t})),this.emit(e,t)},t.prototype.buildTimelineMessage=function(e){return Z({cid:this.id},e)},t}(fe),ve=pe,ye=function(){function e(e){this.hooks=e}return e.prototype.isSupported=function(e){return this.hooks.isSupported(e)},e.prototype.createConnection=function(e,t,n,r){return new ve(this.hooks,e,t,n,r)},e}(),me=new ye({urls:se,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return Boolean(Rt.getWebSocketAPI())},isSupported:function(){return Boolean(Rt.getWebSocketAPI())},getSocket:function(e){return Rt.createWebSocket(e)}}),ge={urls:ue,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},ke=Z({getSocket:function(e){return Rt.HTTPFactory.createStreamingSocket(e)}},ge),be=Z({getSocket:function(e){return Rt.HTTPFactory.createPollingSocket(e)}},ge),_e={isSupported:function(){return Rt.isXHRSupported()}},we={ws:me,xhr_streaming:new ye(Z({},ke,_e)),xhr_polling:new ye(Z({},be,_e))},xe=new ye({file:"sockjs",urls:ce,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return void 0!==window.SockJS},getSocket:function(e,t){return new window.SockJS(e,null,{js_path:c.getPath("sockjs",{useTLS:t.useTLS}),ignore_null_origin:t.ignoreNullOrigin})},beforeOpen:function(e,t){e.send(JSON.stringify({path:t}))}}),Se={isSupported:function(e){return Rt.isXDRSupported(e.useTLS)}},Te=new ye(Z({},ke,Se)),Ie=new ye(Z({},be,Se));we.xdr_streaming=Te,we.xdr_polling=Ie,we.sockjs=xe;var Ee=we,Ce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Re=new(function(e){function t(){var t=e.call(this)||this,n=t;return void 0!==window.addEventListener&&(window.addEventListener("online",(function(){n.emit("online")}),!1),window.addEventListener("offline",(function(){n.emit("offline")}),!1)),t}return Ce(t,e),t.prototype.isOnline=function(){return void 0===window.navigator.onLine||window.navigator.onLine},t}(fe)),Ne=function(){function e(e,t,n){this.manager=e,this.transport=t,this.minPingDelay=n.minPingDelay,this.maxPingDelay=n.maxPingDelay,this.pingDelay=void 0}return e.prototype.createConnection=function(e,t,n,r){var i=this;r=Z({},r,{activityTimeout:this.pingDelay});var a=this.transport.createConnection(e,t,n,r),o=null,s=function e(t){if(a.unbind("closed",e),1002===t.code||1003===t.code)i.manager.reportDeath();else if(!t.wasClean&&o){var n=j.now()-o;n<2*i.maxPingDelay&&(i.manager.reportDeath(),i.pingDelay=Math.max(n/2,i.minPingDelay))}};return a.bind("open",(function e(){a.unbind("open",e),a.bind("closed",s),o=j.now()})),a},e.prototype.isSupported=function(e){return this.manager.isAlive()&&this.transport.isSupported(e)},e}(),Pe={decodeMessage:function(e){try{var t=JSON.parse(e.data),n=t.data;if("string"===typeof n)try{n=JSON.parse(t.data)}catch(i){}var r={event:t.event,channel:t.channel,data:n};return t.user_id&&(r.user_id=t.user_id),r}catch(i){throw{type:"MessageParseError",error:i,data:e.data}}},encodeMessage:function(e){return JSON.stringify(e)},processHandshake:function(e){var t=Pe.decodeMessage(e);if("pusher:connection_established"===t.event){if(!t.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:t.data.socket_id,activityTimeout:1e3*t.data.activity_timeout}}if("pusher:error"===t.event)return{action:this.getCloseAction(t.data),error:this.getCloseError(t.data)};throw"Invalid handshake"},getCloseAction:function(e){return e.code<4e3?e.code>=1002&&e.code<=1004?"backoff":null:4e3===e.code?"tls_only":e.code<4100?"refused":e.code<4200?"backoff":e.code<4300?"retry":"refused"},getCloseError:function(e){return 1e3!==e.code&&1001!==e.code?{type:"PusherError",data:{code:e.code,message:e.reason||e.message}}:null}},Ae=Pe,Oe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),De=function(e){function t(t,n){var r=e.call(this)||this;return r.id=t,r.transport=n,r.activityTimeout=n.activityTimeout,r.bindListeners(),r}return Oe(t,e),t.prototype.handlesActivityChecks=function(){return this.transport.handlesActivityChecks()},t.prototype.send=function(e){return this.transport.send(e)},t.prototype.send_event=function(e,t,n){var r={event:e,data:t};return n&&(r.channel=n),ee.debug("Event sent",r),this.send(Ae.encodeMessage(r))},t.prototype.ping=function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})},t.prototype.close=function(){this.transport.close()},t.prototype.bindListeners=function(){var e=this,t={message:function(t){var n;try{n=Ae.decodeMessage(t)}catch(r){e.emit("error",{type:"MessageParseError",error:r,data:t.data})}if(void 0!==n){switch(ee.debug("Event recd",n),n.event){case"pusher:error":e.emit("error",{type:"PusherError",data:n.data});break;case"pusher:ping":e.emit("ping");break;case"pusher:pong":e.emit("pong")}e.emit("message",n)}},activity:function(){e.emit("activity")},error:function(t){e.emit("error",t)},closed:function(t){n(),t&&t.code&&e.handleCloseEvent(t),e.transport=null,e.emit("closed")}},n=function(){B(t,(function(t,n){e.transport.unbind(n,t)}))};B(t,(function(t,n){e.transport.bind(n,t)}))},t.prototype.handleCloseEvent=function(e){var t=Ae.getCloseAction(e),n=Ae.getCloseError(e);n&&this.emit("error",n),t&&this.emit(t,{action:t,error:n})},t}(fe),Le=function(){function e(e,t){this.transport=e,this.callback=t,this.bindListeners()}return e.prototype.close=function(){this.unbindListeners(),this.transport.close()},e.prototype.bindListeners=function(){var e=this;this.onMessage=function(t){var n;e.unbindListeners();try{n=Ae.processHandshake(t)}catch(r){return e.finish("error",{error:r}),void e.transport.close()}"connected"===n.action?e.finish("connected",{connection:new De(n.id,e.transport),activityTimeout:n.activityTimeout}):(e.finish(n.action,{error:n.error}),e.transport.close())},this.onClosed=function(t){e.unbindListeners();var n=Ae.getCloseAction(t)||"backoff",r=Ae.getCloseError(t);e.finish(n,{error:r})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)},e.prototype.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},e.prototype.finish=function(e,t){this.callback(Z({transport:this.transport,action:e},t))},e}(),Me=function(){function e(e,t){this.timeline=e,this.options=t||{}}return e.prototype.send=function(e,t){this.timeline.isEmpty()||this.timeline.send(Rt.TimelineTransport.getAgent(this,e),t)},e}(),Fe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ue=function(e){function t(t,n){var r=e.call(this,(function(e,n){ee.debug("No callbacks on "+t+" for "+e)}))||this;return r.name=t,r.pusher=n,r.subscribed=!1,r.subscriptionPending=!1,r.subscriptionCancelled=!1,r}return Fe(t,e),t.prototype.authorize=function(e,t){return t(null,{auth:""})},t.prototype.trigger=function(e,t){if(0!==e.indexOf("client-"))throw new d("Event '"+e+"' does not start with 'client-'");if(!this.subscribed){var n=h("triggeringClientEvents");ee.warn("Client event triggered before channel 'subscription_succeeded' event . "+n)}return this.pusher.send_event(e,t,this.name)},t.prototype.disconnect=function(){this.subscribed=!1,this.subscriptionPending=!1},t.prototype.handleEvent=function(e){var t=e.event,n=e.data;"pusher_internal:subscription_succeeded"===t?this.handleSubscriptionSucceededEvent(e):"pusher_internal:subscription_count"===t?this.handleSubscriptionCountEvent(e):0!==t.indexOf("pusher_internal:")&&this.emit(t,n,{})},t.prototype.handleSubscriptionSucceededEvent=function(e){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",e.data)},t.prototype.handleSubscriptionCountEvent=function(e){e.data.subscription_count&&(this.subscriptionCount=e.data.subscription_count),this.emit("pusher:subscription_count",e.data)},t.prototype.subscribe=function(){var e=this;this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,(function(t,n){t?(e.subscriptionPending=!1,ee.error(t.toString()),e.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:t.message},t instanceof _?{status:t.status}:{}))):e.pusher.send_event("pusher:subscribe",{auth:n.auth,channel_data:n.channel_data,channel:e.name})})))},t.prototype.unsubscribe=function(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})},t.prototype.cancelSubscription=function(){this.subscriptionCancelled=!0},t.prototype.reinstateSubscription=function(){this.subscriptionCancelled=!1},t}(fe),je=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ze=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return je(t,e),t.prototype.authorize=function(e,t){return this.pusher.config.channelAuthorizer({channelName:this.name,socketId:e},t)},t}(Ue),Ve=Ze,qe=function(){function e(){this.reset()}return e.prototype.get=function(e){return Object.prototype.hasOwnProperty.call(this.members,e)?{id:e,info:this.members[e]}:null},e.prototype.each=function(e){var t=this;B(this.members,(function(n,r){e(t.get(r))}))},e.prototype.setMyID=function(e){this.myID=e},e.prototype.onSubscription=function(e){this.members=e.presence.hash,this.count=e.presence.count,this.me=this.get(this.myID)},e.prototype.addMember=function(e){return null===this.get(e.user_id)&&this.count++,this.members[e.user_id]=e.user_info,this.get(e.user_id)},e.prototype.removeMember=function(e){var t=this.get(e.user_id);return t&&(delete this.members[e.user_id],this.count--),t},e.prototype.reset=function(){this.members={},this.count=0,this.myID=null,this.me=null},e}(),Be=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ze=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(t){a(t)}}function s(e){try{u(r.throw(e))}catch(t){a(t)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(o,s)}u((r=r.apply(e,t||[])).next())}))},We=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(s){a=[6,s],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},He=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.members=new qe,r}return Be(t,e),t.prototype.authorize=function(t,n){var r=this;e.prototype.authorize.call(this,t,(function(e,t){return ze(r,void 0,void 0,(function(){var r,i;return We(this,(function(a){switch(a.label){case 0:return e?[3,3]:null==t.channel_data?[3,1]:(r=JSON.parse(t.channel_data),this.members.setMyID(r.user_id),[3,3]);case 1:return[4,this.pusher.user.signinDonePromise];case 2:if(a.sent(),null==this.pusher.user.user_data)return i=h("authorizationEndpoint"),ee.error("Invalid auth response for channel '"+this.name+"', expected 'channel_data' field. "+i+", or the user should be signed in."),n("Invalid auth response"),[2];this.members.setMyID(this.pusher.user.user_data.id),a.label=3;case 3:return n(e,t),[2]}}))}))}))},t.prototype.handleEvent=function(e){var t=e.event;if(0===t.indexOf("pusher_internal:"))this.handleInternalEvent(e);else{var n=e.data,r={};e.user_id&&(r.user_id=e.user_id),this.emit(t,n,r)}},t.prototype.handleInternalEvent=function(e){var t=e.event,n=e.data;switch(t){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(e);break;case"pusher_internal:subscription_count":this.handleSubscriptionCountEvent(e);break;case"pusher_internal:member_added":var r=this.members.addMember(n);this.emit("pusher:member_added",r);break;case"pusher_internal:member_removed":var i=this.members.removeMember(n);i&&this.emit("pusher:member_removed",i)}},t.prototype.handleSubscriptionSucceededEvent=function(e){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(e.data),this.emit("pusher:subscription_succeeded",this.members))},t.prototype.disconnect=function(){this.members.reset(),e.prototype.disconnect.call(this)},t}(Ve),Ke=n(1),Ge=n(0),Qe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ye=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return i.key=null,i.nacl=r,i}return Qe(t,e),t.prototype.authorize=function(t,n){var r=this;e.prototype.authorize.call(this,t,(function(e,t){if(e)n(e,t);else{var i=t.shared_secret;i?(r.key=Object(Ge.decode)(i),delete t.shared_secret,n(null,t)):n(new Error("No shared_secret key in auth payload for encrypted channel: "+r.name),null)}}))},t.prototype.trigger=function(e,t){throw new g("Client events are not currently supported for encrypted channels")},t.prototype.handleEvent=function(t){var n=t.event,r=t.data;0!==n.indexOf("pusher_internal:")&&0!==n.indexOf("pusher:")?this.handleEncryptedEvent(n,r):e.prototype.handleEvent.call(this,t)},t.prototype.handleEncryptedEvent=function(e,t){var n=this;if(this.key)if(t.ciphertext&&t.nonce){var r=Object(Ge.decode)(t.ciphertext);if(r.length<this.nacl.secretbox.overheadLength)ee.error("Expected encrypted event ciphertext length to be "+this.nacl.secretbox.overheadLength+", got: "+r.length);else{var i=Object(Ge.decode)(t.nonce);if(i.length<this.nacl.secretbox.nonceLength)ee.error("Expected encrypted event nonce length to be "+this.nacl.secretbox.nonceLength+", got: "+i.length);else{var a=this.nacl.secretbox.open(r,i,this.key);if(null===a)return ee.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),void this.authorize(this.pusher.connection.socket_id,(function(t,o){t?ee.error("Failed to make a request to the authEndpoint: "+o+". Unable to fetch new key, so dropping encrypted event"):null!==(a=n.nacl.secretbox.open(r,i,n.key))?n.emit(e,n.getDataToEmit(a)):ee.error("Failed to decrypt event with new key. Dropping encrypted event")}));this.emit(e,this.getDataToEmit(a))}}}else ee.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+t);else ee.debug("Received encrypted event before key has been retrieved from the authEndpoint")},t.prototype.getDataToEmit=function(e){var t=Object(Ke.decode)(e);try{return JSON.parse(t)}catch(n){return t}},t}(Ve),$e=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Xe=function(e){function t(t,n){var r=e.call(this)||this;r.state="initialized",r.connection=null,r.key=t,r.options=n,r.timeline=r.options.timeline,r.usingTLS=r.options.useTLS,r.errorCallbacks=r.buildErrorCallbacks(),r.connectionCallbacks=r.buildConnectionCallbacks(r.errorCallbacks),r.handshakeCallbacks=r.buildHandshakeCallbacks(r.errorCallbacks);var i=Rt.getNetwork();return i.bind("online",(function(){r.timeline.info({netinfo:"online"}),"connecting"!==r.state&&"unavailable"!==r.state||r.retryIn(0)})),i.bind("offline",(function(){r.timeline.info({netinfo:"offline"}),r.connection&&r.sendActivityCheck()})),r.updateStrategy(),r}return $e(t,e),t.prototype.connect=function(){this.connection||this.runner||(this.strategy.isSupported()?(this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()):this.updateState("failed"))},t.prototype.send=function(e){return!!this.connection&&this.connection.send(e)},t.prototype.send_event=function(e,t,n){return!!this.connection&&this.connection.send_event(e,t,n)},t.prototype.disconnect=function(){this.disconnectInternally(),this.updateState("disconnected")},t.prototype.isUsingTLS=function(){return this.usingTLS},t.prototype.startConnecting=function(){var e=this;this.runner=this.strategy.connect(0,(function t(n,r){n?e.runner=e.strategy.connect(0,t):"error"===r.action?(e.emit("error",{type:"HandshakeError",error:r.error}),e.timeline.error({handshakeError:r.error})):(e.abortConnecting(),e.handshakeCallbacks[r.action](r))}))},t.prototype.abortConnecting=function(){this.runner&&(this.runner.abort(),this.runner=null)},t.prototype.disconnectInternally=function(){this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection&&this.abandonConnection().close()},t.prototype.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})},t.prototype.retryIn=function(e){var t=this;this.timeline.info({action:"retry",delay:e}),e>0&&this.emit("connecting_in",Math.round(e/1e3)),this.retryTimer=new M(e||0,(function(){t.disconnectInternally(),t.connect()}))},t.prototype.clearRetryTimer=function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)},t.prototype.setUnavailableTimer=function(){var e=this;this.unavailableTimer=new M(this.options.unavailableTimeout,(function(){e.updateState("unavailable")}))},t.prototype.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},t.prototype.sendActivityCheck=function(){var e=this;this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new M(this.options.pongTimeout,(function(){e.timeline.error({pong_timed_out:e.options.pongTimeout}),e.retryIn(0)}))},t.prototype.resetActivityCheck=function(){var e=this;this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new M(this.activityTimeout,(function(){e.sendActivityCheck()})))},t.prototype.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},t.prototype.buildConnectionCallbacks=function(e){var t=this;return Z({},e,{message:function(e){t.resetActivityCheck(),t.emit("message",e)},ping:function(){t.send_event("pusher:pong",{})},activity:function(){t.resetActivityCheck()},error:function(e){t.emit("error",e)},closed:function(){t.abandonConnection(),t.shouldRetry()&&t.retryIn(1e3)}})},t.prototype.buildHandshakeCallbacks=function(e){var t=this;return Z({},e,{connected:function(e){t.activityTimeout=Math.min(t.options.activityTimeout,e.activityTimeout,e.connection.activityTimeout||1/0),t.clearUnavailableTimer(),t.setConnection(e.connection),t.socket_id=t.connection.id,t.updateState("connected",{socket_id:t.socket_id})}})},t.prototype.buildErrorCallbacks=function(){var e=this,t=function(t){return function(n){n.error&&e.emit("error",{type:"WebSocketError",error:n.error}),t(n)}};return{tls_only:t((function(){e.usingTLS=!0,e.updateStrategy(),e.retryIn(0)})),refused:t((function(){e.disconnect()})),backoff:t((function(){e.retryIn(1e3)})),retry:t((function(){e.retryIn(0)}))}},t.prototype.setConnection=function(e){for(var t in this.connection=e,this.connectionCallbacks)this.connection.bind(t,this.connectionCallbacks[t]);this.resetActivityCheck()},t.prototype.abandonConnection=function(){if(this.connection){for(var e in this.stopActivityCheck(),this.connectionCallbacks)this.connection.unbind(e,this.connectionCallbacks[e]);var t=this.connection;return this.connection=null,t}},t.prototype.updateState=function(e,t){var n=this.state;if(this.state=e,n!==e){var r=e;"connected"===r&&(r+=" with new socket ID "+t.socket_id),ee.debug("State changed",n+" -> "+r),this.timeline.info({state:e,params:t}),this.emit("state_change",{previous:n,current:e}),this.emit(e,t)}},t.prototype.shouldRetry=function(){return"connecting"===this.state||"connected"===this.state},t}(fe),Je=function(){function e(){this.channels={}}return e.prototype.add=function(e,t){return this.channels[e]||(this.channels[e]=function(e,t){if(0===e.indexOf("private-encrypted-")){if(t.config.nacl)return tt.createEncryptedChannel(e,t,t.config.nacl);var n="Tried to subscribe to a private-encrypted- channel but no nacl implementation available",r=h("encryptedChannelSupport");throw new g(n+". "+r)}if(0===e.indexOf("private-"))return tt.createPrivateChannel(e,t);if(0===e.indexOf("presence-"))return tt.createPresenceChannel(e,t);if(0===e.indexOf("#"))throw new p('Cannot create a channel with name "'+e+'".');return tt.createChannel(e,t)}(e,t)),this.channels[e]},e.prototype.all=function(){return function(e){var t=[];return B(e,(function(e){t.push(e)})),t}(this.channels)},e.prototype.find=function(e){return this.channels[e]},e.prototype.remove=function(e){var t=this.channels[e];return delete this.channels[e],t},e.prototype.disconnect=function(){B(this.channels,(function(e){e.disconnect()}))},e}(),et=Je,tt={createChannels:function(){return new et},createConnectionManager:function(e,t){return new Xe(e,t)},createChannel:function(e,t){return new Ue(e,t)},createPrivateChannel:function(e,t){return new Ve(e,t)},createPresenceChannel:function(e,t){return new He(e,t)},createEncryptedChannel:function(e,t,n){return new Ye(e,t,n)},createTimelineSender:function(e,t){return new Me(e,t)},createHandshake:function(e,t){return new Le(e,t)},createAssistantToTheTransportManager:function(e,t,n){return new Ne(e,t,n)}},nt=function(){function e(e){this.options=e||{},this.livesLeft=this.options.lives||1/0}return e.prototype.getAssistant=function(e){return tt.createAssistantToTheTransportManager(this,e,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},e.prototype.isAlive=function(){return this.livesLeft>0},e.prototype.reportDeath=function(){this.livesLeft-=1},e}(),rt=function(){function e(e,t){this.strategies=e,this.loop=Boolean(t.loop),this.failFast=Boolean(t.failFast),this.timeout=t.timeout,this.timeoutLimit=t.timeoutLimit}return e.prototype.isSupported=function(){return Q(this.strategies,j.method("isSupported"))},e.prototype.connect=function(e,t){var n=this,r=this.strategies,i=0,a=this.timeout,o=null;return o=this.tryStrategy(r[i],e,{timeout:a,failFast:this.failFast},(function s(u,c){c?t(null,c):(i+=1,n.loop&&(i%=r.length),i<r.length?(a&&(a*=2,n.timeoutLimit&&(a=Math.min(a,n.timeoutLimit))),o=n.tryStrategy(r[i],e,{timeout:a,failFast:n.failFast},s)):t(!0))})),{abort:function(){o.abort()},forceMinPriority:function(t){e=t,o&&o.forceMinPriority(t)}}},e.prototype.tryStrategy=function(e,t,n,r){var i=null,a=null;return n.timeout>0&&(i=new M(n.timeout,(function(){a.abort(),r(!0)}))),a=e.connect(t,(function(e,t){e&&i&&i.isRunning()&&!n.failFast||(i&&i.ensureAborted(),r(e,t))})),{abort:function(){i&&i.ensureAborted(),a.abort()},forceMinPriority:function(e){a.forceMinPriority(e)}}},e}(),it=function(){function e(e){this.strategies=e}return e.prototype.isSupported=function(){return Q(this.strategies,j.method("isSupported"))},e.prototype.connect=function(e,t){return function(e,t,n){var r=H(e,(function(e,r,i,a){return e.connect(t,n(r,a))}));return{abort:function(){W(r,at)},forceMinPriority:function(e){W(r,(function(t){t.forceMinPriority(e)}))}}}(this.strategies,e,(function(e,n){return function(r,i){n[e].error=r,r?function(e){return function(e,t){for(var n=0;n<e.length;n++)if(!t(e[n],n,e))return!1;return!0}(e,(function(e){return Boolean(e.error)}))}(n)&&t(!0):(W(n,(function(e){e.forceMinPriority(i.transport.priority)})),t(null,i))}}))},e}();function at(e){e.error||e.aborted||(e.abort(),e.aborted=!0)}var ot=function(){function e(e,t,n){this.strategy=e,this.transports=t,this.ttl=n.ttl||18e5,this.usingTLS=n.useTLS,this.timeline=n.timeline}return e.prototype.isSupported=function(){return this.strategy.isSupported()},e.prototype.connect=function(e,t){var n=this.usingTLS,r=function(e){var t=Rt.getLocalStorage();if(t)try{var n=t[ut(e)];if(n)return JSON.parse(n)}catch(r){ct(e)}return null}(n),i=[this.strategy];if(r&&r.timestamp+this.ttl>=j.now()){var a=this.transports[r.transport];a&&(this.timeline.info({cached:!0,transport:r.transport,latency:r.latency}),i.push(new rt([a],{timeout:2*r.latency+1e3,failFast:!0})))}var o=j.now(),s=i.pop().connect(e,(function r(a,u){a?(ct(n),i.length>0?(o=j.now(),s=i.pop().connect(e,r)):t(a)):(function(e,t,n){var r=Rt.getLocalStorage();if(r)try{r[ut(e)]=X({timestamp:j.now(),transport:t,latency:n})}catch(i){}}(n,u.transport.name,j.now()-o),t(null,u))}));return{abort:function(){s.abort()},forceMinPriority:function(t){e=t,s&&s.forceMinPriority(t)}}},e}(),st=ot;function ut(e){return"pusherTransport"+(e?"TLS":"NonTLS")}function ct(e){var t=Rt.getLocalStorage();if(t)try{delete t[ut(e)]}catch(n){}}var lt=function(){function e(e,t){var n=t.delay;this.strategy=e,this.options={delay:n}}return e.prototype.isSupported=function(){return this.strategy.isSupported()},e.prototype.connect=function(e,t){var n,r=this.strategy,i=new M(this.options.delay,(function(){n=r.connect(e,t)}));return{abort:function(){i.ensureAborted(),n&&n.abort()},forceMinPriority:function(t){e=t,n&&n.forceMinPriority(t)}}},e}(),ht=function(){function e(e,t,n){this.test=e,this.trueBranch=t,this.falseBranch=n}return e.prototype.isSupported=function(){return(this.test()?this.trueBranch:this.falseBranch).isSupported()},e.prototype.connect=function(e,t){return(this.test()?this.trueBranch:this.falseBranch).connect(e,t)},e}(),ft=function(){function e(e){this.strategy=e}return e.prototype.isSupported=function(){return this.strategy.isSupported()},e.prototype.connect=function(e,t){var n=this.strategy.connect(e,(function(e,r){r&&n.abort(),t(e,r)}));return n},e}();function dt(e){return function(){return e.isSupported()}}var pt,vt=function(e,t,n){var r={};function i(t,i,a,o,s){var u=n(e,t,i,a,o,s);return r[t]=u,u}var a,o=Object.assign({},t,{hostNonTLS:e.wsHost+":"+e.wsPort,hostTLS:e.wsHost+":"+e.wssPort,httpPath:e.wsPath}),s=Object.assign({},o,{useTLS:!0}),u=Object.assign({},t,{hostNonTLS:e.httpHost+":"+e.httpPort,hostTLS:e.httpHost+":"+e.httpsPort,httpPath:e.httpPath}),c={loop:!0,timeout:15e3,timeoutLimit:6e4},l=new nt({lives:2,minPingDelay:1e4,maxPingDelay:e.activityTimeout}),h=new nt({lives:2,minPingDelay:1e4,maxPingDelay:e.activityTimeout}),f=i("ws","ws",3,o,l),d=i("wss","ws",3,s,l),p=i("sockjs","sockjs",1,u),v=i("xhr_streaming","xhr_streaming",1,u,h),y=i("xdr_streaming","xdr_streaming",1,u,h),m=i("xhr_polling","xhr_polling",1,u),g=i("xdr_polling","xdr_polling",1,u),k=new rt([f],c),b=new rt([d],c),_=new rt([p],c),w=new rt([new ht(dt(v),v,y)],c),x=new rt([new ht(dt(m),m,g)],c),S=new rt([new ht(dt(w),new it([w,new lt(x,{delay:4e3})]),x)],c),T=new ht(dt(S),S,_);return a=t.useTLS?new it([k,new lt(T,{delay:2e3})]):new it([k,new lt(b,{delay:2e3}),new lt(T,{delay:5e3})]),new st(new ft(new ht(dt(f),a,T)),r,{ttl:18e5,timeline:t.timeline,useTLS:t.useTLS})},yt={getRequest:function(e){var t=new window.XDomainRequest;return t.ontimeout=function(){e.emit("error",new v),e.close()},t.onerror=function(t){e.emit("error",t),e.close()},t.onprogress=function(){t.responseText&&t.responseText.length>0&&e.onChunk(200,t.responseText)},t.onload=function(){t.responseText&&t.responseText.length>0&&e.onChunk(200,t.responseText),e.emit("finished",200),e.close()},t},abortRequest:function(e){e.ontimeout=e.onerror=e.onprogress=e.onload=null,e.abort()}},mt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gt=function(e){function t(t,n,r){var i=e.call(this)||this;return i.hooks=t,i.method=n,i.url=r,i}return mt(t,e),t.prototype.start=function(e){var t=this;this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=function(){t.close()},Rt.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(e)},t.prototype.close=function(){this.unloader&&(Rt.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)},t.prototype.onChunk=function(e,t){for(;;){var n=this.advanceBuffer(t);if(!n)break;this.emit("chunk",{status:e,data:n})}this.isBufferTooLong(t)&&this.emit("buffer_too_long")},t.prototype.advanceBuffer=function(e){var t=e.slice(this.position),n=t.indexOf("\n");return-1!==n?(this.position+=n+1,t.slice(0,n)):null},t.prototype.isBufferTooLong=function(e){return this.position===e.length&&e.length>262144},t}(fe);!function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSED=3]="CLOSED"}(pt||(pt={}));var kt=pt,bt=1;function _t(e){var t=-1===e.indexOf("?")?"?":"&";return e+t+"t="+ +new Date+"&n="+bt++}function wt(e){return Math.floor(Math.random()*e)}var xt,St=function(){function e(e,t){this.hooks=e,this.session=wt(1e3)+"/"+function(e){for(var t=[],n=0;n<e;n++)t.push(wt(32).toString(32));return t.join("")}(8),this.location=function(e){var t=/([^\?]*)\/*(\??.*)/.exec(e);return{base:t[1],queryString:t[2]}}(t),this.readyState=kt.CONNECTING,this.openStream()}return e.prototype.send=function(e){return this.sendRaw(JSON.stringify([e]))},e.prototype.ping=function(){this.hooks.sendHeartbeat(this)},e.prototype.close=function(e,t){this.onClose(e,t,!0)},e.prototype.sendRaw=function(e){if(this.readyState!==kt.OPEN)return!1;try{return Rt.createSocketRequest("POST",_t((t=this.location,n=this.session,t.base+"/"+n+"/xhr_send"))).start(e),!0}catch(r){return!1}var t,n},e.prototype.reconnect=function(){this.closeStream(),this.openStream()},e.prototype.onClose=function(e,t,n){this.closeStream(),this.readyState=kt.CLOSED,this.onclose&&this.onclose({code:e,reason:t,wasClean:n})},e.prototype.onChunk=function(e){var t;if(200===e.status)switch(this.readyState===kt.OPEN&&this.onActivity(),e.data.slice(0,1)){case"o":t=JSON.parse(e.data.slice(1)||"{}"),this.onOpen(t);break;case"a":t=JSON.parse(e.data.slice(1)||"[]");for(var n=0;n<t.length;n++)this.onEvent(t[n]);break;case"m":t=JSON.parse(e.data.slice(1)||"null"),this.onEvent(t);break;case"h":this.hooks.onHeartbeat(this);break;case"c":t=JSON.parse(e.data.slice(1)||"[]"),this.onClose(t[0],t[1],!0)}},e.prototype.onOpen=function(e){this.readyState===kt.CONNECTING?(e&&e.hostname&&(this.location.base=function(e,t){var n=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(e);return n[1]+t+n[3]}(this.location.base,e.hostname)),this.readyState=kt.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)},e.prototype.onEvent=function(e){this.readyState===kt.OPEN&&this.onmessage&&this.onmessage({data:e})},e.prototype.onActivity=function(){this.onactivity&&this.onactivity()},e.prototype.onError=function(e){this.onerror&&this.onerror(e)},e.prototype.openStream=function(){var e=this;this.stream=Rt.createSocketRequest("POST",_t(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",(function(t){e.onChunk(t)})),this.stream.bind("finished",(function(t){e.hooks.onFinished(e,t)})),this.stream.bind("buffer_too_long",(function(){e.reconnect()}));try{this.stream.start()}catch(t){j.defer((function(){e.onError(t),e.onClose(1006,"Could not start streaming",!1)}))}},e.prototype.closeStream=function(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)},e}(),Tt={getReceiveURL:function(e,t){return e.base+"/"+t+"/xhr_streaming"+e.queryString},onHeartbeat:function(e){e.sendRaw("[]")},sendHeartbeat:function(e){e.sendRaw("[]")},onFinished:function(e,t){e.onClose(1006,"Connection interrupted ("+t+")",!1)}},It={getReceiveURL:function(e,t){return e.base+"/"+t+"/xhr"+e.queryString},onHeartbeat:function(){},sendHeartbeat:function(e){e.sendRaw("[]")},onFinished:function(e,t){200===t?e.reconnect():e.onClose(1006,"Connection interrupted ("+t+")",!1)}},Et={getRequest:function(e){var t=new(Rt.getXHRAPI());return t.onreadystatechange=t.onprogress=function(){switch(t.readyState){case 3:t.responseText&&t.responseText.length>0&&e.onChunk(t.status,t.responseText);break;case 4:t.responseText&&t.responseText.length>0&&e.onChunk(t.status,t.responseText),e.emit("finished",t.status),e.close()}},t},abortRequest:function(e){e.onreadystatechange=null,e.abort()}},Ct={createStreamingSocket:function(e){return this.createSocket(Tt,e)},createPollingSocket:function(e){return this.createSocket(It,e)},createSocket:function(e,t){return new St(e,t)},createXHR:function(e,t){return this.createRequest(Et,e,t)},createRequest:function(e,t,n){return new gt(e,t,n)},createXDR:function(e,t){return this.createRequest(yt,e,t)}},Rt={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:a,DependenciesReceivers:u,getDefaultStrategy:vt,Transports:Ee,transportConnectionInitializer:function(){var e=this;e.timeline.info(e.buildTimelineMessage({transport:e.name+(e.options.useTLS?"s":"")})),e.hooks.isInitialized()?e.changeState("initialized"):e.hooks.file?(e.changeState("initializing"),c.load(e.hooks.file,{useTLS:e.options.useTLS},(function(t,n){e.hooks.isInitialized()?(e.changeState("initialized"),n(!0)):(t&&e.onError(t),e.onClose(),n(!1))}))):e.onClose()},HTTPFactory:Ct,TimelineTransport:ie,getXHRAPI:function(){return window.XMLHttpRequest},getWebSocketAPI:function(){return window.WebSocket||window.MozWebSocket},setup:function(e){var t=this;window.Pusher=e;var n=function(){t.onDocumentBody(e.ready)};window.JSON?n():c.load("json2",{},n)},getDocument:function(){return document},getProtocol:function(){return this.getDocument().location.protocol},getAuthorizers:function(){return{ajax:w,jsonp:te}},onDocumentBody:function(e){var t=this;document.body?e():setTimeout((function(){t.onDocumentBody(e)}),0)},createJSONPRequest:function(e,t){return new re(e,t)},createScriptRequest:function(e){return new ne(e)},getLocalStorage:function(){try{return window.localStorage}catch(e){return}},createXHR:function(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest:function(){return new(this.getXHRAPI())},createMicrosoftXHR:function(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork:function(){return Re},createWebSocket:function(e){return new(this.getWebSocketAPI())(e)},createSocketRequest:function(e,t){if(this.isXHRSupported())return this.HTTPFactory.createXHR(e,t);if(this.isXDRSupported(0===t.indexOf("https:")))return this.HTTPFactory.createXDR(e,t);throw"Cross-origin HTTP requests are not supported"},isXHRSupported:function(){var e=this.getXHRAPI();return Boolean(e)&&void 0!==(new e).withCredentials},isXDRSupported:function(e){var t=e?"https:":"http:",n=this.getProtocol();return Boolean(window.XDomainRequest)&&n===t},addUnloadListener:function(e){void 0!==window.addEventListener?window.addEventListener("unload",e,!1):void 0!==window.attachEvent&&window.attachEvent("onunload",e)},removeUnloadListener:function(e){void 0!==window.addEventListener?window.removeEventListener("unload",e,!1):void 0!==window.detachEvent&&window.detachEvent("onunload",e)}};!function(e){e[e.ERROR=3]="ERROR",e[e.INFO=6]="INFO",e[e.DEBUG=7]="DEBUG"}(xt||(xt={}));var Nt=xt,Pt=function(){function e(e,t,n){this.key=e,this.session=t,this.events=[],this.options=n||{},this.sent=0,this.uniqueID=0}return e.prototype.log=function(e,t){e<=this.options.level&&(this.events.push(Z({},t,{timestamp:j.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())},e.prototype.error=function(e){this.log(Nt.ERROR,e)},e.prototype.info=function(e){this.log(Nt.INFO,e)},e.prototype.debug=function(e){this.log(Nt.DEBUG,e)},e.prototype.isEmpty=function(){return 0===this.events.length},e.prototype.send=function(e,t){var n=this,r=Z({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],e(r,(function(e,r){e||n.sent++,t&&t(e,r)})),!0},e.prototype.generateUniqueID=function(){return this.uniqueID++,this.uniqueID},e}(),At=function(){function e(e,t,n,r){this.name=e,this.priority=t,this.transport=n,this.options=r||{}}return e.prototype.isSupported=function(){return this.transport.isSupported({useTLS:this.options.useTLS})},e.prototype.connect=function(e,t){var n=this;if(!this.isSupported())return Ot(new b,t);if(this.priority<e)return Ot(new y,t);var r=!1,i=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),a=null,o=function e(){i.unbind("initialized",e),i.connect()},s=function(){a=tt.createHandshake(i,(function(e){r=!0,l(),t(null,e)}))},u=function(e){l(),t(e)},c=function(){var e;l(),e=X(i),t(new m(e))},l=function(){i.unbind("initialized",o),i.unbind("open",s),i.unbind("error",u),i.unbind("closed",c)};return i.bind("initialized",o),i.bind("open",s),i.bind("error",u),i.bind("closed",c),i.initialize(),{abort:function(){r||(l(),a?a.close():i.close())},forceMinPriority:function(e){r||n.priority<e&&(a?a.close():i.close())}}},e}();function Ot(e,t){return j.defer((function(){t(e)})),{abort:function(){},forceMinPriority:function(){}}}var Dt=Rt.Transports,Lt=function(e,t,n,r,i,a){var o,s=Dt[n];if(!s)throw new k(n);return e.enabledTransports&&-1===q(e.enabledTransports,t)||e.disabledTransports&&-1!==q(e.disabledTransports,t)?o=Mt:(i=Object.assign({ignoreNullOrigin:e.ignoreNullOrigin},i),o=new At(t,r,a?a.getAssistant(s):s,i)),o},Mt={isSupported:function(){return!1},connect:function(e,t){var n=j.defer((function(){t(new b)}));return{abort:function(){n.ensureAborted()},forceMinPriority:function(){}}}},Ft=function(e){if("undefined"===typeof Rt.getAuthorizers()[e.transport])throw"'"+e.transport+"' is not a recognized auth transport";return function(t,n){var i=function(e,t){var n="socket_id="+encodeURIComponent(e.socketId);for(var r in t.params)n+="&"+encodeURIComponent(r)+"="+encodeURIComponent(t.params[r]);return n}(t,e);Rt.getAuthorizers()[e.transport](Rt,i,e,r.UserAuthentication,n)}},Ut=function(e){if("undefined"===typeof Rt.getAuthorizers()[e.transport])throw"'"+e.transport+"' is not a recognized auth transport";return function(t,n){var i=function(e,t){var n="socket_id="+encodeURIComponent(e.socketId);for(var r in n+="&channel_name="+encodeURIComponent(e.channelName),t.params)n+="&"+encodeURIComponent(r)+"="+encodeURIComponent(t.params[r]);return n}(t,e);Rt.getAuthorizers()[e.transport](Rt,i,e,r.ChannelAuthorization,n)}},jt=function(){return jt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},jt.apply(this,arguments)};function Zt(e){return e.httpHost?e.httpHost:e.cluster?"sockjs-"+e.cluster+".pusher.com":o.httpHost}function Vt(e){return e.wsHost?e.wsHost:e.cluster?qt(e.cluster):qt(o.cluster)}function qt(e){return"ws-"+e+".pusher.com"}function Bt(e){return"https:"===Rt.getProtocol()||!1!==e.forceTLS}function zt(e){return"enableStats"in e?e.enableStats:"disableStats"in e&&!e.disableStats}function Wt(e){var t=jt({},o.userAuthentication,e.userAuthentication);return"customHandler"in t&&null!=t.customHandler?t.customHandler:Ft(t)}function Ht(e,t){var n=function(e,t){var n;return"channelAuthorization"in e?n=jt({},o.channelAuthorization,e.channelAuthorization):(n={transport:e.authTransport||o.authTransport,endpoint:e.authEndpoint||o.authEndpoint},"auth"in e&&("params"in e.auth&&(n.params=e.auth.params),"headers"in e.auth&&(n.headers=e.auth.headers)),"authorizer"in e&&(n.customHandler=function(e,t,n){var r={authTransport:t.transport,authEndpoint:t.endpoint,auth:{params:t.params,headers:t.headers}};return function(t,i){var a=e.channel(t.channelName);n(a,r).authorize(t.socketId,i)}}(t,n,e.authorizer))),n}(e,t);return"customHandler"in n&&null!=n.customHandler?n.customHandler:Ut(n)}var Kt=function(){var e,t;return{promise:new Promise((function(n,r){e=n,t=r})),resolve:e,reject:t}},Gt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qt=function(e){function t(t){var n=e.call(this,(function(e,t){ee.debug("No callbacks on user for "+e)}))||this;return n.signin_requested=!1,n.user_data=null,n.serverToUserChannel=null,n.signinDonePromise=null,n._signinDoneResolve=null,n._onAuthorize=function(e,t){if(e)return ee.warn("Error during signin: "+e),void n._cleanup();n.pusher.send_event("pusher:signin",{auth:t.auth,user_data:t.user_data})},n.pusher=t,n.pusher.connection.bind("state_change",(function(e){var t=e.previous,r=e.current;"connected"!==t&&"connected"===r&&n._signin(),"connected"===t&&"connected"!==r&&(n._cleanup(),n._newSigninPromiseIfNeeded())})),n.pusher.connection.bind("message",(function(e){"pusher:signin_success"===e.event&&n._onSigninSuccess(e.data),n.serverToUserChannel&&n.serverToUserChannel.name===e.channel&&n.serverToUserChannel.handleEvent(e)})),n}return Gt(t,e),t.prototype.signin=function(){this.signin_requested||(this.signin_requested=!0,this._signin())},t.prototype._signin=function(){this.signin_requested&&(this._newSigninPromiseIfNeeded(),"connected"===this.pusher.connection.state&&this.pusher.config.userAuthenticator({socketId:this.pusher.connection.socket_id},this._onAuthorize))},t.prototype._onSigninSuccess=function(e){try{this.user_data=JSON.parse(e.user_data)}catch(t){return ee.error("Failed parsing user data after signin: "+e.user_data),void this._cleanup()}if("string"!==typeof this.user_data.id||""===this.user_data.id)return ee.error("user_data doesn't contain an id. user_data: "+this.user_data),void this._cleanup();this._signinDoneResolve(),this._subscribeChannels()},t.prototype._subscribeChannels=function(){var e,t=this;this.serverToUserChannel=new Ue("#server-to-user-"+this.user_data.id,this.pusher),this.serverToUserChannel.bind_global((function(e,n){0!==e.indexOf("pusher_internal:")&&0!==e.indexOf("pusher:")&&t.emit(e,n)})),(e=this.serverToUserChannel).subscriptionPending&&e.subscriptionCancelled?e.reinstateSubscription():e.subscriptionPending||"connected"!==t.pusher.connection.state||e.subscribe()},t.prototype._cleanup=function(){this.user_data=null,this.serverToUserChannel&&(this.serverToUserChannel.unbind_all(),this.serverToUserChannel.disconnect(),this.serverToUserChannel=null),this.signin_requested&&this._signinDoneResolve()},t.prototype._newSigninPromiseIfNeeded=function(){if(this.signin_requested&&(!this.signinDonePromise||this.signinDonePromise.done)){var e=Kt(),t=e.promise,n=e.resolve;e.reject,t.done=!1;var r=function(){t.done=!0};t.then(r).catch(r),this.signinDonePromise=t,this._signinDoneResolve=n}},t}(fe),Yt=function(){function e(t,n){var r=this;if(function(e){if(null===e||void 0===e)throw"You must pass your app key when you instantiate Pusher."}(t),!(n=n||{}).cluster&&!n.wsHost&&!n.httpHost){var i=h("javascriptQuickStart");ee.warn("You should always specify a cluster when connecting. "+i)}"disableStats"in n&&ee.warn("The disableStats option is deprecated in favor of enableStats"),this.key=t,this.config=function(e,t){var n={activityTimeout:e.activityTimeout||o.activityTimeout,cluster:e.cluster||o.cluster,httpPath:e.httpPath||o.httpPath,httpPort:e.httpPort||o.httpPort,httpsPort:e.httpsPort||o.httpsPort,pongTimeout:e.pongTimeout||o.pongTimeout,statsHost:e.statsHost||o.stats_host,unavailableTimeout:e.unavailableTimeout||o.unavailableTimeout,wsPath:e.wsPath||o.wsPath,wsPort:e.wsPort||o.wsPort,wssPort:e.wssPort||o.wssPort,enableStats:zt(e),httpHost:Zt(e),useTLS:Bt(e),wsHost:Vt(e),userAuthenticator:Wt(e),channelAuthorizer:Ht(e,t)};return"disabledTransports"in e&&(n.disabledTransports=e.disabledTransports),"enabledTransports"in e&&(n.enabledTransports=e.enabledTransports),"ignoreNullOrigin"in e&&(n.ignoreNullOrigin=e.ignoreNullOrigin),"timelineParams"in e&&(n.timelineParams=e.timelineParams),"nacl"in e&&(n.nacl=e.nacl),n}(n,this),this.channels=tt.createChannels(),this.global_emitter=new fe,this.sessionID=Math.floor(1e9*Math.random()),this.timeline=new Pt(this.key,this.sessionID,{cluster:this.config.cluster,features:e.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:Nt.INFO,version:o.VERSION}),this.config.enableStats&&(this.timelineSender=tt.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+Rt.TimelineTransport.name})),this.connection=tt.createConnectionManager(this.key,{getStrategy:function(e){return Rt.getDefaultStrategy(r.config,e,Lt)},timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:Boolean(this.config.useTLS)}),this.connection.bind("connected",(function(){r.subscribeAll(),r.timelineSender&&r.timelineSender.send(r.connection.isUsingTLS())})),this.connection.bind("message",(function(e){var t=0===e.event.indexOf("pusher_internal:");if(e.channel){var n=r.channel(e.channel);n&&n.handleEvent(e)}t||r.global_emitter.emit(e.event,e.data)})),this.connection.bind("connecting",(function(){r.channels.disconnect()})),this.connection.bind("disconnected",(function(){r.channels.disconnect()})),this.connection.bind("error",(function(e){ee.warn(e)})),e.instances.push(this),this.timeline.info({instances:e.instances.length}),this.user=new Qt(this),e.isReady&&this.connect()}return e.ready=function(){e.isReady=!0;for(var t=0,n=e.instances.length;t<n;t++)e.instances[t].connect()},e.getClientFeatures=function(){return z(G({ws:Rt.Transports.ws},(function(e){return e.isSupported({})})))},e.prototype.channel=function(e){return this.channels.find(e)},e.prototype.allChannels=function(){return this.channels.all()},e.prototype.connect=function(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var e=this.connection.isUsingTLS(),t=this.timelineSender;this.timelineSenderTimer=new F(6e4,(function(){t.send(e)}))}},e.prototype.disconnect=function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)},e.prototype.bind=function(e,t,n){return this.global_emitter.bind(e,t,n),this},e.prototype.unbind=function(e,t,n){return this.global_emitter.unbind(e,t,n),this},e.prototype.bind_global=function(e){return this.global_emitter.bind_global(e),this},e.prototype.unbind_global=function(e){return this.global_emitter.unbind_global(e),this},e.prototype.unbind_all=function(e){return this.global_emitter.unbind_all(),this},e.prototype.subscribeAll=function(){var e;for(e in this.channels.channels)this.channels.channels.hasOwnProperty(e)&&this.subscribe(e)},e.prototype.subscribe=function(e){var t=this.channels.add(e,this);return t.subscriptionPending&&t.subscriptionCancelled?t.reinstateSubscription():t.subscriptionPending||"connected"!==this.connection.state||t.subscribe(),t},e.prototype.unsubscribe=function(e){var t=this.channels.find(e);t&&t.subscriptionPending?t.cancelSubscription():(t=this.channels.remove(e))&&t.subscribed&&t.unsubscribe()},e.prototype.send_event=function(e,t,n){return this.connection.send_event(e,t,n)},e.prototype.shouldUseTLS=function(){return this.config.useTLS},e.prototype.signin=function(){this.user.signin()},e.instances=[],e.isReady=!1,e.logToConsole=!1,e.Runtime=Rt,e.ScriptReceivers=Rt.ScriptReceivers,e.DependenciesReceivers=Rt.DependenciesReceivers,e.auth_callbacks=Rt.auth_callbacks,e}(),$t=t.default=Yt;Rt.setup(Yt)}])},e.exports=t()},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(d,e)&&(f.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),w=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function Z(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var u="\n"+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function V(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=Z(e.type,!1);case 11:return e=Z(e.type.render,!1);case 1:return e=Z(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case w:return"Portal";case T:return"Profiler";case S:return"StrictMode";case R:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function z(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=z(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){$(e,t);var n=z(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,z(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+z(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:z(n)}}function ae(e,t){var n=z(t.value),r=z(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,he=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,xe=null,Se=null;function Te(e){if(e=ki(e)){if("function"!==typeof we)throw Error(a(280));var t=e.stateNode;t&&(t=_i(t),we(e.stateNode,e.type,t))}}function Ie(e){xe?Se?Se.push(e):Se=[e]:xe=e}function Ee(){if(xe){var e=xe,t=Se;if(Se=xe=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Ce(e,t){return e(t)}function Re(){}var Ne=!1;function Pe(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ce(e,t,n)}finally{Ne=!1,(null!==xe||null!==Se)&&(Re(),Ee())}}function Ae(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(l)try{var De={};Object.defineProperty(De,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(le){Oe=!1}function Le(e,t,n,r,i,a,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,je=null,Ze={onError:function(e){Me=!0,Fe=e}};function Ve(e,t,n,r,i,a,o,s,u){Me=!1,Fe=null,Le.apply(Ze,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function ze(e){if(qe(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return ze(i),e;if(o===r)return ze(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Ge=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Ye=i.unstable_requestPaint,$e=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Je=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var ct=64,lt=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ht(s):0!==(a&=o)&&(r=ht(a))}else 0!==(o=n&~i)?r=ht(o):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,wt,xt,St,Tt,It=!1,Et=[],Ct=null,Rt=null,Nt=null,Pt=new Map,At=new Map,Ot=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Rt=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":At.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void Tt(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function jt(e,t,n){Ut(e)&&n.delete(t)}function Zt(){It=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==Rt&&Ut(Rt)&&(Rt=null),null!==Nt&&Ut(Nt)&&(Nt=null),Pt.forEach(jt),At.forEach(jt)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,It||(It=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Zt)))}function qt(e){function t(t){return Vt(t,e)}if(0<Et.length){Vt(Et[0],e);for(var n=1;n<Et.length;n++){var r=Et[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Vt(Ct,e),null!==Rt&&Vt(Rt,e),null!==Nt&&Vt(Nt,e),Pt.forEach(t),At.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ft(n),null===n.blockedOn&&Ot.shift()}var Bt=b.ReactCurrentBatchConfig,zt=!0;function Wt(e,t,n,r){var i=kt,a=Bt.transition;Bt.transition=null;try{kt=1,Kt(e,t,n,r)}finally{kt=i,Bt.transition=a}}function Ht(e,t,n,r){var i=kt,a=Bt.transition;Bt.transition=null;try{kt=4,Kt(e,t,n,r)}finally{kt=i,Bt.transition=a}}function Kt(e,t,n,r){if(zt){var i=Qt(e,t,n,r);if(null===i)zr(e,t,r,Gt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Rt=Mt(Rt,e,t,n,r,i),!0;case"mouseover":return Nt=Mt(Nt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,At.set(a,Mt(At.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&_t(a),null===(a=Qt(e,t,n,r))&&zr(e,t,r,Gt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else zr(e,t,r,null,n)}}var Gt=null;function Qt(e,t,n,r){if(Gt=null,null!==(e=gi(e=_e(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Xt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Xt,r=n.length,i="value"in $t?$t.value:$t.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Jt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),hn=F({},cn,{view:0,detail:0}),fn=an(hn),dn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),yn=an(F({},hn,{relatedTarget:0})),mn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function Tn(){return Sn}var In=F({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=an(In),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=an(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),Nn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=an(Pn),On=[9,13,27,32],Dn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!Dn||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),jn=!1;function Zn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ie(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Kn=null;function Gn(e){Ur(e,0)}function Qn(e){if(K(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var $n=!1;if(l){var Xn;if(l){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"===typeof er.oninput}Xn=Jn}else Xn=!1;$n=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Kn=Hn=null)}function nr(e){if("value"===e.propertyName&&Qn(Kn)){var t=[];Wn(t,Kn,e,_e(e)),Pe(Gn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Kn)}function ar(e,t){if("click"===e)return Qn(t)}function or(e,t){if("input"===e||"change"===e)return Qn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==G(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&ur(gr,r)||(gr=r,0<(r=Hr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},xr={},Sr={};function Tr(e){if(xr[e])return xr[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return xr[e]=n[t];return e}l&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Ir=Tr("animationend"),Er=Tr("animationiteration"),Cr=Tr("animationstart"),Rr=Tr("transitionend"),Nr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){Nr.set(e,t),u(t,[e])}for(var Or=0;Or<Pr.length;Or++){var Dr=Pr[Or];Ar(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Ar(Ir,"onAnimationEnd"),Ar(Er,"onAnimationIteration"),Ar(Cr,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(Rr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,c){if(Ve.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,je=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Fr(i,s,c),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Fr(i,s,c),a=u}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(Br(t,e,2,!1),n.add(r))}function Zr(e,t,n){var r=0;t&&(r|=4),Br(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[Vr]){e[Vr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Zr(t,!1,e),Zr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,Zr("selectionchange",!1,t))}}function Br(e,t,n,r){switch(Yt(t)){case 1:var i=Wt;break;case 4:i=Ht;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function zr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=gi(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}Pe((function(){var r=a,i=_e(n),o=[];e:{var s=Nr.get(e);if(void 0!==s){var u=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=En;break;case"focusin":c="focus",u=yn;break;case"focusout":c="blur",u=yn;break;case"beforeblur":case"afterblur":u=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Rn;break;case Ir:case Er:case Cr:u=mn;break;case Rr:u=Nn;break;case"scroll":u=fn;break;case"wheel":u=An;break;case"copy":case"cut":case"paste":u=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Cn}var l=0!==(4&t),h=!l&&"scroll"===e,f=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=Ae(p,f))&&l.push(Wr(p,v,d)))),h)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(h=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=pn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==u?s:bi(u),d=null==c?s:bi(c),(s=new l(v,p+"leave",u,n,i)).target=h,s.relatedTarget=d,v=null,gi(i)===r&&((l=new l(f,p+"enter",c,n,i)).target=d,l.relatedTarget=h,v=l),h=v,u&&c)e:{for(f=c,p=0,d=l=u;d;d=Kr(d))p++;for(d=0,v=f;v;v=Kr(v))d++;for(;0<p-d;)l=Kr(l),p--;for(;0<d-p;)f=Kr(f),d--;for(;p--;){if(l===f||null!==f&&l===f.alternate)break e;l=Kr(l),f=Kr(f)}l=null}else l=null;null!==u&&Gr(o,s,u,l,!1),null!==c&&null!==h&&Gr(o,h,c,l,!0)}if("select"===(u=(s=r?bi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var y=Yn;else if(zn(s))if($n)y=or;else{y=ir;var m=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(y=ar);switch(y&&(y=y(e,r))?Wn(o,y,n,i):(m&&m(e,s,r),"focusout"===e&&(m=s._wrapperState)&&m.controlled&&"number"===s.type&&ee(s,"number",s.value)),m=r?bi(r):window,e){case"focusin":(zn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(Dn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else qn?Zn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==k?"onCompositionEnd"===k&&qn&&(g=en()):(Xt="value"in($t=i)?$t.value:$t.textContent,qn=!0)),0<(m=Hr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=Vn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(jn=!0,Un);case"textInput":return(e=t.data)===Un&&jn?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!Dn&&Zn(e,t)?(e=en(),Jt=Xt=$t=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ae(e,n))&&r.unshift(Wr(e,a,i)),null!=(a=Ae(e,t))&&r.push(Wr(e,a,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=Ae(n,a))&&o.unshift(Wr(n,u,s)):i||null!=(u=Ae(n,a))&&o.push(Wr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Yr,"")}function Xr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(a(425))}function Jr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),fi="__reactFiber$"+hi,di="__reactProps$"+hi,pi="__reactContainer$"+hi,vi="__reactEvents$"+hi,yi="__reactListeners$"+hi,mi="__reactHandles$"+hi;function gi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[fi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[fi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function _i(e){return e[di]||null}var wi=[],xi=-1;function Si(e){return{current:e}}function Ti(e){0>xi||(e.current=wi[xi],wi[xi]=null,xi--)}function Ii(e,t){xi++,wi[xi]=e.current,e.current=t}var Ei={},Ci=Si(Ei),Ri=Si(!1),Ni=Ei;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ei;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ai(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Ti(Ri),Ti(Ci)}function Di(e,t,n){if(Ci.current!==Ei)throw Error(a(168));Ii(Ci,t),Ii(Ri,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,B(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ei,Ni=Ci.current,Ii(Ci,e),Ii(Ri,Ri.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ti(Ri),Ti(Ci),Ii(Ci,e)):Ti(Ri),Ii(Ri,n)}var Ui=null,ji=!1,Zi=!1;function Vi(e){null===Ui?Ui=[e]:Ui.push(e)}function qi(){if(!Zi&&null!==Ui){Zi=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,ji=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ke(Je,qi),i}finally{kt=t,Zi=!1}}return null}var Bi=[],zi=0,Wi=null,Hi=0,Ki=[],Gi=0,Qi=null,Yi=1,$i="";function Xi(e,t){Bi[zi++]=Hi,Bi[zi++]=Wi,Wi=e,Hi=t}function Ji(e,t,n){Ki[Gi++]=Yi,Ki[Gi++]=$i,Ki[Gi++]=Qi,Qi=e;var r=Yi;e=$i;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,$i=a+e}else Yi=1<<a|n<<i|r,$i=e}function ea(e){null!==e.return&&(Xi(e,1),Ji(e,1,0))}function ta(e){for(;e===Wi;)Wi=Bi[--zi],Bi[zi]=null,Hi=Bi[--zi],Bi[zi]=null;for(;e===Qi;)Qi=Ki[--Gi],Ki[Gi]=null,$i=Ki[--Gi],Ki[Gi]=null,Yi=Ki[--Gi],Ki[Gi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qi?{id:Yi,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function ua(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(ua(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(ua(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ha(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(ua(e))throw fa(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function fa(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=Si(null),ga=null,ka=null,ba=null;function _a(){ba=ka=ga=null}function wa(e){var t=ma.current;Ti(ma),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Sa(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Ta(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ia=null;function Ea(e){null===Ia?Ia=[e]:Ia.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ea(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ra(e,r)}function Ra(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Na=!1;function Pa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Aa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Da(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ra(e,n)}return null===(i=r.interleaved)?(t.next=t,Ea(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ra(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Na=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,c=u.next;u.next=null,null===o?a=c:o.next=c,o=u;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===s?l.firstBaseUpdate=c:s.next=c,l.lastBaseUpdate=u))}if(null!==a){var h=i.baseState;for(o=0,l=c=u=null,s=a;;){var f=s.lane,d=s.eventTime;if((r&f)===f){null!==l&&(l=l.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(f=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=v.payload)?p.call(d,h,f):p)||void 0===f)break e;h=F({},h,f);break e;case 2:Na=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[s]:f.push(s))}else d={eventTime:d,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(c=l=d,u=h):l=l.next=d,o|=f;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===l&&(u=h),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Mu|=o,e.lanes=o,e.memoizedState=h}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var ja=(new r.Component).refs;function Za(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Va={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Oa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Oa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Oa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Da(e,i,r))&&(nc(t,e,r,n),La(t,e,r))}};function qa(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,a))}function Ba(e,t,n){var r=!1,i=Ei,a=t.contextType;return"object"===typeof a&&null!==a?a=Ta(a):(i=Ai(t)?Ni:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ei),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Va,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function za(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Va.enqueueReplaceState(t,t.state,null)}function Wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ja,Pa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ta(a):(a=Ai(t)?Ni:Ci.current,i.context=Pi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Za(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Va.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ha(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===ja&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ka(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ga(e){return(0,e._init)(e._payload)}function Qa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===A&&Ga(a)===t.type)?((r=i(t,n.props)).ref=Ha(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=Ha(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=Ha(e,null,t),n.return=e,n;case w:return(t=Uc(t,e.mode,n)).return=e,t;case A:return f(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Ka(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?c(e,t,n,r):null;case w:return n.key===i?l(e,t,n,r):null;case A:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Ka(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case w:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case A:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Ka(t,r)}return null}function v(i,a,s,u){for(var c=null,l=null,h=a,v=a=0,y=null;null!==h&&v<s.length;v++){h.index>v?(y=h,h=null):y=h.sibling;var m=d(i,h,s[v],u);if(null===m){null===h&&(h=y);break}e&&h&&null===m.alternate&&t(i,h),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,h=y}if(v===s.length)return n(i,h),ia&&Xi(i,v),c;if(null===h){for(;v<s.length;v++)null!==(h=f(i,s[v],u))&&(a=o(h,a,v),null===l?c=h:l.sibling=h,l=h);return ia&&Xi(i,v),c}for(h=r(i,h);v<s.length;v++)null!==(y=p(h,i,v,s[v],u))&&(e&&null!==y.alternate&&h.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&h.forEach((function(e){return t(i,e)})),ia&&Xi(i,v),c}function y(i,s,u,c){var l=L(u);if("function"!==typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var h=l=null,v=s,y=s=0,m=null,g=u.next();null!==v&&!g.done;y++,g=u.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),s=o(k,s,y),null===h?l=k:h.sibling=k,h=k,v=m}if(g.done)return n(i,v),ia&&Xi(i,y),l;if(null===v){for(;!g.done;y++,g=u.next())null!==(g=f(i,g.value,c))&&(s=o(g,s,y),null===h?l=g:h.sibling=g,h=g);return ia&&Xi(i,y),l}for(v=r(i,v);!g.done;y++,g=u.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),s=o(g,s,y),null===h?l=g:h.sibling=g,h=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Xi(i,y),l}return function e(r,a,o,u){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===A&&Ga(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ha(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Lc(o.props.children,r.mode,u,o.key)).return=r,r=a):((u=Dc(o.type,o.key,o.props,null,r.mode,u)).ref=Ha(r,a,o),u.return=r,r=u)}return s(r);case w:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,u)).return=r,r=a}return s(r);case A:return e(r,a,(l=o._init)(o._payload),u)}if(te(o))return v(r,a,o,u);if(L(o))return y(r,a,o,u);Ka(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fc(o,r.mode,u)).return=r,r=a),s(r)):n(r,a)}}var Ya=Qa(!0),$a=Qa(!1),Xa={},Ja=Si(Xa),eo=Si(Xa),to=Si(Xa);function no(e){if(e===Xa)throw Error(a(174));return e}function ro(e,t){switch(Ii(to,t),Ii(eo,e),Ii(Ja,Xa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti(Ja),Ii(Ja,t)}function io(){Ti(Ja),Ti(eo),Ti(to)}function ao(e){no(to.current);var t=no(Ja.current),n=ue(t,e.type);t!==n&&(Ii(eo,e),Ii(Ja,n))}function oo(e){eo.current===e&&(Ti(Ja),Ti(eo))}var so=Si(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=b.ReactCurrentDispatcher,fo=b.ReactCurrentBatchConfig,po=0,vo=null,yo=null,mo=null,go=!1,ko=!1,bo=0,_o=0;function wo(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function So(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?ss:us,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,mo=yo=null,t.updateQueue=null,ho.current=cs,e=n(r,i)}while(ko)}if(ho.current=os,t=null!==yo&&null!==yo.next,po=0,mo=yo=vo=null,go=!1,t)throw Error(a(300));return e}function To(){var e=0!==bo;return bo=0,e}function Io(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?vo.memoizedState=mo=e:mo=mo.next=e,mo}function Eo(){if(null===yo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===mo?vo.memoizedState:mo.next;if(null!==t)mo=t,yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===mo?vo.memoizedState=mo=e:mo=mo.next=e}return mo}function Co(e,t){return"function"===typeof t?t(e):t}function Ro(e){var t=Eo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var u=s=null,c=null,l=o;do{var h=l.lane;if((po&h)===h)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:h,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(u=c=f,s=r):c=c.next=f,vo.lanes|=h,Mu|=h}l=l.next}while(null!==l&&l!==o);null===c?s=r:c.next=u,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Mu|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=Eo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(bs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Po(){}function Ao(e,t){var n=vo,r=Eo(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,bs=!0),r=r.queue,zo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,jo(9,Do.bind(null,n,r,i,t),void 0,null),null===Ru)throw Error(a(349));0!==(30&po)||Oo(n,t,i)}return i}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Fo(e){var t=Ra(e,1);null!==t&&nc(t,e,1,-1)}function Uo(e){var t=Io();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,vo,e),[t.memoizedState,e]}function jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Zo(){return Eo().memoizedState}function Vo(e,t,n,r){var i=Io();vo.flags|=e,i.memoizedState=jo(1|t,n,void 0,void 0===r?null:r)}function qo(e,t,n,r){var i=Eo();r=void 0===r?null:r;var a=void 0;if(null!==yo){var o=yo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=jo(t,n,a,r))}vo.flags|=e,i.memoizedState=jo(1|t,n,a,r)}function Bo(e,t){return Vo(8390656,8,e,t)}function zo(e,t){return qo(2048,8,e,t)}function Wo(e,t){return qo(4,2,e,t)}function Ho(e,t){return qo(4,4,e,t)}function Ko(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Go(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qo(4,4,Ko.bind(null,t,e),n)}function Qo(){}function Yo(e,t){var n=Eo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $o(e,t){var n=Eo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),vo.lanes|=n,Mu|=n,e.baseState=!0),t)}function Jo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{kt=n,fo.transition=r}}function es(){return Eo().memoizedState}function ts(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Ca(e,t,n,r))){nc(n,e,r,ec()),as(n,t,r)}}function ns(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var u=t.interleaved;return null===u?(i.next=i,Ea(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(nc(n,e,r,i=ec()),as(n,t,r))}}function rs(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function is(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var os={readContext:Ta,useCallback:wo,useContext:wo,useEffect:wo,useImperativeHandle:wo,useInsertionEffect:wo,useLayoutEffect:wo,useMemo:wo,useReducer:wo,useRef:wo,useState:wo,useDebugValue:wo,useDeferredValue:wo,useTransition:wo,useMutableSource:wo,useSyncExternalStore:wo,useId:wo,unstable_isNewReconciler:!1},ss={readContext:Ta,useCallback:function(e,t){return Io().memoizedState=[e,void 0===t?null:t],e},useContext:Ta,useEffect:Bo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Vo(4194308,4,Ko.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vo(4,2,e,t)},useMemo:function(e,t){var n=Io();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Io();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Io().memoizedState=e},useState:Uo,useDebugValue:Qo,useDeferredValue:function(e){return Io().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Jo.bind(null,e[1]),Io().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Io();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ru)throw Error(a(349));0!==(30&po)||Oo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Bo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,jo(9,Do.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Io(),t=Ru.identifierPrefix;if(ia){var n=$i;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=_o++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Ta,useCallback:Yo,useContext:Ta,useEffect:zo,useImperativeHandle:Go,useInsertionEffect:Wo,useLayoutEffect:Ho,useMemo:$o,useReducer:Ro,useRef:Zo,useState:function(){return Ro(Co)},useDebugValue:Qo,useDeferredValue:function(e){return Xo(Eo(),yo.memoizedState,e)},useTransition:function(){return[Ro(Co)[0],Eo().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ao,useId:es,unstable_isNewReconciler:!1},cs={readContext:Ta,useCallback:Yo,useContext:Ta,useEffect:zo,useImperativeHandle:Go,useInsertionEffect:Wo,useLayoutEffect:Ho,useMemo:$o,useReducer:No,useRef:Zo,useState:function(){return No(Co)},useDebugValue:Qo,useDeferredValue:function(e){var t=Eo();return null===yo?t.memoizedState=e:Xo(t,yo.memoizedState,e)},useTransition:function(){return[No(Co)[0],Eo().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ao,useId:es,unstable_isNewReconciler:!1};function ls(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function hs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Oa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){zu||(zu=!0,Wu=r),fs(0,t)},n}function vs(e,t,n){(n=Oa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fs(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){fs(0,t),"function"!==typeof r&&(null===Hu?Hu=new Set([this]):Hu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ys(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tc.bind(null,e,t,n),t.then(e,e))}function ms(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oa(-1,1)).tag=2,Da(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ks=b.ReactCurrentOwner,bs=!1;function _s(e,t,n,r){t.child=null===e?$a(t,null,n,r):Ya(t,e.child,n,r)}function ws(e,t,n,r,i){n=n.render;var a=t.ref;return Sa(t,i),r=So(e,t,n,r,a,i),n=To(),null===e||bs?(ia&&n&&ea(t),t.flags|=1,_s(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,zs(e,t,i))}function xs(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Ac(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ss(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return zs(e,t,i)}return t.flags|=1,(e=Oc(a,r)).ref=t.ref,e.return=t,t.child=e}function Ss(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(ur(a,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,zs(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return Es(e,t,n,r,i)}function Ts(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ii(Ou,Au),Au|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ii(Ou,Au),Au|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ii(Ou,Au),Au|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ii(Ou,Au),Au|=r;return _s(e,t,i,n),t.child}function Is(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Es(e,t,n,r,i){var a=Ai(n)?Ni:Ci.current;return a=Pi(t,a),Sa(t,i),n=So(e,t,n,r,a,i),r=To(),null===e||bs?(ia&&r&&ea(t),t.flags|=1,_s(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,zs(e,t,i))}function Cs(e,t,n,r,i){if(Ai(n)){var a=!0;Mi(t)}else a=!1;if(Sa(t,i),null===t.stateNode)Bs(e,t),Ba(t,n,r),Wa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ta(c):c=Pi(t,c=Ai(n)?Ni:Ci.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&za(t,o,r,c),Na=!1;var f=t.memoizedState;o.state=f,Fa(t,r,o,i),u=t.memoizedState,s!==r||f!==u||Ri.current||Na?("function"===typeof l&&(Za(t,n,l,r),u=t.memoizedState),(s=Na||qa(t,n,s,r,f,u,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Aa(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ya(t.type,s),o.props=c,h=t.pendingProps,f=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=Ta(u):u=Pi(t,u=Ai(n)?Ni:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||f!==u)&&za(t,o,r,u),Na=!1,f=t.memoizedState,o.state=f,Fa(t,r,o,i);var p=t.memoizedState;s!==h||f!==p||Ri.current||Na?("function"===typeof d&&(Za(t,n,d,r),p=t.memoizedState),(c=Na||qa(t,n,c,r,f,p,u)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Rs(e,t,n,r,a,i)}function Rs(e,t,n,r,i,a){Is(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),zs(e,t,a);r=t.stateNode,ks.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ya(t,e.child,null,a),t.child=Ya(t,null,s,a)):_s(e,t,s,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Ns(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),ro(e,t.containerInfo)}function Ps(e,t,n,r,i){return da(),pa(i),t.flags|=256,_s(e,t,n,r),t.child}var As,Os,Ds,Ls={dehydrated:null,treeContext:null,retryLane:0};function Ms(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fs(e,t,n){var r,i=t.pendingProps,o=so.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ii(so,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Mc(u,i,0,null),e=Lc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ms(n),t.memoizedState=Ls,e):Us(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,js(e,t,s,r=hs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ya(t,e.child,null,s),t.child.memoizedState=Ms(s),t.memoizedState=Ls,o);if(0===(1&t.mode))return js(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,js(e,t,s,r=hs(o=Error(a(419)),r,void 0))}if(u=0!==(s&e.childLanes),bs||u){if(null!==(r=Ru)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ra(e,i),nc(r,e,i,-1))}return vc(),js(e,t,s,r=hs(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ec.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Ki[Gi++]=Yi,Ki[Gi++]=$i,Ki[Gi++]=Qi,Yi=e.id,$i=e.overflow,Qi=t),(t=Us(t,r.children)).flags|=4096,t)}(e,t,u,i,r,o,n);if(s){s=i.fallback,u=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Oc(r,s):(s=Lc(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=null===(u=e.child.memoizedState)?Ms(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ls,i}return e=(s=e.child).sibling,i=Oc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Us(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function js(e,t,n,r){return null!==r&&pa(r),Ya(t,e.child,null,n),(e=Us(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Zs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function Vs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(_s(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Zs(e,n,t);else if(19===e.tag)Zs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ii(so,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Vs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===uo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Vs(t,!0,n,null,a);break;case"together":Vs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function zs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Mu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ws(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ks(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hs(t),null;case 1:case 17:return Ai(t.type)&&Oi(),Hs(t),null;case 3:return r=t.stateNode,io(),Ti(Ri),Ti(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),Hs(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Os(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Hs(t),null}if(e=no(Ja.current),ha(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":Y(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var u in ge(n,o),i=null,o)if(o.hasOwnProperty(u)){var c=o[u];"children"===u?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(u)&&null!=c&&"onScroll"===u&&jr("scroll",r)}switch(n){case"input":H(r),J(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Jr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[fi]=t,e[di]=r,As(e,t),t.stateNode=e;e:{switch(u=ke(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":Y(e,r),i=Q(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&he(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&fe(e,l):"number"===typeof l&&fe(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=l&&"onScroll"===o&&jr("scroll",e):null!=l&&k(e,o,l,u))}switch(n){case"input":H(e),J(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+z(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hs(t),null;case 6:if(e&&null!=t.stateNode)Ds(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Ja.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Hs(t),null;case 13:if(Ti(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))fa(),da(),t.flags|=98560,o=!1;else if(o=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[fi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hs(t),o=!1}else null!==aa&&(oc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Du&&(Du=3):vc())),null!==t.updateQueue&&(t.flags|=4),Hs(t),null);case 4:return io(),null===e&&qr(t.stateNode.containerInfo),Hs(t),null;case 10:return wa(t.type._context),Hs(t),null;case 19:if(Ti(so),null===(o=t.memoizedState))return Hs(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)Ws(o,!1);else{if(0!==Du||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=uo(e))){for(t.flags|=128,Ws(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ii(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>qu&&(t.flags|=128,r=!0,Ws(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ws(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!ia)return Hs(t),null}else 2*$e()-o.renderingStartTime>qu&&1073741824!==n&&(t.flags|=128,r=!0,Ws(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=so.current,Ii(so,r?1&n|2:1&n),t):(Hs(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Au)&&(Hs(t),6&t.subtreeFlags&&(t.flags|=8192)):Hs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Gs(e,t){switch(ta(t),t.tag){case 1:return Ai(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ti(Ri),Ti(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ti(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(so),null;case 4:return io(),null;case 10:return wa(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}As=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Os=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Ja.current);var a,o=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var u=i[l];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(u=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==u&&(null!=c||null!=u))if("style"===l)if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&jr("scroll",e),o||u===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ds=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qs=!1,Ys=!1,$s="function"===typeof WeakSet?WeakSet:Set,Xs=null;function Js(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function eu(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var tu=!1;function nu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&eu(t,n,a)}i=i.next}while(i!==r)}}function ru(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function iu(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function au(e){var t=e.alternate;null!==t&&(e.alternate=null,au(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[di],delete t[vi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ou(e){return 5===e.tag||3===e.tag||4===e.tag}function su(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ou(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function uu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(uu(e,t,n),e=e.sibling;null!==e;)uu(e,t,n),e=e.sibling}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}var lu=null,hu=!1;function fu(e,t,n){for(n=n.child;null!==n;)du(e,t,n),n=n.sibling}function du(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Ys||Js(n,t);case 6:var r=lu,i=hu;lu=null,fu(e,t,n),hu=i,null!==(lu=r)&&(hu?(e=lu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):lu.removeChild(n.stateNode));break;case 18:null!==lu&&(hu?(e=lu,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),qt(e)):ui(lu,n.stateNode));break;case 4:r=lu,i=hu,lu=n.stateNode.containerInfo,hu=!0,fu(e,t,n),lu=r,hu=i;break;case 0:case 11:case 14:case 15:if(!Ys&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&eu(n,t,o),i=i.next}while(i!==r)}fu(e,t,n);break;case 1:if(!Ys&&(Js(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Sc(n,t,s)}fu(e,t,n);break;case 21:fu(e,t,n);break;case 22:1&n.mode?(Ys=(r=Ys)||null!==n.memoizedState,fu(e,t,n),Ys=r):fu(e,t,n);break;default:fu(e,t,n)}}function pu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $s),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:lu=u.stateNode,hu=!1;break e;case 3:case 4:lu=u.stateNode.containerInfo,hu=!0;break e}u=u.return}if(null===lu)throw Error(a(160));du(o,s,i),lu=null,hu=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Sc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yu(t,e),t=t.sibling}function yu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vu(t,e),mu(e),4&r){try{nu(3,e,e.return),ru(3,e)}catch(y){Sc(e,e.return,y)}try{nu(5,e,e.return)}catch(y){Sc(e,e.return,y)}}break;case 1:vu(t,e),mu(e),512&r&&null!==n&&Js(n,n.return);break;case 5:if(vu(t,e),mu(e),512&r&&null!==n&&Js(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(y){Sc(e,e.return,y)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===o.type&&null!=o.name&&$(i,o),ke(u,s);var l=ke(u,o);for(s=0;s<c.length;s+=2){var h=c[s],f=c[s+1];"style"===h?ye(i,f):"dangerouslySetInnerHTML"===h?he(i,f):"children"===h?fe(i,f):k(i,h,f,l)}switch(u){case"input":X(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(y){Sc(e,e.return,y)}}break;case 6:if(vu(t,e),mu(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){Sc(e,e.return,y)}}break;case 3:if(vu(t,e),mu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(y){Sc(e,e.return,y)}break;case 4:default:vu(t,e),mu(e);break;case 13:vu(t,e),mu(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Vu=$e())),4&r&&pu(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ys=(l=Ys)||h,vu(t,e),Ys=l):vu(t,e),mu(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!h&&0!==(1&e.mode))for(Xs=e,h=e.child;null!==h;){for(f=Xs=h;null!==Xs;){switch(p=(d=Xs).child,d.tag){case 0:case 11:case 14:case 15:nu(4,d,d.return);break;case 1:Js(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){Sc(r,n,y)}}break;case 5:Js(d,d.return);break;case 22:if(null!==d.memoizedState){_u(f);continue}}null!==p?(p.return=d,Xs=p):_u(f)}h=h.sibling}e:for(h=null,f=e;;){if(5===f.tag){if(null===h){h=f;try{i=f.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=f.stateNode,s=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,u.style.display=ve("display",s))}catch(y){Sc(e,e.return,y)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(y){Sc(e,e.return,y)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:vu(t,e),mu(e),4&r&&pu(e);case 21:}}function mu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ou(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),cu(e,su(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;uu(e,su(e),o);break;default:throw Error(a(161))}}catch(s){Sc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gu(e,t,n){Xs=e,ku(e,t,n)}function ku(e,t,n){for(var r=0!==(1&e.mode);null!==Xs;){var i=Xs,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Qs;if(!o){var s=i.alternate,u=null!==s&&null!==s.memoizedState||Ys;s=Qs;var c=Ys;if(Qs=o,(Ys=u)&&!c)for(Xs=i;null!==Xs;)u=(o=Xs).child,22===o.tag&&null!==o.memoizedState?wu(i):null!==u?(u.return=o,Xs=u):wu(i);for(;null!==a;)Xs=a,ku(a,t,n),a=a.sibling;Xs=i,Qs=s,Ys=c}bu(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Xs=a):bu(e)}}function bu(e){for(;null!==Xs;){var t=Xs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ys||ru(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ys)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var h=l.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&qt(f)}}}break;default:throw Error(a(163))}Ys||512&t.flags&&iu(t)}catch(d){Sc(t,t.return,d)}}if(t===e){Xs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xs=n;break}Xs=t.return}}function _u(e){for(;null!==Xs;){var t=Xs;if(t===e){Xs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xs=n;break}Xs=t.return}}function wu(e){for(;null!==Xs;){var t=Xs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ru(4,t)}catch(u){Sc(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){Sc(t,i,u)}}var a=t.return;try{iu(t)}catch(u){Sc(t,a,u)}break;case 5:var o=t.return;try{iu(t)}catch(u){Sc(t,o,u)}}}catch(u){Sc(t,t.return,u)}if(t===e){Xs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Xs=s;break}Xs=t.return}}var xu,Su=Math.ceil,Tu=b.ReactCurrentDispatcher,Iu=b.ReactCurrentOwner,Eu=b.ReactCurrentBatchConfig,Cu=0,Ru=null,Nu=null,Pu=0,Au=0,Ou=Si(0),Du=0,Lu=null,Mu=0,Fu=0,Uu=0,ju=null,Zu=null,Vu=0,qu=1/0,Bu=null,zu=!1,Wu=null,Hu=null,Ku=!1,Gu=null,Qu=0,Yu=0,$u=null,Xu=-1,Ju=0;function ec(){return 0!==(6&Cu)?$e():-1!==Xu?Xu:Xu=$e()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cu)&&0!==Pu?Pu&-Pu:null!==va.transition?(0===Ju&&(Ju=vt()),Ju):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nc(e,t,n,r){if(50<Yu)throw Yu=0,$u=null,Error(a(185));mt(e,n,r),0!==(2&Cu)&&e===Ru||(e===Ru&&(0===(2&Cu)&&(Fu|=n),4===Du&&sc(e,Pu)),rc(e,r),1===n&&0===Cu&&0===(1&t.mode)&&(qu=$e()+500,ji&&qi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,u=i[o];-1===u?0!==(s&n)&&0===(s&r)||(i[o]=dt(s,t)):u<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ft(e,e===Ru?Pu:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){ji=!0,Vi(e)}(uc.bind(null,e)):Vi(uc.bind(null,e)),oi((function(){0===(6&Cu)&&qi()})),n=null;else{switch(bt(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Rc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Xu=-1,Ju=0,0!==(6&Cu))throw Error(a(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var r=ft(e,e===Ru?Pu:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Cu;Cu|=2;var o=pc();for(Ru===e&&Pu===t||(Bu=null,qu=$e()+500,fc(e,t));;)try{gc();break}catch(u){dc(e,u)}_a(),Tu.current=o,Cu=i,null!==Nu?t=0:(Ru=null,Pu=0,t=Du)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ac(e,i))),1===t)throw n=Lu,fc(e,0),sc(e,r),rc(e,$e()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ac(e,o))),1===t))throw n=Lu,fc(e,0),sc(e,r),rc(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:_c(e,Zu,Bu);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=Vu+500-$e())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_c.bind(null,e,Zu,Bu),t);break}_c(e,Zu,Bu);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Su(r/1960))-r)){e.timeoutHandle=ri(_c.bind(null,e,Zu,Bu),r);break}_c(e,Zu,Bu);break;default:throw Error(a(329))}}}return rc(e,$e()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=ju;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Zu,Zu=n,null!==t&&oc(t)),e}function oc(e){null===Zu?Zu=e:Zu.push.apply(Zu,e)}function sc(e,t){for(t&=~Uu,t&=~Fu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function uc(e){if(0!==(6&Cu))throw Error(a(327));wc();var t=ft(e,0);if(0===(1&t))return rc(e,$e()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Lu,fc(e,0),sc(e,t),rc(e,$e()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,Zu,Bu),rc(e,$e()),null}function cc(e,t){var n=Cu;Cu|=1;try{return e(t)}finally{0===(Cu=n)&&(qu=$e()+500,ji&&qi())}}function lc(e){null!==Gu&&0===Gu.tag&&0===(6&Cu)&&wc();var t=Cu;Cu|=1;var n=Eu.transition,r=kt;try{if(Eu.transition=null,kt=1,e)return e()}finally{kt=r,Eu.transition=n,0===(6&(Cu=t))&&qi()}}function hc(){Au=Ou.current,Ti(Ou)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Nu)for(n=Nu.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:io(),Ti(Ri),Ti(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ti(so);break;case 10:wa(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Ru=e,Nu=e=Oc(e.current,null),Pu=Au=t,Du=0,Lu=null,Uu=Fu=Mu=0,Zu=ju=null,null!==Ia){for(t=0;t<Ia.length;t++)if(null!==(r=(n=Ia[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ia=null}return e}function dc(e,t){for(;;){var n=Nu;try{if(_a(),ho.current=os,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,mo=yo=vo=null,ko=!1,bo=0,Iu.current=null,null===n||null===n.return){Du=1,Lu=t,Nu=null;break}e:{var o=e,s=n.return,u=n,c=t;if(t=Pu,u.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,h=u,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ms(s);if(null!==p){p.flags&=-257,gs(p,s,u,0,t),1&p.mode&&ys(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){ys(o,l,t),vc();break e}c=Error(a(426))}else if(ia&&1&u.mode){var m=ms(s);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gs(m,s,u,0,t),pa(ls(c,u));break e}}o=c=ls(c,u),4!==Du&&(Du=2),null===ju?ju=[o]:ju.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,ps(0,c,t));break e;case 1:u=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Hu||!Hu.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vs(o,u,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(b){t=b,Nu===n&&null!==n&&(Nu=n=n.return);continue}break}}function pc(){var e=Tu.current;return Tu.current=os,null===e?os:e}function vc(){0!==Du&&3!==Du&&2!==Du||(Du=4),null===Ru||0===(268435455&Mu)&&0===(268435455&Fu)||sc(Ru,Pu)}function yc(e,t){var n=Cu;Cu|=2;var r=pc();for(Ru===e&&Pu===t||(Bu=null,fc(e,t));;)try{mc();break}catch(i){dc(e,i)}if(_a(),Cu=n,Tu.current=r,null!==Nu)throw Error(a(261));return Ru=null,Pu=0,Du}function mc(){for(;null!==Nu;)kc(Nu)}function gc(){for(;null!==Nu&&!Qe();)kc(Nu)}function kc(e){var t=xu(e.alternate,e,Au);e.memoizedProps=e.pendingProps,null===t?bc(e):Nu=t,Iu.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ks(n,t,Au)))return void(Nu=n)}else{if(null!==(n=Gs(n,t)))return n.flags&=32767,void(Nu=n);if(null===e)return Du=6,void(Nu=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Nu=t);Nu=t=e}while(null!==t);0===Du&&(Du=5)}function _c(e,t,n){var r=kt,i=Eu.transition;try{Eu.transition=null,kt=1,function(e,t,n,r){do{wc()}while(null!==Gu);if(0!==(6&Cu))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ru&&(Nu=Ru=null,Pu=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ku||(Ku=!0,Rc(tt,(function(){return wc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Eu.transition,Eu.transition=null;var s=kt;kt=1;var u=Cu;Cu|=4,Iu.current=null,function(e,t){if(ei=zt,dr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var s=0,u=-1,c=-1,l=0,h=0,f=e,d=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(u=s+i),f!==o||0!==r&&3!==f.nodeType||(c=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++l===i&&(u=s),d===o&&++h===r&&(c=s),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===u||-1===c?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},zt=!1,Xs=t;null!==Xs;)if(e=(t=Xs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xs=e;else for(;null!==Xs;){t=Xs;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ya(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(_){Sc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Xs=e;break}Xs=t.return}v=tu,tu=!1}(e,n),yu(n,e),pr(ti),zt=!!ei,ti=ei=null,e.current=n,gu(n,e,i),Ye(),Cu=u,kt=s,Eu.transition=o}else e.current=n;if(Ku&&(Ku=!1,Gu=e,Qu=i),0===(o=e.pendingLanes)&&(Hu=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(zu)throw zu=!1,e=Wu,Wu=null,e;0!==(1&Qu)&&0!==e.tag&&wc(),0!==(1&(o=e.pendingLanes))?e===$u?Yu++:(Yu=0,$u=e):Yu=0,qi()}(e,t,n,r)}finally{Eu.transition=i,kt=r}return null}function wc(){if(null!==Gu){var e=bt(Qu),t=Eu.transition,n=kt;try{if(Eu.transition=null,kt=16>e?16:e,null===Gu)var r=!1;else{if(e=Gu,Gu=null,Qu=0,0!==(6&Cu))throw Error(a(331));var i=Cu;for(Cu|=4,Xs=e.current;null!==Xs;){var o=Xs,s=o.child;if(0!==(16&Xs.flags)){var u=o.deletions;if(null!==u){for(var c=0;c<u.length;c++){var l=u[c];for(Xs=l;null!==Xs;){var h=Xs;switch(h.tag){case 0:case 11:case 15:nu(8,h,o)}var f=h.child;if(null!==f)f.return=h,Xs=f;else for(;null!==Xs;){var d=(h=Xs).sibling,p=h.return;if(au(h),h===l){Xs=null;break}if(null!==d){d.return=p,Xs=d;break}Xs=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Xs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Xs=s;else e:for(;null!==Xs;){if(0!==(2048&(o=Xs).flags))switch(o.tag){case 0:case 11:case 15:nu(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Xs=g;break e}Xs=o.return}}var k=e.current;for(Xs=k;null!==Xs;){var b=(s=Xs).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Xs=b;else e:for(s=k;null!==Xs;){if(0!==(2048&(u=Xs).flags))try{switch(u.tag){case 0:case 11:case 15:ru(9,u)}}catch(w){Sc(u,u.return,w)}if(u===s){Xs=null;break e}var _=u.sibling;if(null!==_){_.return=u.return,Xs=_;break e}Xs=u.return}}if(Cu=i,qi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(w){}r=!0}return r}finally{kt=n,Eu.transition=t}}return!1}function xc(e,t,n){e=Da(e,t=ps(0,t=ls(n,t),1),1),t=ec(),null!==e&&(mt(e,1,t),rc(e,t))}function Sc(e,t,n){if(3===e.tag)xc(e,e,n);else for(;null!==t;){if(3===t.tag){xc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hu||!Hu.has(r))){t=Da(t,e=vs(t,e=ls(n,e),1),1),e=ec(),null!==t&&(mt(t,1,e),rc(t,e));break}}t=t.return}}function Tc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Ru===e&&(Pu&n)===n&&(4===Du||3===Du&&(130023424&Pu)===Pu&&500>$e()-Vu?fc(e,0):Uu|=n),rc(e,t)}function Ic(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=ec();null!==(e=Ra(e,t))&&(mt(e,t,n),rc(e,n))}function Ec(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ic(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ic(e,n)}function Rc(e,t){return Ke(e,t)}function Nc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Nc(e,t,n,r)}function Ac(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Ac(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case x:return Lc(n.children,i,o,t);case S:s=8,i|=8;break;case T:return(e=Pc(12,n,t,2|i)).elementType=T,e.lanes=o,e;case R:return(e=Pc(13,n,t,i)).elementType=R,e.lanes=o,e;case N:return(e=Pc(19,n,t,i)).elementType=N,e.lanes=o,e;case O:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:s=10;break e;case E:s=9;break e;case C:s=11;break e;case P:s=14;break e;case A:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Pc(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Zc(e,t,n,r,i,a,o,s,u){return e=new jc(e,t,n,s,u),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Pc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pa(a),e}function Vc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function qc(e){if(!e)return Ei;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ai(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ai(n))return Li(e,n,t)}return t}function Bc(e,t,n,r,i,a,o,s,u){return(e=Zc(n,r,!0,e,0,a,0,s,u)).context=qc(null),n=e.current,(a=Oa(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Da(n,a,i),e.current.lanes=i,mt(e,i,r),rc(e,r),e}function zc(e,t,n,r){var i=t.current,a=ec(),o=tc(i);return n=qc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Da(i,t,o))&&(nc(e,i,o,a),La(e,i,o)),o}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}xu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ri.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:Ns(t),da();break;case 5:ao(t);break;case 1:Ai(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ii(ma,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ii(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fs(e,t,n):(Ii(so,1&so.current),null!==(e=zs(e,t,n))?e.sibling:null);Ii(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ii(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Ts(e,t,n)}return zs(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,ia&&0!==(1048576&t.flags)&&Ji(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Bs(e,t),e=t.pendingProps;var i=Pi(t,Ci.current);Sa(t,n),i=So(null,t,r,e,i,n);var o=To();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ai(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Pa(t),i.updater=Va,t.stateNode=i,i._reactInternals=t,Wa(t,r,e,n),t=Rs(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),_s(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Bs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Ac(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(r),e=ya(r,e),i){case 0:t=Es(null,t,r,e,n);break e;case 1:t=Cs(null,t,r,e,n);break e;case 11:t=ws(null,t,r,e,n);break e;case 14:t=xs(null,t,r,ya(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Es(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cs(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 3:e:{if(Ns(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Aa(e,t),Fa(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ps(e,t,r,n,i=ls(Error(a(423)),t));break e}if(r!==i){t=Ps(e,t,r,n,i=ls(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=$a(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=zs(e,t,n);break e}_s(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Is(e,t),_s(e,t,s,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fs(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ya(t,null,r,n):_s(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ws(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 7:return _s(e,t,t.pendingProps,n),t.child;case 8:case 12:return _s(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Ii(ma,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ri.current){t=zs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var c=u.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Oa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var h=(l=l.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),u.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),xa(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}_s(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Sa(t,n),r=r(i=Ta(i)),t.flags|=1,_s(e,t,r,n),t.child;case 14:return i=ya(r=t.type,t.pendingProps),xs(e,t,r,i=ya(r.type,i),n);case 15:return Ss(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ya(r,i),Bs(e,t),t.tag=1,Ai(r)?(e=!0,Mi(t)):e=!1,Sa(t,n),Ba(t,r,i),Wa(t,r,i,n),Rs(null,t,r,!0,e,n);case 19:return qs(e,t,n);case 22:return Ts(e,t,n)}throw Error(a(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Wc(o);s.call(e)}}zc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Wc(o);a.call(e)}}var o=Bc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=o,e[pi]=o.current,qr(8===e.nodeType?e.parentNode:e),lc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Wc(u);s.call(e)}}var u=Zc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=u,e[pi]=u.current,qr(8===e.nodeType?e.parentNode:e),lc((function(){zc(t,u,n,r)})),u}(n,t,e,i,r);return Wc(o)}Yc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));zc(e,t,null,null)},Yc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){zc(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(gt(t,1|n),rc(t,$e()),0===(6&Cu)&&(qu=$e()+500,qi()))}break;case 13:lc((function(){var t=Ra(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Kc(e,1)}},wt=function(e){if(13===e.tag){var t=Ra(e,134217728);if(null!==t)nc(t,e,134217728,ec());Kc(e,134217728)}},xt=function(e){if(13===e.tag){var t=tc(e),n=Ra(e,t);if(null!==n)nc(n,e,t,ec());Kc(e,t)}},St=function(){return kt},Tt=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},we=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(a(90));K(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Re=lc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,_i,Ie,Ee,cc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(a(200));return Vc(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(a(299));var n=!1,r="",i=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Zc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,qr(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,i,0,o,s),e[pi]=t.current,qr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(a(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:s.current}}t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var b=k.prototype=new g;b.constructor=k,v(b,m.prototype),b.isPureReactComponent=!0;var _=Array.isArray,w=Object.prototype.hasOwnProperty,x={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,i)&&!S.hasOwnProperty(i)&&(a[i]=t[i]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===a[i]&&(a[i]=u[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:x.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function R(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===a?"."+C(u,0):a,_(o)?(i="",null!=e&&(i=e.replace(E,"$&/")+"/"),R(o,t,i,"",(function(e){return e}))):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(u=0,a=""===a?".":a+":",_(e))for(var c=0;c<e.length;c++){var l=a+C(s=e[c],c);u+=R(s,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=R(s=s.value,t,i,l=a+C(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function N(e,t,n){if(null==e)return e;var r=[],i=0;return R(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},O={transition:null},D={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:O,ReactCurrentOwner:x};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)w.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];i.children=u}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return A.current.useCallback(e,t)},t.useContext=function(e){return A.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return A.current.useDeferredValue(e)},t.useEffect=function(e,t){return A.current.useEffect(e,t)},t.useId=function(){return A.current.useId()},t.useImperativeHandle=function(e,t,n){return A.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return A.current.useMemo(e,t)},t.useReducer=function(e,t,n){return A.current.useReducer(e,t,n)},t.useRef=function(e){return A.current.useRef(e)},t.useState=function(e){return A.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return A.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return A.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,u=e[s],c=s+1,l=e[c];if(0>a(u,n))c<i&&0>a(l,u)?(e[r]=l,e[c]=n,r=c):(e[r]=u,e[s]=n,r=s);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],l=[],h=1,f=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function _(e){if(y=!1,b(e),!v)if(null!==r(c))v=!0,O(w);else{var t=r(l);null!==t&&D(_,t.startTime-e)}}function w(e,n){v=!1,y&&(y=!1,g(I),I=-1),p=!0;var a=d;try{for(b(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!R());){var o=f.callback;if("function"===typeof o){f.callback=null,d=f.priorityLevel;var s=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?f.callback=s:f===r(c)&&i(c),b(n)}else i(c);f=r(c)}if(null!==f)var u=!0;else{var h=r(l);null!==h&&D(_,h.startTime-n),u=!1}return u}finally{f=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,S=!1,T=null,I=-1,E=5,C=-1;function R(){return!(t.unstable_now()-C<E)}function N(){if(null!==T){var e=t.unstable_now();C=e;var n=!0;try{n=T(!0,e)}finally{n?x():(S=!1,T=null)}}else S=!1}if("function"===typeof k)x=function(){k(N)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,A=P.port2;P.port1.onmessage=N,x=function(){A.postMessage(null)}}else x=function(){m(N,0)};function O(e){T=e,S||(S=!0,x())}function D(e,n){I=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,O(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(I),I=-1):y=!0,D(_,a-o))):(e.sortIndex=s,n(c,e),v||p||(v=!0,O(w))),e},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},836:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},263:function(e,t,n){var r=n(698).default;function i(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}e.exports=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=o?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(a,s,u):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a},e.exports.__esModule=!0,e.exports.default=e.exports},698:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},907:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},878:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{Z:function(){return r}})},326:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:function(){return r}})},144:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}n.d(t,{Z:function(){return i}})},942:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return r}})},462:function(e,t,n){"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})},578:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(611);function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(0,r.Z)(e,t)}},199:function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{Z:function(){return r}})},267:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{Z:function(){return r}})},987:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(366);function i(e,t){if(null==e)return{};var n,i,a=(0,r.Z)(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}},366:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,{Z:function(){return r}})},611:function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{Z:function(){return r}})},439:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(878);var i=n(181),a=n(267);function o(e,t){return(0,r.Z)(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||(0,i.Z)(e,t)||(0,a.Z)()}},433:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(907);var i=n(199),a=n(181);function o(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||(0,i.Z)(e)||(0,a.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},2:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:function(){return r}})},181:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(907);function i(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Tn},SDK_VERSION:function(){return Hr},_DEFAULT_ENTRY_NAME:function(){return Or},_addComponent:function(){return Fr},_addOrOverwriteComponent:function(){return Ur},_apps:function(){return Lr},_clearComponents:function(){return qr},_components:function(){return Mr},_getProvider:function(){return Zr},_registerComponent:function(){return jr},_removeServiceInstance:function(){return Vr},deleteApp:function(){return Yr},getApp:function(){return Gr},getApps:function(){return Qr},initializeApp:function(){return Kr},onLog:function(){return Jr},registerVersion:function(){return Xr},setLogLevel:function(){return ei}});var t=n(791),r=n(250),i=n(433),a=n(439),o=n(738),s=n(579),u=n(952),c=n(462),l=n(987),h=n(182),f=n(515),d=n(499),p=(0,d.Z)(t.createElement("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");var v=t.forwardRef((function(e,n){var r=e.alt,i=e.children,a=e.classes,o=e.className,s=e.component,u=void 0===s?"div":s,f=e.imgProps,d=e.sizes,v=e.src,y=e.srcSet,m=e.variant,g=void 0===m?"circular":m,k=(0,l.Z)(e,["alt","children","classes","className","component","imgProps","sizes","src","srcSet","variant"]),b=null,_=function(e){var n=e.src,r=e.srcSet,i=t.useState(!1),a=i[0],o=i[1];return t.useEffect((function(){if(n||r){o(!1);var e=!0,t=new Image;return t.src=n,t.srcSet=r,t.onload=function(){e&&o("loaded")},t.onerror=function(){e&&o("error")},function(){e=!1}}}),[n,r]),a}({src:v,srcSet:y}),w=v||y,x=w&&"error"!==_;return b=x?t.createElement("img",(0,c.Z)({alt:r,src:v,srcSet:y,sizes:d,className:a.img},f)):null!=i?i:w&&r?r[0]:t.createElement(p,{className:a.fallback}),t.createElement(u,(0,c.Z)({className:(0,h.Z)(a.root,a.system,a[g],o,!x&&a.colorDefault),ref:n},k),b)})),y=(0,f.Z)((function(e){return{root:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},colorDefault:{color:e.palette.background.default,backgroundColor:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[600]},circle:{},circular:{},rounded:{borderRadius:e.shape.borderRadius},square:{borderRadius:0},img:{width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4},fallback:{width:"75%",height:"75%"}}}),{name:"MuiAvatar"})(v),m=n(108),g=n(164),k=n(806),b=n(216),_=n(175),w=n(366),x=n(326),S=n(578),T=t.createContext(null);function I(e,n){var r=Object.create(null);return e&&t.Children.map(e,(function(e){return e})).forEach((function(e){r[e.key]=function(e){return n&&(0,t.isValidElement)(e)?n(e):e}(e)})),r}function E(e,t,n){return null!=n[t]?n[t]:e.props[t]}function C(e,n,r){var i=I(e.children),a=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),a=[];for(var o in e)o in t?a.length&&(i[o]=a,a=[]):a.push(o);var s={};for(var u in t){if(i[u])for(r=0;r<i[u].length;r++){var c=i[u][r];s[i[u][r]]=n(c)}s[u]=n(u)}for(r=0;r<a.length;r++)s[a[r]]=n(a[r]);return s}(n,i);return Object.keys(a).forEach((function(o){var s=a[o];if((0,t.isValidElement)(s)){var u=o in n,c=o in i,l=n[o],h=(0,t.isValidElement)(l)&&!l.props.in;!c||u&&!h?c||!u||h?c&&u&&(0,t.isValidElement)(l)&&(a[o]=(0,t.cloneElement)(s,{onExited:r.bind(null,s),in:l.props.in,exit:E(s,"exit",e),enter:E(s,"enter",e)})):a[o]=(0,t.cloneElement)(s,{in:!1}):a[o]=(0,t.cloneElement)(s,{onExited:r.bind(null,s),in:!0,exit:E(s,"exit",e),enter:E(s,"enter",e)})}})),a}var R=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},N=function(e){function n(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind((0,x.Z)(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}(0,S.Z)(n,e);var r=n.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(e,n){var r,i,a=n.children,o=n.handleExited;return{children:n.firstRender?(r=e,i=o,I(r.children,(function(e){return(0,t.cloneElement)(e,{onExited:i.bind(null,e),in:!0,appear:E(e,"appear",r),enter:E(e,"enter",r),exit:E(e,"exit",r)})}))):C(e,a,o),firstRender:!1}},r.handleExited=function(e,t){var n=I(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=(0,c.Z)({},t.children);return delete n[e.key],{children:n}})))},r.render=function(){var e=this.props,n=e.component,r=e.childFactory,i=(0,w.Z)(e,["component","childFactory"]),a=this.state.contextValue,o=R(this.state.children).map(r);return delete i.appear,delete i.enter,delete i.exit,null===n?t.createElement(T.Provider,{value:a},o):t.createElement(T.Provider,{value:a},t.createElement(n,i,o))},n}(t.Component);N.propTypes={},N.defaultProps={component:"div",childFactory:function(e){return e}};var P=N,A="undefined"===typeof window?t.useEffect:t.useLayoutEffect;var O=function(e){var n=e.classes,r=e.pulsate,i=void 0!==r&&r,a=e.rippleX,o=e.rippleY,s=e.rippleSize,u=e.in,c=e.onExited,l=void 0===c?function(){}:c,f=e.timeout,d=t.useState(!1),p=d[0],v=d[1],y=(0,h.Z)(n.ripple,n.rippleVisible,i&&n.ripplePulsate),m={width:s,height:s,top:-s/2+o,left:-s/2+a},g=(0,h.Z)(n.child,p&&n.childLeaving,i&&n.childPulsate),k=(0,b.Z)(l);return A((function(){if(!u){v(!0);var e=setTimeout(k,f);return function(){clearTimeout(e)}}}),[k,u,f]),t.createElement("span",{className:y,style:m},t.createElement("span",{className:g}))},D=t.forwardRef((function(e,n){var r=e.center,a=void 0!==r&&r,o=e.classes,s=e.className,u=(0,l.Z)(e,["center","classes","className"]),f=t.useState([]),d=f[0],p=f[1],v=t.useRef(0),y=t.useRef(null);t.useEffect((function(){y.current&&(y.current(),y.current=null)}),[d]);var m=t.useRef(!1),g=t.useRef(null),k=t.useRef(null),b=t.useRef(null);t.useEffect((function(){return function(){clearTimeout(g.current)}}),[]);var _=t.useCallback((function(e){var n=e.pulsate,r=e.rippleX,a=e.rippleY,s=e.rippleSize,u=e.cb;p((function(e){return[].concat((0,i.Z)(e),[t.createElement(O,{key:v.current,classes:o,timeout:550,pulsate:n,rippleX:r,rippleY:a,rippleSize:s})])})),v.current+=1,y.current=u}),[o]),w=t.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=t.pulsate,i=void 0!==r&&r,o=t.center,s=void 0===o?a||t.pulsate:o,u=t.fakeElement,c=void 0!==u&&u;if("mousedown"===e.type&&m.current)m.current=!1;else{"touchstart"===e.type&&(m.current=!0);var l,h,f,d=c?null:b.current,p=d?d.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(s||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)l=Math.round(p.width/2),h=Math.round(p.height/2);else{var v=e.touches?e.touches[0]:e,y=v.clientX,w=v.clientY;l=Math.round(y-p.left),h=Math.round(w-p.top)}if(s)(f=Math.sqrt((2*Math.pow(p.width,2)+Math.pow(p.height,2))/3))%2===0&&(f+=1);else{var x=2*Math.max(Math.abs((d?d.clientWidth:0)-l),l)+2,S=2*Math.max(Math.abs((d?d.clientHeight:0)-h),h)+2;f=Math.sqrt(Math.pow(x,2)+Math.pow(S,2))}e.touches?null===k.current&&(k.current=function(){_({pulsate:i,rippleX:l,rippleY:h,rippleSize:f,cb:n})},g.current=setTimeout((function(){k.current&&(k.current(),k.current=null)}),80)):_({pulsate:i,rippleX:l,rippleY:h,rippleSize:f,cb:n})}}),[a,_]),x=t.useCallback((function(){w({},{pulsate:!0})}),[w]),S=t.useCallback((function(e,t){if(clearTimeout(g.current),"touchend"===e.type&&k.current)return e.persist(),k.current(),k.current=null,void(g.current=setTimeout((function(){S(e,t)})));k.current=null,p((function(e){return e.length>0?e.slice(1):e})),y.current=t}),[]);return t.useImperativeHandle(n,(function(){return{pulsate:x,start:w,stop:S}}),[x,w,S]),t.createElement("span",(0,c.Z)({className:(0,h.Z)(o.root,s),ref:b},u),t.createElement(P,{component:null,exit:!0},d))})),L=(0,f.Z)((function(e){return{root:{overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"},ripple:{opacity:0,position:"absolute"},rippleVisible:{opacity:.3,transform:"scale(1)",animation:"$enter ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},ripplePulsate:{animationDuration:"".concat(e.transitions.duration.shorter,"ms")},child:{opacity:1,display:"block",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"currentColor"},childLeaving:{opacity:0,animation:"$exit ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},childPulsate:{position:"absolute",left:0,top:0,animation:"$pulsate 2500ms ".concat(e.transitions.easing.easeInOut," 200ms infinite")},"@keyframes enter":{"0%":{transform:"scale(0)",opacity:.1},"100%":{transform:"scale(1)",opacity:.3}},"@keyframes exit":{"0%":{opacity:1},"100%":{opacity:0}},"@keyframes pulsate":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.92)"},"100%":{transform:"scale(1)"}}}}),{flip:!1,name:"MuiTouchRipple"})(t.memo(D)),M=t.forwardRef((function(e,n){var r=e.action,i=e.buttonRef,a=e.centerRipple,o=void 0!==a&&a,s=e.children,u=e.classes,f=e.className,d=e.component,p=void 0===d?"button":d,v=e.disabled,y=void 0!==v&&v,m=e.disableRipple,w=void 0!==m&&m,x=e.disableTouchRipple,S=void 0!==x&&x,T=e.focusRipple,I=void 0!==T&&T,E=e.focusVisibleClassName,C=e.onBlur,R=e.onClick,N=e.onFocus,P=e.onFocusVisible,A=e.onKeyDown,O=e.onKeyUp,D=e.onMouseDown,M=e.onMouseLeave,F=e.onMouseUp,U=e.onTouchEnd,j=e.onTouchMove,Z=e.onTouchStart,V=e.onDragLeave,q=e.tabIndex,B=void 0===q?0:q,z=e.TouchRippleProps,W=e.type,H=void 0===W?"button":W,K=(0,l.Z)(e,["action","buttonRef","centerRipple","children","classes","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","onBlur","onClick","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","onDragLeave","tabIndex","TouchRippleProps","type"]),G=t.useRef(null);var Q=t.useRef(null),Y=t.useState(!1),$=Y[0],X=Y[1];y&&$&&X(!1);var J=(0,_.Z)(),ee=J.isFocusVisible,te=J.onBlurVisible,ne=J.ref;function re(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:S;return(0,b.Z)((function(r){return t&&t(r),!n&&Q.current&&Q.current[e](r),!0}))}t.useImperativeHandle(r,(function(){return{focusVisible:function(){X(!0),G.current.focus()}}}),[]),t.useEffect((function(){$&&I&&!w&&Q.current.pulsate()}),[w,I,$]);var ie=re("start",D),ae=re("stop",V),oe=re("stop",F),se=re("stop",(function(e){$&&e.preventDefault(),M&&M(e)})),ue=re("start",Z),ce=re("stop",U),le=re("stop",j),he=re("stop",(function(e){$&&(te(e),X(!1)),C&&C(e)}),!1),fe=(0,b.Z)((function(e){G.current||(G.current=e.currentTarget),ee(e)&&(X(!0),P&&P(e)),N&&N(e)})),de=function(){var e=g.findDOMNode(G.current);return p&&"button"!==p&&!("A"===e.tagName&&e.href)},pe=t.useRef(!1),ve=(0,b.Z)((function(e){I&&!pe.current&&$&&Q.current&&" "===e.key&&(pe.current=!0,e.persist(),Q.current.stop(e,(function(){Q.current.start(e)}))),e.target===e.currentTarget&&de()&&" "===e.key&&e.preventDefault(),A&&A(e),e.target===e.currentTarget&&de()&&"Enter"===e.key&&!y&&(e.preventDefault(),R&&R(e))})),ye=(0,b.Z)((function(e){I&&" "===e.key&&Q.current&&$&&!e.defaultPrevented&&(pe.current=!1,e.persist(),Q.current.stop(e,(function(){Q.current.pulsate(e)}))),O&&O(e),R&&e.target===e.currentTarget&&de()&&" "===e.key&&!e.defaultPrevented&&R(e)})),me=p;"button"===me&&K.href&&(me="a");var ge={};"button"===me?(ge.type=H,ge.disabled=y):("a"===me&&K.href||(ge.role="button"),ge["aria-disabled"]=y);var ke=(0,k.Z)(i,n),be=(0,k.Z)(ne,G),_e=(0,k.Z)(ke,be),we=t.useState(!1),xe=we[0],Se=we[1];t.useEffect((function(){Se(!0)}),[]);var Te=xe&&!w&&!y;return t.createElement(me,(0,c.Z)({className:(0,h.Z)(u.root,f,$&&[u.focusVisible,E],y&&u.disabled),onBlur:he,onClick:R,onFocus:fe,onKeyDown:ve,onKeyUp:ye,onMouseDown:ie,onMouseLeave:se,onMouseUp:oe,onDragLeave:ae,onTouchEnd:ce,onTouchMove:le,onTouchStart:ue,ref:_e,tabIndex:y?-1:B},ge,K),s,Te?t.createElement(L,(0,c.Z)({ref:Q,center:o},z)):null)})),F=(0,f.Z)({root:{display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},"&$disabled":{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}},disabled:{},focusVisible:{}},{name:"MuiButtonBase"})(M),U=n(122),j=t.forwardRef((function(e,n){var r=e.edge,i=void 0!==r&&r,a=e.children,o=e.classes,s=e.className,u=e.color,f=void 0===u?"default":u,d=e.disabled,p=void 0!==d&&d,v=e.disableFocusRipple,y=void 0!==v&&v,m=e.size,g=void 0===m?"medium":m,k=(0,l.Z)(e,["edge","children","classes","className","color","disabled","disableFocusRipple","size"]);return t.createElement(F,(0,c.Z)({className:(0,h.Z)(o.root,s,"default"!==f&&o["color".concat((0,U.Z)(f))],p&&o.disabled,"small"===g&&o["size".concat((0,U.Z)(g))],{start:o.edgeStart,end:o.edgeEnd}[i]),centerRipple:!0,focusRipple:!y,disabled:p,ref:n},k),t.createElement("span",{className:o.label},a))})),Z=(0,f.Z)((function(e){return{root:{textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:12,borderRadius:"50%",overflow:"visible",color:e.palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{backgroundColor:(0,m.Fq)(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{backgroundColor:"transparent",color:e.palette.action.disabled}},edgeStart:{marginLeft:-12,"$sizeSmall&":{marginLeft:-3}},edgeEnd:{marginRight:-12,"$sizeSmall&":{marginRight:-3}},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:(0,m.Fq)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},colorSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:(0,m.Fq)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},disabled:{},sizeSmall:{padding:3,fontSize:e.typography.pxToRem(18)},label:{width:"100%",display:"flex",alignItems:"inherit",justifyContent:"inherit"}}}),{name:"MuiIconButton"})(j),V=(0,d.Z)(t.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"SearchOutlined"),q=n(184),B=function(e){var n,r=e.messages,i=t.useState(""),o=(0,a.Z)(i,2),s=o[0],u=o[1];return t.useEffect((function(){u(Math.floor(5e3*Math.random()))}),[]),(0,q.jsxs)("div",{className:"sidebarChat",children:[(0,q.jsx)(y,{src:"https://avatars.dicebear.com/api/human/b".concat(s,".svg")}),(0,q.jsxs)("div",{className:"sidebarChat__info",children:[(0,q.jsx)("h2",{children:"Dev Help"}),(0,q.jsx)("p",{children:null===(n=r[r.length-1])||void 0===n?void 0:n.message})]})]})},z=(0,t.createContext)(),W=function(e){var n=e.reducer,r=e.initialState,i=e.children;return(0,q.jsx)(z.Provider,{value:(0,t.useReducer)(n,r),children:i})},H=function(){return(0,t.useContext)(z)},K=function(e){var t=e.messages,n=H(),r=(0,a.Z)(n,2),i=r[0].user;r[1];return(0,q.jsxs)("div",{className:"sidebar",children:[(0,q.jsxs)("div",{className:"sidebar__header",children:[(0,q.jsx)(y,{src:null===i||void 0===i?void 0:i.photoURL}),(0,q.jsxs)("div",{className:"sidebar__headerRight",children:[(0,q.jsx)(Z,{children:(0,q.jsx)(o.Z,{})}),(0,q.jsx)(Z,{children:(0,q.jsx)(s.Z,{})}),(0,q.jsx)(Z,{children:(0,q.jsx)(u.Z,{})})]})]}),(0,q.jsx)("div",{className:"sidebar__search",children:(0,q.jsxs)("div",{className:"sidebar__searchContainer",children:[(0,q.jsx)(V,{}),(0,q.jsx)("input",{placeholder:"Search or start new chat",type:"text"})]})}),(0,q.jsx)("div",{className:"sidebar__chats",children:(0,q.jsx)(B,{messages:t})})]})},G=n(2);function Q(){Q=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(C){u=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof f?t:f,o=Object.create(a.prototype),s=new T(i||[]);return r(o,"_invoke",{value:_(e,n,s)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=c;var h={};function f(){}function d(){}function p(){}var v={};u(v,a,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(I([])));m&&m!==t&&n.call(m,a)&&(v=m);var g=p.prototype=f.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,a,o,s){var u=l(e[r],e,a);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==(0,G.Z)(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,o,s)}),(function(e){i("throw",e,o,s)})):t.resolve(h).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,s)}))}s(u.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function _(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return E()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=w(o,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,h;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function I(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=p,r(g,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=u(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,s,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},k(b.prototype),u(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new b(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(g),u(g,s,"Generator"),u(g,a,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=I,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function Y(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(Xd){return void n(Xd)}s.done?t(u):Promise.resolve(u).then(r,i)}function $(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Y(a,r,i,o,s,"next",e)}function s(e){Y(a,r,i,o,s,"throw",e)}o(void 0)}))}}var X=(0,d.Z)(t.createElement("path",{d:"M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z"}),"AttachFile"),J=(0,d.Z)(t.createElement("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert"),ee=(0,d.Z)(t.createElement("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"}),"InsertEmoticon"),te=n(931);function ne(e,t){return function(){return e.apply(t,arguments)}}var re,ie=Object.prototype.toString,ae=Object.getPrototypeOf,oe=(re=Object.create(null),function(e){var t=ie.call(e);return re[t]||(re[t]=t.slice(8,-1).toLowerCase())}),se=function(e){return e=e.toLowerCase(),function(t){return oe(t)===e}},ue=function(e){return function(t){return typeof t===e}},ce=Array.isArray,le=ue("undefined");var he=se("ArrayBuffer");var fe=ue("string"),de=ue("function"),pe=ue("number"),ve=function(e){return null!==e&&"object"===typeof e},ye=function(e){if("object"!==oe(e))return!1;var t=ae(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},me=se("Date"),ge=se("File"),ke=se("Blob"),be=se("FileList"),_e=se("URLSearchParams");function we(e,t){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.allOwnKeys,o=void 0!==a&&a;if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),ce(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{var s,u=o?Object.getOwnPropertyNames(e):Object.keys(e),c=u.length;for(n=0;n<c;n++)s=u[n],t.call(null,e[s],s,e)}}var xe,Se=(xe="undefined"!==typeof Uint8Array&&ae(Uint8Array),function(e){return xe&&e instanceof xe}),Te=se("HTMLFormElement"),Ie=function(e){var t=Object.prototype.hasOwnProperty;return function(e,n){return t.call(e,n)}}(),Ee=se("RegExp"),Ce=function(e,t){var n=Object.getOwnPropertyDescriptors(e),r={};we(n,(function(n,i){!1!==t(n,i,e)&&(r[i]=n)})),Object.defineProperties(e,r)},Re={isArray:ce,isArrayBuffer:he,isBuffer:function(e){return null!==e&&!le(e)&&null!==e.constructor&&!le(e.constructor)&&de(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"===typeof FormData&&e instanceof FormData||ie.call(e)===t||de(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&he(e.buffer)},isString:fe,isNumber:pe,isBoolean:function(e){return!0===e||!1===e},isObject:ve,isPlainObject:ye,isUndefined:le,isDate:me,isFile:ge,isBlob:ke,isRegExp:Ee,isFunction:de,isStream:function(e){return ve(e)&&de(e.pipe)},isURLSearchParams:_e,isTypedArray:Se,isFileList:be,forEach:we,merge:function e(){for(var t={},n=function(n,r){ye(t[r])&&ye(n)?t[r]=e(t[r],n):ye(n)?t[r]=e({},n):ce(n)?t[r]=n.slice():t[r]=n},r=0,i=arguments.length;r<i;r++)arguments[r]&&we(arguments[r],n);return t},extend:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.allOwnKeys;return we(t,(function(t,r){n&&de(t)?e[r]=ne(t,n):e[r]=t}),{allOwnKeys:i}),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n,r){var i,a,o,s={};if(t=t||{},null==e)return t;do{for(a=(i=Object.getOwnPropertyNames(e)).length;a-- >0;)o=i[a],r&&!r(o,e,t)||s[o]||(t[o]=e[o],s[o]=!0);e=!1!==n&&ae(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:oe,kindOfTest:se,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;if(ce(e))return e;var t=e.length;if(!pe(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},forEachEntry:function(e,t){for(var n,r=(e&&e[Symbol.iterator]).call(e);(n=r.next())&&!n.done;){var i=n.value;t.call(e,i[0],i[1])}},matchAll:function(e,t){for(var n,r=[];null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:Te,hasOwnProperty:Ie,hasOwnProp:Ie,reduceDescriptors:Ce,freezeMethods:function(e){Ce(e,(function(t,n){var r=e[n];de(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=function(){throw Error("Can not read-only method '"+n+"'")}))}))},toObjectSet:function(e,t){var n={},r=function(e){e.forEach((function(e){n[e]=!0}))};return ce(e)?r(e):r(String(e).split(t)),n},toCamelCase:function(e){return e.toLowerCase().replace(/[_-\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))},noop:function(){},toFiniteNumber:function(e,t){return e=+e,Number.isFinite(e)?e:t}};function Ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Pe=n(144);function Ae(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}Re.inherits(Ae,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var Oe=Ae.prototype,De={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(e){De[e]={value:e}})),Object.defineProperties(Ae,De),Object.defineProperty(Oe,"isAxiosError",{value:!0}),Ae.from=function(e,t,n,r,i,a){var o=Object.create(Oe);return Re.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(function(e){return"isAxiosError"!==e})),Ae.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,a&&Object.assign(o,a),o};var Le=Ae,Me=n(472);function Fe(e){return Re.isPlainObject(e)||Re.isArray(e)}function Ue(e){return Re.endsWith(e,"[]")?e.slice(0,-2):e}function je(e,t,n){return e?e.concat(t).map((function(e,t){return e=Ue(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}var Ze=Re.toFlatObject(Re,{},null,(function(e){return/^is[A-Z]/.test(e)}));var Ve=function(e,t,n){if(!Re.isObject(e))throw new TypeError("target must be an object");t=t||new(Me||FormData);var r,i=(n=Re.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Re.isUndefined(t[e])}))).metaTokens,a=n.visitor||l,o=n.dots,s=n.indexes,u=(n.Blob||"undefined"!==typeof Blob&&Blob)&&((r=t)&&Re.isFunction(r.append)&&"FormData"===r[Symbol.toStringTag]&&r[Symbol.iterator]);if(!Re.isFunction(a))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(Re.isDate(e))return e.toISOString();if(!u&&Re.isBlob(e))throw new Le("Blob is not supported. Use a Buffer instead.");return Re.isArrayBuffer(e)||Re.isTypedArray(e)?u&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,r){var a=e;if(e&&!r&&"object"===typeof e)if(Re.endsWith(n,"{}"))n=i?n:n.slice(0,-2),e=JSON.stringify(e);else if(Re.isArray(e)&&function(e){return Re.isArray(e)&&!e.some(Fe)}(e)||Re.isFileList(e)||Re.endsWith(n,"[]")&&(a=Re.toArray(e)))return n=Ue(n),a.forEach((function(e,r){!Re.isUndefined(e)&&null!==e&&t.append(!0===s?je([n],r,o):null===s?n:n+"[]",c(e))})),!1;return!!Fe(e)||(t.append(je(r,n,o),c(e)),!1)}var h=[],f=Object.assign(Ze,{defaultVisitor:l,convertValue:c,isVisitable:Fe});if(!Re.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!Re.isUndefined(n)){if(-1!==h.indexOf(n))throw Error("Circular reference detected in "+r.join("."));h.push(n),Re.forEach(n,(function(n,i){!0===(!(Re.isUndefined(n)||null===n)&&a.call(t,n,Re.isString(i)?i.trim():i,r,f))&&e(n,r?r.concat(i):[i])})),h.pop()}}(e),t};function qe(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Be(e,t){this._pairs=[],e&&Ve(e,this,t)}var ze=Be.prototype;ze.append=function(e,t){this._pairs.push([e,t])},ze.toString=function(e){var t=e?function(t){return e.call(this,t,qe)}:qe;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var We=Be;function He(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ke(e,t,n){if(!t)return e;var r,i=n&&n.encode||He,a=n&&n.serialize;if(r=a?a(t,n):Re.isURLSearchParams(t)?t.toString():new We(t,n).toString(i)){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}var Ge=function(){function e(){Ne(this,e),this.handlers=[]}return(0,Pe.Z)(e,[{key:"use",value:function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(e){this.handlers[e]&&(this.handlers[e]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(e){Re.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}]),e}(),Qe=Ge,Ye={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},$e="undefined"!==typeof URLSearchParams?URLSearchParams:We,Xe=FormData,Je=function(){var e;return("undefined"===typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&("undefined"!==typeof window&&"undefined"!==typeof document)}(),et={isBrowser:!0,classes:{URLSearchParams:$e,FormData:Xe,Blob:Blob},isStandardBrowserEnv:Je,protocols:["http","https","file","blob","url","data"]};var tt=function(e){function t(e,n,r,i){var a=e[i++],o=Number.isFinite(+a),s=i>=e.length;return a=!a&&Re.isArray(r)?r.length:a,s?(Re.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!o):(r[a]&&Re.isObject(r[a])||(r[a]=[]),t(e,n,r[a],i)&&Re.isArray(r[a])&&(r[a]=function(e){var t,n,r={},i=Object.keys(e),a=i.length;for(t=0;t<a;t++)r[n=i[t]]=e[n];return r}(r[a])),!o)}if(Re.isFormData(e)&&Re.isFunction(e.entries)){var n={};return Re.forEachEntry(e,(function(e,r){t(function(e){return Re.matchAll(/\w+|\[(\w*)]/g,e).map((function(e){return"[]"===e[0]?"":e[1]||e[0]}))}(e),r,n,0)})),n}return null};var nt=et.isStandardBrowserEnv?{write:function(e,t,n,r,i,a){var o=[];o.push(e+"="+encodeURIComponent(t)),Re.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Re.isString(r)&&o.push("path="+r),Re.isString(i)&&o.push("domain="+i),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function rt(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}var it=et.isStandardBrowserEnv?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=Re.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0};function at(e,t,n){Le.call(this,null==e?"canceled":e,Le.ERR_CANCELED,t,n),this.name="CanceledError"}Re.inherits(at,Le,{__CANCEL__:!0});var ot=at;var st=Re.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ut=Symbol("internals"),ct=Symbol("defaults");function lt(e){return e&&String(e).trim().toLowerCase()}function ht(e){return!1===e||null==e?e:Re.isArray(e)?e.map(ht):String(e)}function ft(e,t,n,r){return Re.isFunction(r)?r.call(this,t,n):Re.isString(t)?Re.isString(r)?-1!==t.indexOf(r):Re.isRegExp(r)?r.test(t):void 0:void 0}function dt(e,t){t=t.toLowerCase();for(var n,r=Object.keys(e),i=r.length;i-- >0;)if(t===(n=r[i]).toLowerCase())return n;return null}function pt(e,t){e&&this.set(e),this[ct]=t||null}Object.assign(pt.prototype,{set:function(e,t,n){var r=this;function i(e,t,n){var i=lt(t);if(!i)throw new Error("header name must be a non-empty string");var a=dt(r,i);(!a||!0===n||!1!==r[a]&&!1!==n)&&(r[a||t]=ht(e))}return Re.isPlainObject(e)?Re.forEach(e,(function(e,n){i(e,n,t)})):i(t,e,n),this},get:function(e,t){if(e=lt(e)){var n=dt(this,e);if(n){var r=this[n];if(!t)return r;if(!0===t)return function(e){for(var t,n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;t=r.exec(e);)n[t[1]]=t[2];return n}(r);if(Re.isFunction(t))return t.call(this,r,n);if(Re.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}},has:function(e,t){if(e=lt(e)){var n=dt(this,e);return!(!n||t&&!ft(0,this[n],n,t))}return!1},delete:function(e,t){var n=this,r=!1;function i(e){if(e=lt(e)){var i=dt(n,e);!i||t&&!ft(0,n[i],i,t)||(delete n[i],r=!0)}}return Re.isArray(e)?e.forEach(i):i(e),r},clear:function(){return Object.keys(this).forEach(this.delete.bind(this))},normalize:function(e){var t=this,n={};return Re.forEach(this,(function(r,i){var a=dt(n,i);if(a)return t[a]=ht(r),void delete t[i];var o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))}(i):String(i).trim();o!==i&&delete t[i],t[o]=ht(r),n[o]=!0})),this},toJSON:function(e){var t=Object.create(null);return Re.forEach(Object.assign({},this[ct]||null,this),(function(n,r){null!=n&&!1!==n&&(t[r]=e&&Re.isArray(n)?n.join(", "):n)})),t}}),Object.assign(pt,{from:function(e){return Re.isString(e)?new this(function(e){var t,n,r,i={};return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),t=e.substring(0,r).trim().toLowerCase(),n=e.substring(r+1).trim(),!t||i[t]&&st[t]||("set-cookie"===t?i[t]?i[t].push(n):i[t]=[n]:i[t]=i[t]?i[t]+", "+n:n)})),i}(e)):e instanceof this?e:new this(e)},accessor:function(e){var t=(this[ut]=this[ut]={accessors:{}}).accessors,n=this.prototype;function r(e){var r=lt(e);t[r]||(!function(e,t){var n=Re.toCamelCase(" "+t);["get","set","has"].forEach((function(r){Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return Re.isArray(e)?e.forEach(r):r(e),this}}),pt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent"]),Re.freezeMethods(pt.prototype),Re.freezeMethods(pt);var vt=pt;var yt=function(e,t){e=e||10;var n,r=new Array(e),i=new Array(e),a=0,o=0;return t=void 0!==t?t:1e3,function(s){var u=Date.now(),c=i[o];n||(n=u),r[a]=s,i[a]=u;for(var l=o,h=0;l!==a;)h+=r[l++],l%=e;if((a=(a+1)%e)===o&&(o=(o+1)%e),!(u-n<t)){var f=c&&u-c;return f?Math.round(1e3*h/f):void 0}}};function mt(e,t){var n=0,r=yt(50,250);return function(i){var a=i.loaded,o=i.lengthComputable?i.total:void 0,s=a-n,u=r(s);n=a;var c={loaded:a,total:o,progress:o?a/o:void 0,bytes:s,rate:u||void 0,estimated:u&&o&&a<=o?(o-a)/u:void 0};c[t?"download":"upload"]=!0,e(c)}}function gt(e){return new Promise((function(t,n){var r,i=e.data,a=vt.from(e.headers).normalize(),o=e.responseType;function s(){e.cancelToken&&e.cancelToken.unsubscribe(r),e.signal&&e.signal.removeEventListener("abort",r)}Re.isFormData(i)&&et.isStandardBrowserEnv&&a.setContentType(!1);var u=new XMLHttpRequest;if(e.auth){var c=e.auth.username||"",l=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";a.set("Authorization","Basic "+btoa(c+":"+l))}var h=rt(e.baseURL,e.url);function f(){if(u){var r=vt.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders());!function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Le("Request failed with status code "+n.status,[Le.ERR_BAD_REQUEST,Le.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),s()}),(function(e){n(e),s()}),{data:o&&"text"!==o&&"json"!==o?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:r,config:e,request:u}),u=null}}if(u.open(e.method.toUpperCase(),Ke(h,e.params,e.paramsSerializer),!0),u.timeout=e.timeout,"onloadend"in u?u.onloadend=f:u.onreadystatechange=function(){u&&4===u.readyState&&(0!==u.status||u.responseURL&&0===u.responseURL.indexOf("file:"))&&setTimeout(f)},u.onabort=function(){u&&(n(new Le("Request aborted",Le.ECONNABORTED,e,u)),u=null)},u.onerror=function(){n(new Le("Network Error",Le.ERR_NETWORK,e,u)),u=null},u.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||Ye;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new Le(t,r.clarifyTimeoutError?Le.ETIMEDOUT:Le.ECONNABORTED,e,u)),u=null},et.isStandardBrowserEnv){var d=(e.withCredentials||it(h))&&e.xsrfCookieName&&nt.read(e.xsrfCookieName);d&&a.set(e.xsrfHeaderName,d)}void 0===i&&a.setContentType(null),"setRequestHeader"in u&&Re.forEach(a.toJSON(),(function(e,t){u.setRequestHeader(t,e)})),Re.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),o&&"json"!==o&&(u.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&u.addEventListener("progress",mt(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",mt(e.onUploadProgress)),(e.cancelToken||e.signal)&&(r=function(t){u&&(n(!t||t.type?new ot(null,e,u):t),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(r),e.signal&&(e.signal.aborted?r():e.signal.addEventListener("abort",r)));var p=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(h);p&&-1===et.protocols.indexOf(p)?n(new Le("Unsupported protocol "+p+":",Le.ERR_BAD_REQUEST,e)):u.send(i||null)}))}var kt={http:gt,xhr:gt},bt=function(e){if(Re.isString(e)){var t=kt[e];if(!e)throw Error(Re.hasOwnProp(e)?"Adapter '".concat(e,"' is not available in the build"):"Can not resolve adapter '".concat(e,"'"));return t}if(!Re.isFunction(e))throw new TypeError("adapter is not a function");return e},_t={"Content-Type":"application/x-www-form-urlencoded"};var wt={transitional:Ye,adapter:function(){var e;return"undefined"!==typeof XMLHttpRequest?e=bt("xhr"):"undefined"!==typeof process&&"process"===Re.kindOf(process)&&(e=bt("http")),e}(),transformRequest:[function(e,t){var n,r=t.getContentType()||"",i=r.indexOf("application/json")>-1,a=Re.isObject(e);if(a&&Re.isHTMLForm(e)&&(e=new FormData(e)),Re.isFormData(e))return i&&i?JSON.stringify(tt(e)):e;if(Re.isArrayBuffer(e)||Re.isBuffer(e)||Re.isStream(e)||Re.isFile(e)||Re.isBlob(e))return e;if(Re.isArrayBufferView(e))return e.buffer;if(Re.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Ve(e,new et.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return et.isNode&&Re.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((n=Re.isFileList(e))||r.indexOf("multipart/form-data")>-1){var o=this.env&&this.env.FormData;return Ve(n?{"files[]":e}:e,o&&new o,this.formSerializer)}}return a||i?(t.setContentType("application/json",!1),function(e,t,n){if(Re.isString(e))try{return(t||JSON.parse)(e),Re.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||wt.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&Re.isString(e)&&(n&&!this.responseType||r)){var i=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(a){if(i){if("SyntaxError"===a.name)throw Le.from(a,Le.ERR_BAD_RESPONSE,this,null,this.response);throw a}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:et.classes.FormData,Blob:et.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Re.forEach(["delete","get","head"],(function(e){wt.headers[e]={}})),Re.forEach(["post","put","patch"],(function(e){wt.headers[e]=Re.merge(_t)}));var xt=wt;function St(e,t){var n=this||xt,r=t||n,i=vt.from(r.headers),a=r.data;return Re.forEach(e,(function(e){a=e.call(n,a,i.normalize(),t?t.status:void 0)})),i.normalize(),a}function Tt(e){return!(!e||!e.__CANCEL__)}function It(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ot}function Et(e){return It(e),e.headers=vt.from(e.headers),e.data=St.call(e,e.transformRequest),(e.adapter||xt.adapter)(e).then((function(t){return It(e),t.data=St.call(e,e.transformResponse,t),t.headers=vt.from(t.headers),t}),(function(t){return Tt(t)||(It(e),t&&t.response&&(t.response.data=St.call(e,e.transformResponse,t.response),t.response.headers=vt.from(t.response.headers))),Promise.reject(t)}))}function Ct(e,t){t=t||{};var n={};function r(e,t){return Re.isPlainObject(e)&&Re.isPlainObject(t)?Re.merge(e,t):Re.isPlainObject(t)?Re.merge({},t):Re.isArray(t)?t.slice():t}function i(n){return Re.isUndefined(t[n])?Re.isUndefined(e[n])?void 0:r(void 0,e[n]):r(e[n],t[n])}function a(e){if(!Re.isUndefined(t[e]))return r(void 0,t[e])}function o(n){return Re.isUndefined(t[n])?Re.isUndefined(e[n])?void 0:r(void 0,e[n]):r(void 0,t[n])}function s(n){return n in t?r(e[n],t[n]):n in e?r(void 0,e[n]):void 0}var u={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:s};return Re.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=u[e]||i,r=t(e);Re.isUndefined(r)&&t!==s||(n[e]=r)})),n}var Rt="1.1.3",Nt={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){Nt[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var Pt={};Nt.transitional=function(e,t,n){function r(e,t){return"[Axios v1.1.3] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,i,a){if(!1===e)throw new Le(r(i," has been removed"+(t?" in "+t:"")),Le.ERR_DEPRECATED);return t&&!Pt[i]&&(Pt[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,a)}};var At={assertOptions:function(e,t,n){if("object"!==typeof e)throw new Le("options must be an object",Le.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),i=r.length;i-- >0;){var a=r[i],o=t[a];if(o){var s=e[a],u=void 0===s||o(s,a,e);if(!0!==u)throw new Le("option "+a+" must be "+u,Le.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Le("Unknown option "+a,Le.ERR_BAD_OPTION)}},validators:Nt},Ot=At.validators,Dt=function(){function e(t){Ne(this,e),this.defaults=t,this.interceptors={request:new Qe,response:new Qe}}return(0,Pe.Z)(e,[{key:"request",value:function(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{};var n=t=Ct(this.defaults,t),r=n.transitional,i=n.paramsSerializer;void 0!==r&&At.assertOptions(r,{silentJSONParsing:Ot.transitional(Ot.boolean),forcedJSONParsing:Ot.transitional(Ot.boolean),clarifyTimeoutError:Ot.transitional(Ot.boolean)},!1),void 0!==i&&At.assertOptions(i,{encode:Ot.function,serialize:Ot.function},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();var a=t.headers&&Re.merge(t.headers.common,t.headers[t.method]);a&&Re.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),t.headers=new vt(t.headers,a);var o=[],s=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));var u,c=[];this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));var l,h=0;if(!s){var f=[Et.bind(this),void 0];for(f.unshift.apply(f,o),f.push.apply(f,c),l=f.length,u=Promise.resolve(t);h<l;)u=u.then(f[h++],f[h++]);return u}l=o.length;var d=t;for(h=0;h<l;){var p=o[h++],v=o[h++];try{d=p(d)}catch(Xd){v.call(this,Xd);break}}try{u=Et.call(this,d)}catch(Xd){return Promise.reject(Xd)}for(h=0,l=c.length;h<l;)u=u.then(c[h++],c[h++]);return u}},{key:"getUri",value:function(e){return Ke(rt((e=Ct(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}]),e}();Re.forEach(["delete","get","head","options"],(function(e){Dt.prototype[e]=function(t,n){return this.request(Ct(n||{},{method:e,url:t,data:(n||{}).data}))}})),Re.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(Ct(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Dt.prototype[e]=t(),Dt.prototype[e+"Form"]=t(!0)}));var Lt=Dt,Mt=function(){function e(t){if(Ne(this,e),"function"!==typeof t)throw new TypeError("executor must be a function.");var n;this.promise=new Promise((function(e){n=e}));var r=this;this.promise.then((function(e){if(r._listeners){for(var t=r._listeners.length;t-- >0;)r._listeners[t](e);r._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},t((function(e,t,i){r.reason||(r.reason=new ot(e,t,i),n(r.reason))}))}return(0,Pe.Z)(e,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}},{key:"unsubscribe",value:function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}}}],[{key:"source",value:function(){var t;return{token:new e((function(e){t=e})),cancel:t}}}]),e}();var Ft=function e(t){var n=new Lt(t),r=ne(Lt.prototype.request,n);return Re.extend(r,Lt.prototype,n,{allOwnKeys:!0}),Re.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Ct(t,n))},r}(xt);Ft.Axios=Lt,Ft.CanceledError=ot,Ft.CancelToken=Mt,Ft.isCancel=Tt,Ft.VERSION=Rt,Ft.toFormData=Ve,Ft.AxiosError=Le,Ft.Cancel=Ft.CanceledError,Ft.all=function(e){return Promise.all(e)},Ft.spread=function(e){return function(t){return e.apply(null,t)}},Ft.isAxiosError=function(e){return Re.isObject(e)&&!0===e.isAxiosError},Ft.formToJSON=function(e){return tt(Re.isHTMLForm(e)?new FormData(e):e)};var Ut=Ft,jt=(Ut.Axios,Ut.AxiosError,Ut.CanceledError,Ut.isCancel,Ut.CancelToken,Ut.VERSION,Ut.all,Ut.Cancel,Ut.isAxiosError,Ut.spread,Ut.toFormData,Ut.create({baseURL:"https://messaging-app-backend.onrender.com"})),Zt=function(e){var n,r=e.messages,i=t.useState(""),o=(0,a.Z)(i,2),s=o[0],u=o[1],c=H(),l=(0,a.Z)(c,2),h=l[0].user;l[1];t.useEffect((function(){u(Math.floor(5e3*Math.random()))}),[]);var f=t.useState(""),d=(0,a.Z)(f,2),p=d[0],v=d[1],m=function(){var e=$(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,jt.post("/messages/new",{message:p,name:h.displayName,timestamp:(new Date).toUTCString(),received:!0});case 3:v("");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,q.jsxs)("div",{className:"chat",children:[(0,q.jsxs)("div",{className:"chat__header",children:[(0,q.jsx)(y,{src:"https://avatars.dicebear.com/api/human/b".concat(s,".svg")}),(0,q.jsxs)("div",{className:"chat__headerInfo",children:[(0,q.jsx)("h3",{children:"Dev Help"}),(0,q.jsxs)("p",{children:["Last seen at ",null===(n=r[r.length-1])||void 0===n?void 0:n.timestamp]})]}),(0,q.jsxs)("div",{className:"chat__headerRight",children:[(0,q.jsx)(Z,{children:(0,q.jsx)(V,{})}),(0,q.jsx)(Z,{children:(0,q.jsx)(X,{})}),(0,q.jsx)(Z,{children:(0,q.jsx)(J,{})})]})]}),(0,q.jsx)("div",{className:"chat__body",children:r.map((function(e,t){return(0,q.jsxs)("p",{className:"chat__message ".concat("chat__receiver"),children:[(0,q.jsx)("span",{className:"chat__name",children:e.name}),e.message,(0,q.jsx)("span",{className:"chat__timestamp",children:e.timestamp})]},t)}))}),(0,q.jsxs)("div",{className:"chat__footer",children:[(0,q.jsx)(ee,{}),(0,q.jsxs)("form",{children:[(0,q.jsx)("input",{placeholder:"Type a message",type:"text",value:p,onChange:function(e){return v(e.target.value)}}),(0,q.jsx)("button",{type:"submit",onClick:m,children:"Send a message"})]}),(0,q.jsx)(te.Z,{})]})]})},Vt=n(281),qt=n.n(Vt),Bt=n(942),zt=n(181);function Wt(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,zt.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}var Ht=n(611);function Kt(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,Ht.Z)(e,t)}function Gt(e){return Gt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Gt(e)}function Qt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Yt(e,t){if(t&&("object"===(0,G.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,x.Z)(e)}function $t(e){var t=Qt();return function(){var n,r=Gt(e);if(t){var i=Gt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yt(this,n)}}function Xt(e,t,n){return Xt=Qt()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&(0,Ht.Z)(i,n.prototype),i},Xt.apply(null,arguments)}function Jt(e){var t="function"===typeof Map?new Map:void 0;return Jt=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Xt(e,arguments,Gt(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),(0,Ht.Z)(n,e)},Jt(e)}var en=!1,tn=!1,nn="${JSCORE_VERSION}",rn=function(e,t){if(!e)throw an(t)},an=function(e){return new Error("Firebase Database ("+nn+") INTERNAL ASSERT FAILED: "+e)},on=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},sn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,h=(3&a)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(on(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},un=function(e){var t=on(e);return sn.encodeByteArray(t,!0)},cn=function(e){return un(e).replace(/\./g,"")},ln=function(e){try{return sn.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function hn(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=hn(e[n],t[n]));return e}function fn(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function dn(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fn())}function pn(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function vn(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function yn(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function mn(){var e=fn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function gn(){return!0===en||!0===tn}function kn(){return"object"===typeof indexedDB}var bn=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},_n=function(){try{return bn()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/messaging-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&ln(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},wn=function(){var e;return null===(e=_n())||void 0===e?void 0:e.config},xn=function(){function e(){var t=this;Ne(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return(0,Pe.Z)(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Sn(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[cn(JSON.stringify({alg:"none",type:"JWT"})),cn(JSON.stringify(a)),""].join(".")}var Tn=function(e){Kt(n,e);var t=$t(n);function n(e,r,i){var a;return Ne(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf((0,x.Z)(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace((0,x.Z)(a),In.prototype.create),a}return(0,Pe.Z)(n)}(Jt(Error)),In=function(){function e(t,n,r){Ne(this,e),this.service=t,this.serviceName=n,this.errors=r}return(0,Pe.Z)(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?En(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new Tn(n,a,t);return o}}]),e}();function En(e,t){return e.replace(Cn,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Cn=/\{\$([^}]+)}/g;function Rn(e){return JSON.parse(e)}function Nn(e){return JSON.stringify(e)}var Pn=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=Rn(ln(a[0])||""),n=Rn(ln(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function An(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function On(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function Dn(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Ln(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Mn(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(Fn(s)&&Fn(u)){if(!Mn(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var h=l[c];if(!n.includes(h))return!1}return!0}function Fn(e){return null!==e&&"object"===typeof e}function Un(e){for(var t=[],n=function(){var e=(0,a.Z)(i[r],2),n=e[0],o=e[1];Array.isArray(o)?o.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(o))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function jn(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("="),r=(0,a.Z)(n,2),i=r[0],o=r[1];t[decodeURIComponent(i)]=decodeURIComponent(o)}})),t}function Zn(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var Vn=function(){function e(){Ne(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return(0,Pe.Z)(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var s,u,c=this.chain_[0],l=this.chain_[1],h=this.chain_[2],f=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(s=f^l&(h^f),u=1518500249):(s=l^h^f,u=1859775393):p<60?(s=l&h|f&(l|h),u=2400959708):(s=l^h^f,u=3395469782);var v=(c<<5|c>>>27)+s+d+u+n[p]&4294967295;d=f,f=h,h=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function qn(e,t){var n=new Bn(e,t);return n.subscribe.bind(n)}var Bn=function(){function e(t,n){var r=this;Ne(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return(0,Pe.Z)(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=Wt(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=zn),void 0===r.error&&(r.error=zn),void 0===r.complete&&(r.complete=zn);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function zn(){}var Wn=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function Hn(e,t){return"".concat(e," failed: ").concat(t," argument ")}function Kn(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(Hn(e,t)+"must be a valid function.")}function Gn(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(Hn(e,t)+"must be a valid context object.")}var Qn=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function Yn(e){return e&&e._delegate?e._delegate:e}var $n=function(){function e(t,n,r){Ne(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return(0,Pe.Z)(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Xn="[DEFAULT]",Jn=function(){function e(t,n){Ne(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return(0,Pe.Z)(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new xn;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Xn})}catch(c){}var t,n=Wt(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=(0,a.Z)(t.value,2),i=r[0],o=r[1],s=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:s});o.resolve(u)}catch(c){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=$(Q().mark((function e(){var t;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat((0,i.Z)(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),(0,i.Z)(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xn;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xn;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,o=this.getOrInitializeService({instanceIdentifier:r,options:n}),s=Wt(this.instancesDeferred.entries());try{for(s.s();!(i=s.n()).done;){var u=(0,a.Z)(i.value,2),c=u[0],l=u[1],h=this.normalizeInstanceIdentifier(c);r===h&&l.resolve(o)}}catch(f){s.e(f)}finally{s.f()}return o}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=Wt(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch($D){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Xn?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch($D){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xn;return this.component?this.component.multipleInstances?e:Xn:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var er,tr,nr=function(){function e(t){Ne(this,e),this.name=t,this.providers=new Map}return(0,Pe.Z)(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Jn(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),rr=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(tr||(tr={}));var ir={debug:tr.DEBUG,verbose:tr.VERBOSE,info:tr.INFO,warn:tr.WARN,error:tr.ERROR,silent:tr.SILENT},ar=tr.INFO,or=(er={},(0,Bt.Z)(er,tr.DEBUG,"log"),(0,Bt.Z)(er,tr.VERBOSE,"log"),(0,Bt.Z)(er,tr.INFO,"info"),(0,Bt.Z)(er,tr.WARN,"warn"),(0,Bt.Z)(er,tr.ERROR,"error"),er),sr=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=or[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},ur=function(){function e(t){Ne(this,e),this.name=t,this._logLevel=ar,this._logHandler=sr,this._userLogHandler=null,rr.push(this)}return(0,Pe.Z)(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in tr))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?ir[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,tr.DEBUG].concat(t)),this._logHandler.apply(this,[this,tr.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,tr.VERBOSE].concat(t)),this._logHandler.apply(this,[this,tr.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,tr.INFO].concat(t)),this._logHandler.apply(this,[this,tr.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,tr.WARN].concat(t)),this._logHandler.apply(this,[this,tr.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,tr.ERROR].concat(t)),this._logHandler.apply(this,[this,tr.ERROR].concat(t))}}]),e}();function cr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cr(Object(n),!0).forEach((function(t){(0,Bt.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var hr,fr;var dr=new WeakMap,pr=new WeakMap,vr=new WeakMap,yr=new WeakMap,mr=new WeakMap;var gr={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return pr.get(e);if("objectStoreNames"===t)return e.objectStoreNames||vr.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _r(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function kr(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(fr||(fr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(wr(this),n),_r(dr.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return _r(e.apply(wr(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[wr(this),t].concat(r));return vr.set(a,t.sort?t.sort():[t]),_r(a)}}function br(e){return"function"===typeof e?kr(e):(e instanceof IDBTransaction&&function(e){if(!pr.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));pr.set(e,t)}}(e),t=e,(hr||(hr=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,gr):e);var t}function _r(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(_r(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&dr.set(t,e)})).catch((function(){})),mr.set(t,e),t}(e);if(yr.has(e))return yr.get(e);var t=br(e);return t!==e&&(yr.set(e,t),mr.set(t,e)),t}var wr=function(e){return mr.get(e)};var xr,Sr,Tr=["get","getKey","getAll","getAllKeys","count"],Ir=["put","add","delete","clear"],Er=new Map;function Cr(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Er.get(t))return Er.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Ir.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Tr.includes(n))){var a=function(){var e=$(Q().mark((function e(t){var a,o,s,u,c,l,h=arguments;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),s=o.store,u=h.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=h[l];return r&&(s=s.index(c.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Er.set(t,a),a}}}gr=function(e){return lr(lr({},e),{},{get:function(t,n,r){return Cr(t,n)||e.get(t,n,r)},has:function(t,n){return!!Cr(t,n)||e.has(t,n)}})}(gr);var Rr=function(){function e(t){Ne(this,e),this.container=t}return(0,Pe.Z)(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Nr="@firebase/app",Pr="0.8.3",Ar=new ur("@firebase/app"),Or="[DEFAULT]",Dr=(xr={},(0,Bt.Z)(xr,Nr,"fire-core"),(0,Bt.Z)(xr,"@firebase/app-compat","fire-core-compat"),(0,Bt.Z)(xr,"@firebase/analytics","fire-analytics"),(0,Bt.Z)(xr,"@firebase/analytics-compat","fire-analytics-compat"),(0,Bt.Z)(xr,"@firebase/app-check","fire-app-check"),(0,Bt.Z)(xr,"@firebase/app-check-compat","fire-app-check-compat"),(0,Bt.Z)(xr,"@firebase/auth","fire-auth"),(0,Bt.Z)(xr,"@firebase/auth-compat","fire-auth-compat"),(0,Bt.Z)(xr,"@firebase/database","fire-rtdb"),(0,Bt.Z)(xr,"@firebase/database-compat","fire-rtdb-compat"),(0,Bt.Z)(xr,"@firebase/functions","fire-fn"),(0,Bt.Z)(xr,"@firebase/functions-compat","fire-fn-compat"),(0,Bt.Z)(xr,"@firebase/installations","fire-iid"),(0,Bt.Z)(xr,"@firebase/installations-compat","fire-iid-compat"),(0,Bt.Z)(xr,"@firebase/messaging","fire-fcm"),(0,Bt.Z)(xr,"@firebase/messaging-compat","fire-fcm-compat"),(0,Bt.Z)(xr,"@firebase/performance","fire-perf"),(0,Bt.Z)(xr,"@firebase/performance-compat","fire-perf-compat"),(0,Bt.Z)(xr,"@firebase/remote-config","fire-rc"),(0,Bt.Z)(xr,"@firebase/remote-config-compat","fire-rc-compat"),(0,Bt.Z)(xr,"@firebase/storage","fire-gcs"),(0,Bt.Z)(xr,"@firebase/storage-compat","fire-gcs-compat"),(0,Bt.Z)(xr,"@firebase/firestore","fire-fst"),(0,Bt.Z)(xr,"@firebase/firestore-compat","fire-fst-compat"),(0,Bt.Z)(xr,"fire-js","fire-js"),(0,Bt.Z)(xr,"firebase","fire-js-all"),xr),Lr=new Map,Mr=new Map;function Fr(e,t){try{e.container.addComponent(t)}catch(n){Ar.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Ur(e,t){e.container.addOrOverwriteComponent(t)}function jr(e){var t=e.name;if(Mr.has(t))return Ar.debug("There were multiple attempts to register component ".concat(t,".")),!1;Mr.set(t,e);var n,r=Wt(Lr.values());try{for(r.s();!(n=r.n()).done;){Fr(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Zr(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Vr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Or;Zr(e,t).clearInstance(n)}function qr(){Mr.clear()}var Br=(Sr={},(0,Bt.Z)(Sr,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),(0,Bt.Z)(Sr,"bad-app-name","Illegal App name: '{$appName}"),(0,Bt.Z)(Sr,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),(0,Bt.Z)(Sr,"app-deleted","Firebase App named '{$appName}' already deleted"),(0,Bt.Z)(Sr,"no-options","Need to provide options, when not being deployed to hosting via source."),(0,Bt.Z)(Sr,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),(0,Bt.Z)(Sr,"invalid-log-argument","First argument to `onLog` must be null or a function."),(0,Bt.Z)(Sr,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),(0,Bt.Z)(Sr,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),(0,Bt.Z)(Sr,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),(0,Bt.Z)(Sr,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Sr),zr=new In("app","Firebase",Br),Wr=function(){function e(t,n,r){var i=this;Ne(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $n("app",(function(){return i}),"PUBLIC"))}return(0,Pe.Z)(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw zr.create("app-deleted",{appName:this._name})}}]),e}(),Hr="9.13.0";function Kr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){var r=t;t={name:r}}var i=Object.assign({name:Or,automaticDataCollectionEnabled:!1},t),a=i.name;if("string"!==typeof a||!a)throw zr.create("bad-app-name",{appName:String(a)});if(n||(n=wn()),!n)throw zr.create("no-options");var o=Lr.get(a);if(o){if(Mn(n,o.options)&&Mn(i,o.config))return o;throw zr.create("duplicate-app",{appName:a})}var s,u=new nr(a),c=Wt(Mr.values());try{for(c.s();!(s=c.n()).done;){var l=s.value;u.addComponent(l)}}catch(f){c.e(f)}finally{c.f()}var h=new Wr(n,i,u);return Lr.set(a,h),h}function Gr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Or,t=Lr.get(e);if(!t&&e===Or)return Kr();if(!t)throw zr.create("no-app",{appName:e});return t}function Qr(){return Array.from(Lr.values())}function Yr(e){return $r.apply(this,arguments)}function $r(){return($r=$(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Lr.has(n)){e.next=6;break}return Lr.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xr(e,t,n){var r,i=null!==(r=Dr[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ar.warn(s.join(" "))}jr(new $n("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Jr(e,t){if(null!==e&&"function"!==typeof e)throw zr.create("invalid-log-argument");!function(e,t){var n,r=Wt(rr);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=ir[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var s=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:tr[n].toLowerCase(),message:s,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function ei(e){var t;t=e,rr.forEach((function(e){e.setLogLevel(t)}))}var ti="firebase-heartbeat-store",ni=null;function ri(){return ni||(ni=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=_r(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(_r(s.result),e.oldVersion,e.newVersion,_r(s.transaction))})),r&&s.addEventListener("blocked",(function(){return r()})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),u}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(ti)}}).catch((function(e){throw zr.create("idb-open",{originalErrorMessage:e.message})}))),ni}function ii(e){return ai.apply(this,arguments)}function ai(){return ai=$(Q().mark((function e(t){var n,r,i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ri();case 3:return r=e.sent,e.abrupt("return",r.transaction(ti).objectStore(ti).get(ui(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof Tn?Ar.warn(e.t0.message):(i=zr.create("idb-get",{originalErrorMessage:null===(n=e.t0)||void 0===n?void 0:n.message}),Ar.warn(i.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),ai.apply(this,arguments)}function oi(e,t){return si.apply(this,arguments)}function si(){return si=$(Q().mark((function e(t,n){var r,i,a,o,s;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ri();case 3:return i=e.sent,a=i.transaction(ti,"readwrite"),o=a.objectStore(ti),e.next=8,o.put(n,ui(t));case 8:return e.abrupt("return",a.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof Tn?Ar.warn(e.t0.message):(s=zr.create("idb-set",{originalErrorMessage:null===(r=e.t0)||void 0===r?void 0:r.message}),Ar.warn(s.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),si.apply(this,arguments)}function ui(e){return"".concat(e.name,"!").concat(e.options.appId)}var ci=function(){function e(t){var n=this;Ne(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new pi(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return(0,Pe.Z)(e,[{key:"triggerHeartbeat",value:function(){var e=$(Q().mark((function e(){var t,n,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=li(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=$(Q().mark((function e(){var t,n,r,i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=li(),n=hi(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=cn(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function li(){return(new Date).toISOString().substring(0,10)}function hi(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=Wt(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),vi(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),vi(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var s=o();if("break"===s)break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var fi,di,pi=function(){function e(t){Ne(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return(0,Pe.Z)(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=$(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(kn()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(Xd){t(Xd)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=$(Q().mark((function e(){var t;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,ii(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=$(Q().mark((function e(t){var n,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",oi(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=$(Q().mark((function e(t){var n,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",oi(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat((0,i.Z)(r.heartbeats),(0,i.Z)(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function vi(e){return cn(JSON.stringify({version:2,heartbeats:e})).length}fi="",jr(new $n("platform-logger",(function(e){return new Rr(e)}),"PRIVATE")),jr(new $n("heartbeat",(function(e){return new ci(e)}),"PRIVATE")),Xr(Nr,Pr,fi),Xr(Nr,Pr,"esm2017"),Xr("fire-js","");var yi=function(){function e(t,n){var r=this;Ne(this,e),this._delegate=t,this.firebase=n,Fr(t,new $n("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return(0,Pe.Z)(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Yr(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Or;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Or;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Fr(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Ur(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),mi=(di={},(0,Bt.Z)(di,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),(0,Bt.Z)(di,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),di),gi=new In("app-compat","Firebase",mi);var ki=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Kr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(An(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Xr,setLogLevel:ei,onLog:Jr,apps:null,SDK_VERSION:Hr,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(jr(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw gi.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&hn(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!An(n,e=e||Or))throw gi.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(yi);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){hn(n,e)},createSubscribe:qn,ErrorFactory:In,deepExtend:hn}),n}(),bi=new ur("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){bi.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var _i=self.firebase.SDK_VERSION;_i&&_i.indexOf("LITE")>=0&&bi.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var wi=ki;!function(e){Xr("@firebase/app-compat","0.1.38",e)}();wi.registerVersion("firebase","9.13.0","app-compat");var xi=n(878),Si=n(199),Ti=n(267);function Ii(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Gt(e)););return e}function Ei(){return Ei="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=Ii(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Ei.apply(this,arguments)}function Ci(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Ri;Object.create;var Ni="facebook.com",Pi="github.com",Ai="google.com",Oi="password",Di="twitter.com",Li="EMAIL_SIGNIN",Mi="PASSWORD_RESET",Fi="RECOVER_EMAIL",Ui="REVERT_SECOND_FACTOR_ADDITION",ji="VERIFY_AND_CHANGE_EMAIL",Zi="VERIFY_EMAIL";function Vi(){return(0,Bt.Z)({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var qi=function(){var e;return e={},(0,Bt.Z)(e,"admin-restricted-operation","This operation is restricted to administrators only."),(0,Bt.Z)(e,"argument-error",""),(0,Bt.Z)(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),(0,Bt.Z)(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),(0,Bt.Z)(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),(0,Bt.Z)(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),(0,Bt.Z)(e,"cordova-not-ready","Cordova framework is not ready."),(0,Bt.Z)(e,"cors-unsupported","This browser is not supported."),(0,Bt.Z)(e,"credential-already-in-use","This credential is already associated with a different user account."),(0,Bt.Z)(e,"custom-token-mismatch","The custom token corresponds to a different audience."),(0,Bt.Z)(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),(0,Bt.Z)(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),(0,Bt.Z)(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),(0,Bt.Z)(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),(0,Bt.Z)(e,"email-already-in-use","The email address is already in use by another account."),(0,Bt.Z)(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),(0,Bt.Z)(e,"expired-action-code","The action code has expired."),(0,Bt.Z)(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),(0,Bt.Z)(e,"internal-error","An internal AuthError has occurred."),(0,Bt.Z)(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),(0,Bt.Z)(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),(0,Bt.Z)(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),(0,Bt.Z)(e,"invalid-auth-event","An internal AuthError has occurred."),(0,Bt.Z)(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),(0,Bt.Z)(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),(0,Bt.Z)(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),(0,Bt.Z)(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),(0,Bt.Z)(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),(0,Bt.Z)(e,"invalid-email","The email address is badly formatted."),(0,Bt.Z)(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),(0,Bt.Z)(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),(0,Bt.Z)(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),(0,Bt.Z)(e,"invalid-credential","The supplied auth credential is malformed or has expired."),(0,Bt.Z)(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),(0,Bt.Z)(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),(0,Bt.Z)(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),(0,Bt.Z)(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),(0,Bt.Z)(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),(0,Bt.Z)(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),(0,Bt.Z)(e,"wrong-password","The password is invalid or the user does not have a password."),(0,Bt.Z)(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),(0,Bt.Z)(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),(0,Bt.Z)(e,"invalid-provider-id","The specified provider ID is invalid."),(0,Bt.Z)(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),(0,Bt.Z)(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),(0,Bt.Z)(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),(0,Bt.Z)(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),(0,Bt.Z)(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),(0,Bt.Z)(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),(0,Bt.Z)(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),(0,Bt.Z)(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),(0,Bt.Z)(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),(0,Bt.Z)(e,"missing-continue-uri","A continue URL must be provided in the request."),(0,Bt.Z)(e,"missing-iframe-start","An internal AuthError has occurred."),(0,Bt.Z)(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),(0,Bt.Z)(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),(0,Bt.Z)(e,"missing-multi-factor-info","No second factor identifier is provided."),(0,Bt.Z)(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),(0,Bt.Z)(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),(0,Bt.Z)(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),(0,Bt.Z)(e,"app-deleted","This instance of FirebaseApp has been deleted."),(0,Bt.Z)(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),(0,Bt.Z)(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),(0,Bt.Z)(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),(0,Bt.Z)(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),(0,Bt.Z)(e,"no-auth-event","An internal AuthError has occurred."),(0,Bt.Z)(e,"no-such-provider","User was not linked to an account with the given provider."),(0,Bt.Z)(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),(0,Bt.Z)(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),(0,Bt.Z)(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),(0,Bt.Z)(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),(0,Bt.Z)(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),(0,Bt.Z)(e,"provider-already-linked","User can only be linked to one identity for the given provider."),(0,Bt.Z)(e,"quota-exceeded","The project's quota for this operation has been exceeded."),(0,Bt.Z)(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),(0,Bt.Z)(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),(0,Bt.Z)(e,"rejected-credential","The request contains malformed or mismatching credentials."),(0,Bt.Z)(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),(0,Bt.Z)(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),(0,Bt.Z)(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),(0,Bt.Z)(e,"timeout","The operation has timed out."),(0,Bt.Z)(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),(0,Bt.Z)(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),(0,Bt.Z)(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),(0,Bt.Z)(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),(0,Bt.Z)(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),(0,Bt.Z)(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),(0,Bt.Z)(e,"unverified-email","The operation requires a verified email."),(0,Bt.Z)(e,"user-cancelled","The user did not grant your application the permissions it requested."),(0,Bt.Z)(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),(0,Bt.Z)(e,"user-disabled","The user account has been disabled by an administrator."),(0,Bt.Z)(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),(0,Bt.Z)(e,"user-signed-out",""),(0,Bt.Z)(e,"weak-password","The password must be 6 characters long or more."),(0,Bt.Z)(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),(0,Bt.Z)(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Bi=Vi,zi=new In("auth","Firebase",Vi()),Wi=new ur("@firebase/auth");function Hi(e){if(Wi.logLevel<=tr.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Wi.error.apply(Wi,["Auth (".concat(Hr,"): ").concat(e)].concat(n))}}function Ki(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw $i.apply(void 0,[e].concat(n))}function Gi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return $i.apply(void 0,[e].concat(n))}function Qi(e,t,n){var r=Object.assign(Object.assign({},Bi()),(0,Bt.Z)({},t,n));return new In("auth","Firebase",r).create(t,{appName:e.name})}function Yi(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Ki(e,"argument-error"),Qi(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function $i(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var a,o=n[0],s=(0,i.Z)(n.slice(1));return s[0]&&(s[0].appName=e.name),(a=e._errorFactory).create.apply(a,[o].concat((0,i.Z)(s)))}return zi.create.apply(zi,[e].concat(n))}function Xi(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw $i.apply(void 0,[t].concat(r))}}function Ji(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Hi(t),new Error(t)}function ea(e,t){e||Ji(t)}var ta=new Map;function na(e){ea(e instanceof Function,"Expected a class definition");var t=ta.get(e);return t?(ea(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ta.set(e,t),t)}function ra(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function ia(){return"http:"===aa()||"https:"===aa()}function aa(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var oa=function(){function e(t,n){Ne(this,e),this.shortDelay=t,this.longDelay=n,ea(n>t,"Short delay should be less than long delay!"),this.isMobile=dn()||yn()}return(0,Pe.Z)(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(ia()||vn()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function sa(e,t){ea(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var ua=function(){function e(){Ne(this,e)}return(0,Pe.Z)(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Ji("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Ji("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Ji("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),ca=(Ri={},(0,Bt.Z)(Ri,"CREDENTIAL_MISMATCH","custom-token-mismatch"),(0,Bt.Z)(Ri,"MISSING_CUSTOM_TOKEN","internal-error"),(0,Bt.Z)(Ri,"INVALID_IDENTIFIER","invalid-email"),(0,Bt.Z)(Ri,"MISSING_CONTINUE_URI","internal-error"),(0,Bt.Z)(Ri,"INVALID_PASSWORD","wrong-password"),(0,Bt.Z)(Ri,"MISSING_PASSWORD","internal-error"),(0,Bt.Z)(Ri,"EMAIL_EXISTS","email-already-in-use"),(0,Bt.Z)(Ri,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),(0,Bt.Z)(Ri,"INVALID_IDP_RESPONSE","invalid-credential"),(0,Bt.Z)(Ri,"INVALID_PENDING_TOKEN","invalid-credential"),(0,Bt.Z)(Ri,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),(0,Bt.Z)(Ri,"MISSING_REQ_TYPE","internal-error"),(0,Bt.Z)(Ri,"EMAIL_NOT_FOUND","user-not-found"),(0,Bt.Z)(Ri,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),(0,Bt.Z)(Ri,"EXPIRED_OOB_CODE","expired-action-code"),(0,Bt.Z)(Ri,"INVALID_OOB_CODE","invalid-action-code"),(0,Bt.Z)(Ri,"MISSING_OOB_CODE","internal-error"),(0,Bt.Z)(Ri,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),(0,Bt.Z)(Ri,"INVALID_ID_TOKEN","invalid-user-token"),(0,Bt.Z)(Ri,"TOKEN_EXPIRED","user-token-expired"),(0,Bt.Z)(Ri,"USER_NOT_FOUND","user-token-expired"),(0,Bt.Z)(Ri,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),(0,Bt.Z)(Ri,"INVALID_CODE","invalid-verification-code"),(0,Bt.Z)(Ri,"INVALID_SESSION_INFO","invalid-verification-id"),(0,Bt.Z)(Ri,"INVALID_TEMPORARY_PROOF","invalid-credential"),(0,Bt.Z)(Ri,"MISSING_SESSION_INFO","missing-verification-id"),(0,Bt.Z)(Ri,"SESSION_EXPIRED","code-expired"),(0,Bt.Z)(Ri,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),(0,Bt.Z)(Ri,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),(0,Bt.Z)(Ri,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),(0,Bt.Z)(Ri,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),(0,Bt.Z)(Ri,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),(0,Bt.Z)(Ri,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),(0,Bt.Z)(Ri,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),(0,Bt.Z)(Ri,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),(0,Bt.Z)(Ri,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),(0,Bt.Z)(Ri,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),(0,Bt.Z)(Ri,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Ri),la=new oa(3e4,6e4);function ha(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function fa(e,t,n,r){return da.apply(this,arguments)}function da(){return da=$(Q().mark((function e(t,n,r,i){var a,o=arguments;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",pa(t,a,$(Q().mark((function e(){var a,o,s,u;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),s=Un(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",ua.fetch()(ga(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),da.apply(this,arguments)}function pa(e,t,n){return va.apply(this,arguments)}function va(){return(va=$(Q().mark((function e(t,n,r){var i,o,s,u,c,l,h,f,d,p;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},ca),n),e.prev=2,o=new ka(t),e.next=6,Promise.race([r(),o.promise]);case 6:return s=e.sent,o.clearNetworkTimeout(),e.next=10,s.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw ba(t,"account-exists-with-different-credential",u);case 13:if(!s.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(c=s.ok?u.errorMessage:u.error.message,l=c.split(" : "),h=(0,a.Z)(l,2),f=h[0],d=h[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw ba(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw ba(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw ba(t,"user-disabled",u);case 29:if(p=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw Qi(t,p,d);case 34:Ki(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof Tn)){e.next=41;break}throw e.t0;case 41:Ki(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])})))).apply(this,arguments)}function ya(e,t,n,r){return ma.apply(this,arguments)}function ma(){return ma=$(Q().mark((function e(t,n,r,i){var a,o,s=arguments;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,fa(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Ki(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),ma.apply(this,arguments)}function ga(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?sa(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var ka=function(){function e(t){var n=this;Ne(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Gi(n.auth,"network-request-failed"))}),la.get())}))}return(0,Pe.Z)(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function ba(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Gi(e,t,r);return i.customData._tokenResponse=n,i}function _a(e,t){return wa.apply(this,arguments)}function wa(){return(wa=$(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fa(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xa(e,t){return Sa.apply(this,arguments)}function Sa(){return(Sa=$(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fa(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ta(e,t){return Ia.apply(this,arguments)}function Ia(){return(Ia=$(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fa(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ea(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Ca(){return Ca=$(Q().mark((function e(t){var n,r,i,a,o,s,u=arguments;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=Yn(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Xi((a=Na(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Ea(Ra(a.auth_time)),issuedAtTime:Ea(Ra(a.iat)),expirationTime:Ea(Ra(a.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Ca.apply(this,arguments)}function Ra(e){return 1e3*Number(e)}function Na(e){var t,n=e.split("."),r=(0,a.Z)(n,3),i=r[0],o=r[1],s=r[2];if(void 0===i||void 0===o||void 0===s)return Hi("JWT malformed, contained fewer than 3 sections"),null;try{var u=ln(o);return u?JSON.parse(u):(Hi("Failed to decode base64 JWT payload"),null)}catch(c){return Hi("Caught error parsing JWT payload as JSON",null===(t=c)||void 0===t?void 0:t.toString()),null}}function Pa(e,t){return Aa.apply(this,arguments)}function Aa(){return Aa=$(Q().mark((function e(t,n){var r=arguments;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Tn&&Oa(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Aa.apply(this,arguments)}function Oa(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Da=function(){function e(t){Ne(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return(0,Pe.Z)(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout($(Q().mark((function t(){return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=$(Q().mark((function e(){var t;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===(t=e.t0)||void 0===t?void 0:t.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),La=function(){function e(t,n){Ne(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return(0,Pe.Z)(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Ea(this.lastLoginAt),this.creationTime=Ea(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Ma(e){return Fa.apply(this,arguments)}function Fa(){return Fa=$(Q().mark((function e(t){var n,r,i,a,o,s,u,c,l,h,f;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Pa(t,Ta(r,{idToken:i}));case 6:Xi(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Za(o.providerUserInfo):[],u=ja(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===u||void 0===u?void 0:u.length),h=!!c&&l,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new La(o.createdAt,o.lastLoginAt),isAnonymous:h},Object.assign(t,f);case 17:case"end":return e.stop()}}),e)}))),Fa.apply(this,arguments)}function Ua(){return(Ua=$(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Yn(t),e.next=3,Ma(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ja(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat((0,i.Z)(n),(0,i.Z)(t))}function Za(e){return e.map((function(e){var t=e.providerId,n=Ci(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Va(e,t){return qa.apply(this,arguments)}function qa(){return(qa=$(Q().mark((function e(t,n){var r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pa(t,{},$(Q().mark((function e(){var r,i,a,o,s,u;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Un({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,s=ga(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",ua.fetch()(s,{method:"POST",headers:u,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ba=function(){function e(){Ne(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return(0,Pe.Z)(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Xi(e.idToken,"internal-error"),Xi("undefined"!==typeof e.idToken,"internal-error"),Xi("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Na(e);return Xi(t,"internal-error"),Xi("undefined"!==typeof t.exp,"internal-error"),Xi("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=$(Q().mark((function e(t){var n,r=arguments;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Xi(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=$(Q().mark((function e(t,n){var r,i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Va(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Ji("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Xi("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Xi("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Xi("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function za(e,t){Xi("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Wa=function(){function e(t){Ne(this,e);var n=t.uid,r=t.auth,a=t.stsTokenManager,o=Ci(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Da(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?(0,i.Z)(o.providerData):[],this.metadata=new La(o.createdAt||void 0,o.lastLoginAt||void 0)}return(0,Pe.Z)(e,[{key:"getIdToken",value:function(){var e=$(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pa(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Xi(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Ca.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Ua.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Xi(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Xi(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=$(Q().mark((function e(t){var n,r,i=arguments;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Ma(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=$(Q().mark((function e(){var t;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Pa(this,_a(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,c,l,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,y=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,_=n.isAnonymous,w=n.providerData,x=n.stsTokenManager;Xi(k&&x,t,"internal-error");var S=Ba.fromJSON(this.name,x);Xi("string"===typeof k,t,"internal-error"),za(h,t.name),za(f,t.name),Xi("boolean"===typeof b,t,"internal-error"),Xi("boolean"===typeof _,t,"internal-error"),za(d,t.name),za(p,t.name),za(v,t.name),za(y,t.name),za(m,t.name),za(g,t.name);var T=new e({uid:k,auth:t,email:f,emailVerified:b,displayName:h,isAnonymous:_,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:S,createdAt:m,lastLoginAt:g});return w&&Array.isArray(w)&&(T.providerData=w.map((function(e){return Object.assign({},e)}))),y&&(T._redirectEventId=y),T}},{key:"_fromIdTokenResponse",value:function(){var t=$(Q().mark((function t(n,r){var i,a,o,s=arguments;return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new Ba).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Ma(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Ha=function(){function e(){Ne(this,e),this.type="NONE",this.storage={}}return(0,Pe.Z)(e,[{key:"_isAvailable",value:function(){var e=$(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=$(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=$(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=$(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Ha.type="NONE";var Ka=Ha;function Ga(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Qa=function(){function e(t,n,r){Ne(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Ga(this.userKey,a.apiKey,o),this.fullPersistenceKey=Ga("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return(0,Pe.Z)(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=$(Q().mark((function e(){var t;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Wa._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=$(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=$(Q().mark((function t(n,r){var i,a,o,s,u,c,l,h,f,d,p,v=arguments;return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(na(Ka),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=$(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||na(Ka),s=Ga(i,n.config.apiKey,n.name),u=null,c=Wt(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return h=l.value,t.prev=14,t.next=17,h._get(s);case 17:if(!(f=t.sent)){t.next=23;break}return d=Wa._fromJSON(n,f),h!==o&&(u=d),o=h,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!u){t.next=44;break}return t.next=44,o._set(s,u.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=$(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Ya(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(eo(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if($a(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(no(t))return"Blackberry";if(ro(t))return"Webos";if(Xa(t))return"Safari";if((t.includes("chrome/")||Ja(t))&&!t.includes("edge/"))return"Chrome";if(to(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function $a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn();return/firefox\//i.test(e)}function Xa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Ja(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn();return/crios\//i.test(e)}function eo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn();return/iemobile/i.test(e)}function to(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn();return/android/i.test(e)}function no(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn();return/blackberry/i.test(e)}function ro(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn();return/webos/i.test(e)}function io(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ao(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn();return io(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function oo(){return mn()&&10===document.documentMode}function so(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn();return io(e)||to(e)||ro(e)||no(e)||/windows phone/i.test(e)||eo(e)}function uo(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ya(fn());break;case"Worker":t="".concat(Ya(fn()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Hr,"/").concat(r)}var co=function(){function e(t){Ne(this,e),this.auth=t,this.queue=[]}return(0,Pe.Z)(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=$(Q().mark((function e(t){var n,r,i,a,o,s,u,c;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:r=[],e.prev=3,i=Wt(this.queue),e.prev=5,i.s();case 7:if((a=i.n()).done){e.next=14;break}return o=a.value,e.next=11,o(t);case 11:o.onAbort&&r.push(o.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),r.reverse(),s=Wt(r);try{for(s.s();!(u=s.n()).done;){c=u.value;try{c()}catch(l){}}}catch(h){s.e(h)}finally{s.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===(n=e.t1)||void 0===n?void 0:n.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),lo=function(){function e(t,n,r){Ne(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fo(this),this.idTokenSubscription=new fo(this),this.beforeStateQueue=new co(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zi,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return(0,Pe.Z)(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=na(t)),this._initializationPromise=this.queue($(Q().mark((function r(){var i,a;return Q().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Qa.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=$(Q().mark((function e(){var t;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=$(Q().mark((function e(t){var n,r,i,a,o,s,u;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:u=e.sent,o&&o!==s||!(null===u||void 0===u?void 0:u.user)||(i=u.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return Xi(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=$(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=$(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ma(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=$(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=$(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Yn(t):null)&&Xi(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=$(Q().mark((function e(t){var n,r=this,i=arguments;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&Xi(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue($(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=$(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue($(Q().mark((function n(){return Q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(na(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new In("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=$(Q().mark((function e(t,n){var r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=$(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Xi(n=t&&na(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Qa.create(this,[na(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=$(Q().mark((function e(t){var n,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue($(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=$(Q().mark((function e(t){var n=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue($(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Xi(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=$(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Xi(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=uo(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=$(Q().mark((function e(){var t,n,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,Bt.Z)({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ho(e){return Yn(e)}var fo=function(){function e(t){var n=this;Ne(this,e),this.auth=t,this.observer=null,this.addObserver=qn((function(e){return n.observer=e}))}return(0,Pe.Z)(e,[{key:"next",get:function(){return Xi(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function po(e,t,n){var r=ho(e);Xi(r._canInitEmulator,r,"emulator-config-failed"),Xi(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),o=vo(t),s=function(e){var t=vo(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var o=i[1];return{host:o,port:yo(r.substr(o.length+1))}}var s=r.split(":"),u=(0,a.Z)(s,2);return{host:u[0],port:yo(u[1])}}(t),u=s.host,c=s.port,l=null===c?"":":".concat(c);r.config.emulator={url:"".concat(o,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function vo(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function yo(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var mo=function(){function e(t,n){Ne(this,e),this.providerId=t,this.signInMethod=n}return(0,Pe.Z)(e,[{key:"toJSON",value:function(){return Ji("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Ji("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Ji("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Ji("not implemented")}}]),e}();function go(e,t){return ko.apply(this,arguments)}function ko(){return(ko=$(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fa(t,"POST","/v1/accounts:resetPassword",ha(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bo(e,t){return _o.apply(this,arguments)}function _o(){return(_o=$(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fa(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wo(e,t){return xo.apply(this,arguments)}function xo(){return(xo=$(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fa(t,"POST","/v1/accounts:update",ha(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function So(e,t){return To.apply(this,arguments)}function To(){return(To=$(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ya(t,"POST","/v1/accounts:signInWithPassword",ha(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Io(e,t){return Eo.apply(this,arguments)}function Eo(){return(Eo=$(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fa(t,"POST","/v1/accounts:sendOobCode",ha(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Co(e,t){return Ro.apply(this,arguments)}function Ro(){return(Ro=$(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Io(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function No(e,t){return Po.apply(this,arguments)}function Po(){return(Po=$(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Io(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ao(e,t){return Oo.apply(this,arguments)}function Oo(){return(Oo=$(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Io(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Do(e,t){return Lo.apply(this,arguments)}function Lo(){return(Lo=$(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Io(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mo(e,t){return Fo.apply(this,arguments)}function Fo(){return(Fo=$(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ya(t,"POST","/v1/accounts:signInWithEmailLink",ha(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Uo(e,t){return jo.apply(this,arguments)}function jo(){return(jo=$(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ya(t,"POST","/v1/accounts:signInWithEmailLink",ha(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Zo=function(e){Kt(n,e);var t=$t(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Ne(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return(0,Pe.Z)(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=$(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",So(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Mo(t,{email:this._email,oobCode:this._password}));case 5:Ki(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=$(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",bo(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Uo(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Ki(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(mo);function Vo(e,t){return qo.apply(this,arguments)}function qo(){return(qo=$(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ya(t,"POST","/v1/accounts:signInWithIdp",ha(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Bo=function(e){Kt(n,e);var t=$t(n);function n(){var e;return Ne(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return(0,Pe.Z)(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Vo(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Vo(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Vo(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Un(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ki("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Ci(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(mo);function zo(e,t){return Wo.apply(this,arguments)}function Wo(){return(Wo=$(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fa(t,"POST","/v1/accounts:sendVerificationCode",ha(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ho(){return(Ho=$(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ya(t,"POST","/v1/accounts:signInWithPhoneNumber",ha(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ko(){return(Ko=$(Q().mark((function e(t,n){var r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ya(t,"POST","/v1/accounts:signInWithPhoneNumber",ha(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw ba(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Go=(0,Bt.Z)({},"USER_NOT_FOUND","user-not-found");function Qo(){return(Qo=$(Q().mark((function e(t,n){var r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",ya(t,"POST","/v1/accounts:signInWithPhoneNumber",ha(t,r),Go));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Yo=function(e){Kt(n,e);var t=$t(n);function n(e){var r;return Ne(this,n),(r=t.call(this,"phone","phone")).params=e,r}return(0,Pe.Z)(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Ho.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Ko.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Qo.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(mo);var $o=function(){function e(t){var n,r,i,a,o,s;Ne(this,e);var u=jn(Zn(t)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);Xi(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return(0,Pe.Z)(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=jn(Zn(e)).link,n=t?jn(Zn(t)).deep_link_id:null,r=jn(Zn(e)).deep_link_id;return(r?jn(Zn(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch($D){return null}}}]),e}();var Xo=function(){function e(){Ne(this,e),this.providerId=e.PROVIDER_ID}return(0,Pe.Z)(e,null,[{key:"credential",value:function(e,t){return Zo._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=$o.parseLink(t);return Xi(n,"argument-error"),Zo._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Xo.PROVIDER_ID="password",Xo.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Xo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Jo=function(){function e(t){Ne(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return(0,Pe.Z)(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),es=function(e){Kt(n,e);var t=$t(n);function n(){var e;return Ne(this,n),(e=t.apply(this,arguments)).scopes=[],e}return(0,Pe.Z)(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return(0,i.Z)(this.scopes)}}]),n}(Jo),ts=function(e){Kt(n,e);var t=$t(n);function n(){return Ne(this,n),t.apply(this,arguments)}return(0,Pe.Z)(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Xi(e.idToken||e.accessToken,"argument-error"),Bo._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Xi("providerId"in t&&"signInMethod"in t,"argument-error"),Bo._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,s=t.nonce,u=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!u)return null;try{return new n(u)._credential({idToken:r,accessToken:i,nonce:s,pendingToken:o})}catch(c){return null}}}]),n}(es),ns=function(e){Kt(n,e);var t=$t(n);function n(){return Ne(this,n),t.call(this,"facebook.com")}return(0,Pe.Z)(n,null,[{key:"credential",value:function(e){return Bo._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch($D){return null}}}]),n}(es);ns.FACEBOOK_SIGN_IN_METHOD="facebook.com",ns.PROVIDER_ID="facebook.com";var rs=function(e){Kt(n,e);var t=$t(n);function n(){var e;return Ne(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return(0,Pe.Z)(n,null,[{key:"credential",value:function(e,t){return Bo._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch($D){return null}}}]),n}(es);rs.GOOGLE_SIGN_IN_METHOD="google.com",rs.PROVIDER_ID="google.com";var is=function(e){Kt(n,e);var t=$t(n);function n(){return Ne(this,n),t.call(this,"github.com")}return(0,Pe.Z)(n,null,[{key:"credential",value:function(e){return Bo._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch($D){return null}}}]),n}(es);is.GITHUB_SIGN_IN_METHOD="github.com",is.PROVIDER_ID="github.com";var as=function(e){Kt(n,e);var t=$t(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return(0,Pe.Z)(n,[{key:"_getIdTokenResponse",value:function(e){return Vo(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Vo(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Vo(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(mo),os=function(e){Kt(n,e);var t=$t(n);function n(e){return Ne(this,n),Xi(e.startsWith("saml."),"argument-error"),t.call(this,e)}return(0,Pe.Z)(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=as.fromJSON(e);return Xi(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return as._create(r,n)}catch(i){return null}}}]),n}(Jo),ss=function(e){Kt(n,e);var t=$t(n);function n(){return Ne(this,n),t.call(this,"twitter.com")}return(0,Pe.Z)(n,null,[{key:"credential",value:function(e,t){return Bo._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch($D){return null}}}]),n}(es);function us(e,t){return cs.apply(this,arguments)}function cs(){return(cs=$(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ya(t,"POST","/v1/accounts:signUp",ha(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}ss.TWITTER_SIGN_IN_METHOD="twitter.com",ss.PROVIDER_ID="twitter.com";var ls=function(){function e(t){Ne(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return(0,Pe.Z)(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=$(Q().mark((function t(n,r,i){var a,o,s,u,c=arguments;return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Wa._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,s=hs(i),u=new e({user:o,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=$(Q().mark((function t(n,r,i){var a;return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=hs(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function hs(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function fs(){return fs=$(Q().mark((function e(t){var n,r,i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ho(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new ls({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,us(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,ls._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),fs.apply(this,arguments)}var ds=function(e){Kt(n,e);var t=$t(n);function n(e,r,i,a){var o,s;return Ne(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf((0,x.Z)(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return(0,Pe.Z)(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Tn);function ps(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw ds._fromErrorAndOperation(e,n,t,r);throw n}))}function vs(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function ys(e,t){return ms.apply(this,arguments)}function ms(){return ms=$(Q().mark((function e(t,n){var r,i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Yn(t),e.next=3,bs(!0,r,n);case 3:return e.t0=xa,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=vs(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),ms.apply(this,arguments)}function gs(e,t){return ks.apply(this,arguments)}function ks(){return ks=$(Q().mark((function e(t,n){var r,i,a=arguments;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Pa,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",ls._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),ks.apply(this,arguments)}function bs(e,t,n){return _s.apply(this,arguments)}function _s(){return(_s=$(Q().mark((function e(t,n,r){var i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ma(n);case 2:i=vs(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Xi(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ws(e,t){return xs.apply(this,arguments)}function xs(){return xs=$(Q().mark((function e(t,n){var r,i,a,o,s,u,c,l=arguments;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],a=t.auth,o="reauthenticate",e.prev=3,e.next=6,Pa(t,ps(a,o,n,t),r);case 6:return Xi((s=e.sent).idToken,a,"internal-error"),Xi(u=Na(s.idToken),a,"internal-error"),c=u.sub,Xi(t.uid===c,a,"user-mismatch"),e.abrupt("return",ls._forOperation(t,o,s));case 15:throw e.prev=15,e.t0=e.catch(3),(null===(i=e.t0)||void 0===i?void 0:i.code)==="auth/".concat("user-not-found")&&Ki(a,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),xs.apply(this,arguments)}function Ss(e,t){return Ts.apply(this,arguments)}function Ts(){return Ts=$(Q().mark((function e(t,n){var r,i,a,o,s=arguments;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,ps(t,i,n);case 4:return a=e.sent,e.next=7,ls._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Ts.apply(this,arguments)}function Is(e,t){return Es.apply(this,arguments)}function Es(){return(Es=$(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ss(ho(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cs(e,t){return Rs.apply(this,arguments)}function Rs(){return(Rs=$(Q().mark((function e(t,n){var r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Yn(t),e.next=3,bs(!1,r,n.providerId);case 3:return e.abrupt("return",gs(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ns(e,t){return Ps.apply(this,arguments)}function Ps(){return(Ps=$(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ws(Yn(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function As(e,t){return Os.apply(this,arguments)}function Os(){return(Os=$(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ya(t,"POST","/v1/accounts:signInWithCustomToken",ha(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ds(){return(Ds=$(Q().mark((function e(t,n){var r,i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ho(t),e.next=3,As(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,ls._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ls=function(){function e(t,n){Ne(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return(0,Pe.Z)(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Ms._fromServerResponse(e,t):Ki(e,"internal-error")}}]),e}(),Ms=function(e){Kt(n,e);var t=$t(n);function n(e){var r;return Ne(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return(0,Pe.Z)(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Ls);function Fs(e,t,n){var r;Xi((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Xi("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Xi(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Xi(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Us(){return(Us=$(Q().mark((function e(t,n,r){var i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Yn(t),a={requestType:"PASSWORD_RESET",email:n},r&&Fs(i,a,r),e.next=5,No(i,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function js(){return(js=$(Q().mark((function e(t,n,r){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,go(Yn(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zs(){return(Zs=$(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wo(Yn(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vs(e,t){return qs.apply(this,arguments)}function qs(){return(qs=$(Q().mark((function e(t,n){var r,i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Yn(t),e.next=3,go(r,{oobCode:n});case 3:i=e.sent,Xi(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Xi(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Xi(i.mfaInfo,r,"internal-error");case 13:Xi(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=Ls._fromServerResponse(ho(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bs(){return(Bs=$(Q().mark((function e(t,n){var r,i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vs(Yn(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zs(e,t,n){return Ws.apply(this,arguments)}function Ws(){return(Ws=$(Q().mark((function e(t,n,r){var i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ho(t),e.next=3,us(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,ls._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hs(){return(Hs=$(Q().mark((function e(t,n,r){var i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Yn(t),a={requestType:"EMAIL_SIGNIN",email:n},Xi(r.handleCodeInApp,i,"argument-error"),r&&Fs(i,a,r),e.next=6,Ao(i,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ks(){return(Ks=$(Q().mark((function e(t,n,r){var i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Yn(t),Xi((a=Xo.credentialWithLink(n,r||ra()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Is(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gs(e,t){return Qs.apply(this,arguments)}function Qs(){return(Qs=$(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fa(t,"POST","/v1/accounts:createAuthUri",ha(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ys(){return(Ys=$(Q().mark((function e(t,n){var r,i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ia()?ra():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Gs(Yn(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $s(){return($s=$(Q().mark((function e(t,n){var r,i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Yn(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Fs(r.auth,a,n),e.next=8,Co(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xs(){return(Xs=$(Q().mark((function e(t,n,r){var i,a,o,s;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Yn(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Fs(i.auth,o,r),e.next=8,Do(i.auth,o);case 8:if(s=e.sent,s.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Js(e,t){return eu.apply(this,arguments)}function eu(){return(eu=$(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fa(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tu(){return(tu=$(Q().mark((function e(t,n){var r,i,a,o,s,u,c;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=Yn(t),e.next=6,a.getIdToken();case 6:return o=e.sent,s={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Pa(a,Js(a.auth,s));case 10:return u=e.sent,a.displayName=u.displayName||null,a.photoURL=u.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(u);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nu(e,t,n){return ru.apply(this,arguments)}function ru(){return(ru=$(Q().mark((function e(t,n,r){var i,a,o,s;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Pa(t,bo(i,o));case 9:return s=e.sent,e.next=12,t._updateTokensIfNecessary(s,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var iu=(0,Pe.Z)((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Ne(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),au=function(e){Kt(n,e);var t=$t(n);function n(e,r,i,a){var o;return Ne(this,n),(o=t.call(this,e,r,i)).username=a,o}return(0,Pe.Z)(n)}(iu),ou=function(e){Kt(n,e);var t=$t(n);function n(e,r){return Ne(this,n),t.call(this,e,"facebook.com",r)}return(0,Pe.Z)(n)}(iu),su=function(e){Kt(n,e);var t=$t(n);function n(e,r){return Ne(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return(0,Pe.Z)(n)}(au),uu=function(e){Kt(n,e);var t=$t(n);function n(e,r){return Ne(this,n),t.call(this,e,"google.com",r)}return(0,Pe.Z)(n)}(iu),cu=function(e){Kt(n,e);var t=$t(n);function n(e,r,i){return Ne(this,n),t.call(this,e,"twitter.com",r,i)}return(0,Pe.Z)(n)}(au);function lu(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Na(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new iu(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new ou(a,i);case"github.com":return new su(a,i);case"google.com":return new uu(a,i);case"twitter.com":return new cu(a,i,e.screenName||null);case"custom":case"anonymous":return new iu(a,null);default:return new iu(a,r,i)}}(n)}var hu=function(){function e(t,n,r){Ne(this,e),this.type=t,this.credential=n,this.auth=r}return(0,Pe.Z)(e,[{key:"toJSON",value:function(){var e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:(0,Bt.Z)({},e,this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),fu=function(){function e(t,n,r){Ne(this,e),this.session=t,this.hints=n,this.signInResolver=r}return(0,Pe.Z)(e,[{key:"resolveSignIn",value:function(){var e=$(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=ho(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return Ls._fromServerResponse(r,e)}));Xi(i.mfaPendingCredential,r,"internal-error");var o=hu._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=$(Q().mark((function e(t){var a,s,u;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,s=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,ls._fromIdTokenResponse(r,n.operationType,s);case 11:return u=e.sent,e.next=14,r._updateCurrentUser(u.user);case 14:return e.abrupt("return",u);case 15:return Xi(n.user,r,"internal-error"),e.abrupt("return",ls._forOperation(n.user,n.operationType,s));case 17:Ki(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function du(e,t){return fa(e,"POST","/v2/accounts/mfaEnrollment:start",ha(e,t))}function pu(e,t){return fa(e,"POST","/v2/accounts/mfaEnrollment:withdraw",ha(e,t))}var vu=function(){function e(t){var n=this;Ne(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Ls._fromServerResponse(t.auth,e)})))}))}return(0,Pe.Z)(e,[{key:"getSession",value:function(){var e=$(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=hu,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user.auth,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=$(Q().mark((function e(t,n){var r,i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Pa(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=$(Q().mark((function e(t){var n,r,i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return i=e.sent,e.next=6,Pa(this.user,pu(this.user.auth,{idToken:i,mfaEnrollmentId:r}));case 6:return a=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==r})),e.next=10,this.user._updateTokensIfNecessary(a);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),yu=new WeakMap;var mu="__sak",gu=function(){function e(t,n){Ne(this,e),this.storageRetriever=t,this.type=n}return(0,Pe.Z)(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(mu,"1"),this.storage.removeItem(mu),Promise.resolve(!0)):Promise.resolve(!1)}catch($D){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var ku=function(e){Kt(n,e);var t=$t(n);function n(){var e;return Ne(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=fn();return Xa(e)||io(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=so(),e._shouldAllowMigration=!0,e}return(0,Pe.Z)(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);oo()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=$(Q().mark((function e(t,r){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ei(Gt(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=$(Q().mark((function e(t){var r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ei(Gt(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=$(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ei(Gt(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(gu);ku.type="LOCAL";var bu=ku,_u=function(e){Kt(n,e);var t=$t(n);function n(){return Ne(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return(0,Pe.Z)(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(gu);_u.type="SESSION";var wu=_u;function xu(e){return Promise.all(e.map(function(){var e=$(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Su=function(){function e(t){Ne(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return(0,Pe.Z)(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=$(Q().mark((function e(t){var n,r,i,a,o,s,u,c;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(s=this.handlersMap[a])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),u=Array.from(s).map(function(){var e=$(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,xu(u);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Tu(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Su.receivers=[];var Iu=function(){function e(t){Ne(this,e),this.target=t,this.handlers=new Set}return(0,Pe.Z)(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=$(Q().mark((function e(t,n){var r,i,a,o,s=this,u=arguments;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=Tu("",20);i.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),i.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Eu(){return window}function Cu(){return"undefined"!==typeof Eu().WorkerGlobalScope&&"function"===typeof Eu().importScripts}function Ru(){return Nu.apply(this,arguments)}function Nu(){return(Nu=$(Q().mark((function e(){var t;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Pu(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Au="firebaseLocalStorageDb",Ou="firebaseLocalStorage",Du="fbase_key",Lu=function(){function e(t){Ne(this,e),this.request=t}return(0,Pe.Z)(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Mu(e,t){return e.transaction([Ou],t?"readwrite":"readonly").objectStore(Ou)}function Fu(){var e=indexedDB.deleteDatabase(Au);return new Lu(e).toPromise()}function Uu(){var e=indexedDB.open(Au,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Ou,{keyPath:Du})}catch(r){n(r)}})),e.addEventListener("success",$(Q().mark((function n(){var r;return Q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Ou)){n.next=12;break}return r.close(),n.next=5,Fu();case 5:return n.t0=t,n.next=8,Uu();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function ju(e,t,n){return Zu.apply(this,arguments)}function Zu(){return Zu=$(Q().mark((function e(t,n,r){var i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Mu(t,!0).put((i={},(0,Bt.Z)(i,Du,n),(0,Bt.Z)(i,"value",r),i)),e.abrupt("return",new Lu(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Zu.apply(this,arguments)}function Vu(e,t){return qu.apply(this,arguments)}function qu(){return qu=$(Q().mark((function e(t,n){var r,i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Mu(t,!1).get(n),e.next=3,new Lu(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),qu.apply(this,arguments)}function Bu(e,t){var n=Mu(e,!0).delete(t);return new Lu(n).toPromise()}var zu=function(){function e(){Ne(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return(0,Pe.Z)(e,[{key:"_openDb",value:function(){var e=$(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Uu();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=$(Q().mark((function e(t){var n,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=$(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cu()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=$(Q().mark((function e(){var t=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Su._getInstance(Cu()?self:null),this.receiver._subscribe("keyChanged",function(){var e=$(Q().mark((function e(n,r){var i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=$(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=$(Q().mark((function e(){var t,n,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ru();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Iu(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=$(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Pu()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=$(Q().mark((function e(){var t;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Uu();case 5:return t=e.sent,e.next=8,ju(t,mu,"1");case 8:return e.next=10,Bu(t,mu);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=$(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=$(Q().mark((function e(t,n){var r=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite($(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return ju(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=$(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Vu(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=$(Q().mark((function e(t){var n=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite($(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Bu(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=$(Q().mark((function e(){var t,n,r,i,a,o,s,u,c,l,h;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Mu(e,!1).getAll();return new Lu(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=Wt(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(f){i.e(f)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)h=l[c],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval($(Q().mark((function t(){return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();zu.type="LOCAL";var Wu=zu;function Hu(e,t){return fa(e,"POST","/v2/accounts/mfaSignIn:start",ha(e,t))}function Ku(e){return Gu.apply(this,arguments)}function Gu(){return(Gu=$(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fa(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qu(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Gi("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Yu(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var $u=1e12,Xu=function(){function e(t){Ne(this,e),this.auth=t,this.counter=$u,this._widgets=new Map}return(0,Pe.Z)(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Ju(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||$u;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||$u;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=$(Q().mark((function e(t){var n,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||$u,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Ju=function(){function e(t,n,r){var i=this;Ne(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Xi(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return(0,Pe.Z)(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var ec=Yu("rcb"),tc=new oa(3e4,6e4),nc="https://www.google.com/recaptcha/api.js?",rc=function(){function e(){var t;Ne(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=Eu().grecaptcha)||void 0===t?void 0:t.render)}return(0,Pe.Z)(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Xi(ic(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Eu().grecaptcha):new Promise((function(r,i){var a=Eu().setTimeout((function(){i(Gi(e,"network-request-failed"))}),tc.get());Eu()[ec]=function(){Eu().clearTimeout(a),delete Eu()[ec];var o=Eu().grecaptcha;if(o){var s=o.render;o.render=function(e,n){var r=s(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Gi(e,"internal-error"))},Qu("".concat(nc,"?").concat(Un({onload:ec,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Gi(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=Eu().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function ic(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var ac=function(){function e(){Ne(this,e)}return(0,Pe.Z)(e,[{key:"load",value:function(){var e=$(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Xu(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),oc="recaptcha",sc={theme:"light",type:"image"},uc=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},sc),r=arguments.length>2?arguments[2]:void 0;Ne(this,e),this.parameters=n,this.type=oc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ho(r),this.isInvisible="invisible"===this.parameters.size,Xi("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;Xi(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ac:new rc,this.validateStartingState()}return(0,Pe.Z)(e,[{key:"verify",value:function(){var e=$(Q().mark((function e(){var t,n,r,i=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Xi(!this.parameters.sitekey,this.auth,"argument-error"),Xi(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Xi("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Eu()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Xi(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=$(Q().mark((function e(){var t,n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=$(Q().mark((function e(){var t;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Xi(ia()&&!Cu(),this.auth,"internal-error"),e.next=3,cc();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Ku(this.auth);case 8:Xi(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Xi(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function cc(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var lc=function(){function e(t,n){Ne(this,e),this.verificationId=t,this.onConfirmation=n}return(0,Pe.Z)(e,[{key:"confirm",value:function(e){var t=Yo._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function hc(){return(hc=$(Q().mark((function e(t,n,r){var i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ho(t),e.next=3,vc(i,n,Yn(r));case 3:return a=e.sent,e.abrupt("return",new lc(a,(function(e){return Is(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fc(e,t,n){return dc.apply(this,arguments)}function dc(){return(dc=$(Q().mark((function e(t,n,r){var i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Yn(t),e.next=3,bs(!1,i,"phone");case 3:return e.next=5,vc(i.auth,n,Yn(r));case 5:return a=e.sent,e.abrupt("return",new lc(a,(function(e){return Cs(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pc(){return(pc=$(Q().mark((function e(t,n,r){var i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Yn(t),e.next=3,vc(i.auth,n,Yn(r));case 3:return a=e.sent,e.abrupt("return",new lc(a,(function(e){return Ns(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vc(e,t,n){return yc.apply(this,arguments)}function yc(){return yc=$(Q().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Xi("string"===typeof a,t,"argument-error"),Xi(r.type===oc,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return Xi("enroll"===s.type,t,"internal-error"),e.next=13,du(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return Xi("signin"===s.type,t,"internal-error"),Xi(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Hu(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,zo(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return h=e.sent,f=h.sessionInfo,e.abrupt("return",f);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),yc.apply(this,arguments)}function mc(){return(mc=$(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gs(Yn(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var gc=function(){function e(t){Ne(this,e),this.providerId=e.PROVIDER_ID,this.auth=ho(t)}return(0,Pe.Z)(e,[{key:"verifyPhoneNumber",value:function(e,t){return vc(this.auth,e,Yn(t))}}],[{key:"credential",value:function(e,t){return Yo._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Yo._fromTokenResponse(n,r):null}}]),e}();function kc(e,t){return t?na(t):(Xi(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}gc.PROVIDER_ID="phone",gc.PHONE_SIGN_IN_METHOD="phone";var bc=function(e){Kt(n,e);var t=$t(n);function n(e){var r;return Ne(this,n),(r=t.call(this,"custom","custom")).params=e,r}return(0,Pe.Z)(n,[{key:"_getIdTokenResponse",value:function(e){return Vo(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Vo(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Vo(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(mo);function _c(e){return Ss(e.auth,new bc(e),e.bypassAuthState)}function wc(e){var t=e.auth,n=e.user;return Xi(n,t,"internal-error"),ws(n,new bc(e),e.bypassAuthState)}function xc(e){return Sc.apply(this,arguments)}function Sc(){return(Sc=$(Q().mark((function e(t){var n,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Xi(r=t.user,n,"internal-error"),e.abrupt("return",gs(r,new bc(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Tc=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Ne(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return(0,Pe.Z)(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=$(Q().mark((function t(n,r){return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=$(Q().mark((function e(t){var n,r,i,a,o,s,u;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _c;case"linkViaPopup":case"linkViaRedirect":return xc;case"reauthViaPopup":case"reauthViaRedirect":return wc;default:Ki(this.auth,"internal-error")}}},{key:"resolve",value:function(e){ea(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){ea(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Ic=new oa(2e3,1e4);function Ec(e,t,n){return Cc.apply(this,arguments)}function Cc(){return(Cc=$(Q().mark((function e(t,n,r){var i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ho(t),Yi(t,n,Jo),a=kc(i,r),o=new Ac(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rc(){return(Rc=$(Q().mark((function e(t,n,r){var i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Yi((i=Yn(t)).auth,n,Jo),a=kc(i.auth,r),o=new Ac(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nc(e,t,n){return Pc.apply(this,arguments)}function Pc(){return(Pc=$(Q().mark((function e(t,n,r){var i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Yi((i=Yn(t)).auth,n,Jo),a=kc(i.auth,r),o=new Ac(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ac=function(e){Kt(n,e);var t=$t(n);function n(e,r,i,a,o){var s;return Ne(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=(0,x.Z)(s),s}return(0,Pe.Z)(n,[{key:"executeNotNull",value:function(){var e=$(Q().mark((function e(){var t;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Xi(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=$(Q().mark((function e(){var t,n=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ea(1===this.filter.length,"Popup operations only handle one event"),t=Tu(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Gi(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Gi(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Gi(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Ic.get())}()}}]),n}(Tc);Ac.currentPopupAction=null;var Oc=new Map,Dc=function(e){Kt(n,e);var t=$t(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Ne(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return(0,Pe.Z)(n,[{key:"execute",value:function(){var e=$(Q().mark((function e(){var t,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Oc.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Lc(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Ei(Gt(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Oc.set(this.auth._key(),t);case 21:return this.bypassAuthState||Oc.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=$(Q().mark((function e(t){var r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Ei(Gt(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Ei(Gt(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=$(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Tc);function Lc(e,t){return Mc.apply(this,arguments)}function Mc(){return(Mc=$(Q().mark((function e(t,n){var r,i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vc(n),i=Zc(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fc(e,t){return Uc.apply(this,arguments)}function Uc(){return(Uc=$(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zc(t)._set(Vc(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jc(e,t){Oc.set(e._key(),t)}function Zc(e){return na(e._redirectPersistence)}function Vc(e){return Ga("pendingRedirect",e.config.apiKey,e.name)}function qc(e,t,n){return function(e,t,n){return Bc.apply(this,arguments)}(e,t,n)}function Bc(){return(Bc=$(Q().mark((function e(t,n,r){var i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ho(t),Yi(t,n,Jo),a=kc(i,r),e.next=5,Fc(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zc(e,t,n){return function(e,t,n){return Wc.apply(this,arguments)}(e,t,n)}function Wc(){return(Wc=$(Q().mark((function e(t,n,r){var i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Yi((i=Yn(t)).auth,n,Jo),a=kc(i.auth,r),e.next=5,Fc(a,i.auth);case 5:return e.next=7,Xc(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hc(e,t,n){return function(e,t,n){return Kc.apply(this,arguments)}(e,t,n)}function Kc(){return(Kc=$(Q().mark((function e(t,n,r){var i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Yi((i=Yn(t)).auth,n,Jo),a=kc(i.auth,r),e.next=5,bs(!1,i,n.providerId);case 5:return e.next=7,Fc(a,i.auth);case 7:return e.next=9,Xc(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gc(e,t){return Qc.apply(this,arguments)}function Qc(){return(Qc=$(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ho(t)._initializationPromise;case 2:return e.abrupt("return",Yc(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yc(e,t){return $c.apply(this,arguments)}function $c(){return $c=$(Q().mark((function e(t,n){var r,i,a,o,s,u=arguments;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=ho(t),a=kc(i,n),o=new Dc(i,a,r),e.next=6,o.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),$c.apply(this,arguments)}function Xc(e){return Jc.apply(this,arguments)}function Jc(){return(Jc=$(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Tu("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var el=function(){function e(t){Ne(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return(0,Pe.Z)(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nl(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!nl(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Gi(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(tl(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(tl(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function tl(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function nl(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function rl(e){return il.apply(this,arguments)}function il(){return il=$(Q().mark((function e(t){var n,r=arguments;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",fa(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),il.apply(this,arguments)}var al=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ol=/^https?/;function sl(){return(sl=$(Q().mark((function e(t){var n,r,i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,rl(t);case 4:n=e.sent,r=n.authorizedDomains,i=Wt(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!ul(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Ki(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function ul(e){var t=ra(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!ol.test(r))return!1;if(al.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var cl=new oa(3e4,6e4);function ll(){var e=Eu().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=(0,i.Z)(e.H[r].L),e.CP)for(var a=0;a<e.CP.length;a++)e.CP[a]=null}}var hl=null;function fl(e){return hl=hl||function(e){return new Promise((function(t,n){var r,i,a;function o(){ll(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){ll(),n(Gi(e,"network-request-failed"))},timeout:cl.get()})}if(null===(i=null===(r=Eu().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Eu().gapi)||void 0===a?void 0:a.load)){var s=Yu("iframefcb");return Eu()[s]=function(){gapi.load?o():n(Gi(e,"network-request-failed"))},Qu("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw hl=null,e}))}(e),hl}var dl=new oa(5e3,15e3),pl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yl(e){var t=e.config;Xi(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?sa(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Hr},i=vl.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Un(r).slice(1))}function ml(e){return gl.apply(this,arguments)}function gl(){return gl=$(Q().mark((function e(t){var n,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fl(t);case 2:return n=e.sent,Xi(r=Eu().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:yl(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pl,dontclear:!0},(function(e){return new Promise(function(){var n=$(Q().mark((function n(r,i){var a,o,s;return Q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){Eu().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Gi(t,"network-request-failed"),o=Eu().setTimeout((function(){i(a)}),dl.get()),e.ping(s).then(s,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),gl.apply(this,arguments)}var kl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},bl="_blank",_l="http://localhost",wl=function(){function e(t){Ne(this,e),this.window=t,this.associatedEvent=null}return(0,Pe.Z)(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function xl(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",c=Object.assign(Object.assign({},kl),{width:r.toString(),height:i.toString(),top:o,left:s}),l=fn().toLowerCase();n&&(u=Ja(l)?bl:n),$a(l)&&(t=t||_l,c.scrollbars="yes");var h=Object.entries(c).reduce((function(e,t){var n=(0,a.Z)(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(ao(l)&&"_self"!==u)return Sl(t||"",u),new wl(null);var f=window.open(t||"",u,h);Xi(f,e,"popup-blocked");try{f.focus()}catch(d){}return new wl(f)}function Sl(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Tl="__/auth/handler",Il="emulator/auth/handler";function El(e,t,n,r,i,o){Xi(e.config.authDomain,e,"auth-domain-config-required"),Xi(e.config.apiKey,e,"invalid-api-key");var s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Hr,eventId:i};if(t instanceof Jo){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",Dn(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,c=Object.entries(o||{});u<c.length;u++){var l=(0,a.Z)(c[u],2),h=l[0],f=l[1];s[h]=f}}if(t instanceof es){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(s.scopes=d.join(","))}e.tenantId&&(s.tid=e.tenantId);for(var p=s,v=0,y=Object.keys(p);v<y.length;v++){var m=y[v];void 0===p[m]&&delete p[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Tl);return sa(t,Il)}(e),"?").concat(Un(p).slice(1))}var Cl="webStorageSupport",Rl=function(){function e(){Ne(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wu,this._completeRedirectFn=Yc,this._overrideRedirectResult=jc}return(0,Pe.Z)(e,[{key:"_openPopup",value:function(){var e=$(Q().mark((function e(t,n,r,i){var a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ea(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=El(t,n,r,ra(),i),e.abrupt("return",xl(t,o,Tu()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=$(Q().mark((function e(t,n,r,i){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=El(t,n,r,ra(),i),Eu().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(ea(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=$(Q().mark((function e(t){var n,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ml(t);case 2:return n=e.sent,r=new el(t),n.register("authEvent",(function(e){return Xi(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Cl,{type:Cl},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Ki(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return sl.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return so()||Xa()||io()}}]),e}(),Nl=Rl,Pl=function(e){Kt(n,e);var t=$t(n);function n(e){var r;return Ne(this,n),(r=t.call(this,"phone")).credential=e,r}return(0,Pe.Z)(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return fa(e,"POST","/v2/accounts/mfaEnrollment:finalize",ha(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return fa(e,"POST","/v2/accounts/mfaSignIn:finalize",ha(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){Ne(this,e),this.factorId=t}return(0,Pe.Z)(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Ji("unexpected MultiFactorSessionType")}}}]),e}()),Al=function(){function e(){Ne(this,e)}return(0,Pe.Z)(e,null,[{key:"assertion",value:function(e){return Pl._fromCredential(e)}}]),e}();Al.FACTOR_ID="phone";var Ol="@firebase/auth",Dl="0.20.11",Ll=function(){function e(t){Ne(this,e),this.auth=t,this.internalListeners=new Map}return(0,Pe.Z)(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=$(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Xi(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var Ml;!function(e){var t;null===(t=_n())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function Fl(){return window}Ml="Browser",jr(new $n("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,s=a.authDomain;return function(e,t){Xi(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),Xi(!(null===s||void 0===s?void 0:s.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:s,clientPlatform:Ml,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uo(Ml)},i=new lo(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(na);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),jr(new $n("auth-internal",(function(e){return function(e){return new Ll(e)}(ho(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Xr(Ol,Dl,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Ml)),Xr(Ol,Dl,"esm2017");function Ul(e,t,n){return jl.apply(this,arguments)}function jl(){return jl=$(Q().mark((function e(t,n,r){var i,a,o,s,u;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Fl(),o=a.BuildInfo,ea(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Wl(n.sessionId);case 4:return s=e.sent,u={},io()?u.ibi=o.packageName:to()?u.apn=o.packageName:Ki(t,"operation-not-supported-in-this-environment"),o.displayName&&(u.appDisplayName=o.displayName),u.sessionId=s,e.abrupt("return",El(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,u));case 10:case"end":return e.stop()}}),e)}))),jl.apply(this,arguments)}function Zl(){return(Zl=$(Q().mark((function e(t){var n,r,i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Fl(),r=n.BuildInfo,i={},io()?i.iosBundleId=r.packageName:to()?i.androidPackageName=r.packageName:Ki(t,"operation-not-supported-in-this-environment"),e.next=5,rl(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vl(e){var t=Fl().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function ql(e,t,n){return Bl.apply(this,arguments)}function Bl(){return Bl=$(Q().mark((function e(t,n,r){var i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Fl(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var s=null;function u(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){s||(s=window.setTimeout((function(){i(Gi(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(u),document.addEventListener("resume",c,!1),to()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),s&&window.clearTimeout(s)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Bl.apply(this,arguments)}function zl(e){var t,n,r,i,a,o,s,u,c,l,h=Fl();Xi("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Xi("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Xi("function"===typeof(null===(a=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Xi("function"===typeof(null===(u=null===(s=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===s?void 0:s.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Xi("function"===typeof(null===(l=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Wl(e){return Hl.apply(this,arguments)}function Hl(){return(Hl=$(Q().mark((function e(t){var n,r,i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Kl(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kl(e){if(ea(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Gl=function(e){Kt(n,e);var t=$t(n);function n(){var e;return Ne(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return(0,Pe.Z)(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Ei(Gt(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=$(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(el);function Ql(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:eh(),postBody:null,tenantId:e.tenantId,error:Gi(e,"no-auth-event")}}function Yl(e,t){return th()._set(nh(e),t)}function $l(e){return Xl.apply(this,arguments)}function Xl(){return(Xl=$(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,th()._get(nh(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,th()._remove(nh(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jl(e,t){var n,r,i=function(e){var t=rh(e),n=t.link?decodeURIComponent(t.link):void 0,r=rh(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return rh(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=rh(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,s=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],u=s?Gi(s):null;return u?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function eh(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function th(){return na(bu)}function nh(e){return Ga("authEvent",e.config.apiKey,e.name)}function rh(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=(t=n,(0,xi.Z)(t)||(0,Si.Z)(t)||(0,zt.Z)(t)||(0,Ti.Z)());r[0];return jn(r.slice(1).join("?"))}var ih=function(){function e(){Ne(this,e),this._redirectPersistence=wu,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Yc,this._overrideRedirectResult=jc}return(0,Pe.Z)(e,[{key:"_initialize",value:function(){var e=$(Q().mark((function e(t){var n,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Gl(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Ki(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=$(Q().mark((function e(t,n,r,i){var a,o,s,u;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zl(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Oc.clear(),e.next=10,this._originValidation(t);case 10:return o=Ql(t,r,i),e.next=13,Yl(t,o);case 13:return e.next=15,Ul(t,o,n);case 15:return s=e.sent,e.next=18,Vl(s);case 18:return u=e.sent,e.abrupt("return",ql(t,a,u));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Zl.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Fl(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout($(Q().mark((function n(){return Q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,$l(e);case 2:t.onEvent(oh());case 3:case"end":return n.stop()}}),n)}))),500),s=function(){var n=$(Q().mark((function n(r){var i,a;return Q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,$l(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=Jl(i,r.url)),t.onEvent(a||oh());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,s);var u=i,c="".concat(a.packageName.toLowerCase(),"://");Fl().handleOpenURL=function(){var e=$(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&s({url:t}),"function"===typeof u)try{u(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),ah=ih;function oh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Gi("no-auth-event")}}function sh(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function uh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn();return!("file:"!==sh()&&"ionic:"!==sh()&&"capacitor:"!==sh()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function ch(){return mn()&&11===(null===document||void 0===document?void 0:document.documentMode)}function lh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn();return/Edge\/\d+/.test(e)}function hh(){try{var e=self.localStorage,t=Tu();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn();return ch()||lh(e)}()||kn()}catch(n){return fh()&&kn()}return!1}function fh(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function dh(){return("http:"===sh()||"https:"===sh()||vn()||uh())&&!(yn()||pn())&&hh()&&!fh()}function ph(){return uh()&&"undefined"!==typeof document}function vh(){return yh.apply(this,arguments)}function yh(){return(yh=$(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ph()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var mh={LOCAL:"local",NONE:"none",SESSION:"session"},gh=Xi,kh="persistence";function bh(e,t){gh(Object.values(mh).includes(t),e,"invalid-persistence-type"),yn()?gh(t!==mh.SESSION,e,"unsupported-persistence-type"):pn()?gh(t===mh.NONE,e,"unsupported-persistence-type"):fh()?gh(t===mh.NONE||t===mh.LOCAL&&kn(),e,"unsupported-persistence-type"):gh(t===mh.NONE||hh(),e,"unsupported-persistence-type")}function _h(e){return wh.apply(this,arguments)}function wh(){return(wh=$(Q().mark((function e(t){var n,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=xh(),r=Ga(kh,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xh(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var Sh=Xi,Th=function(){function e(){Ne(this,e),this.browserResolver=na(Nl),this.cordovaResolver=na(ah),this.underlyingResolver=null,this._redirectPersistence=wu,this._completeRedirectFn=Yc,this._overrideRedirectResult=jc}return(0,Pe.Z)(e,[{key:"_initialize",value:function(){var e=$(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=$(Q().mark((function e(t,n,r,i){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=$(Q().mark((function e(t,n,r,i){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return ph()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return Sh(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=$(Q().mark((function e(){var t;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,vh();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ih(e){return e.unwrap()}function Eh(e,t){var n,r,i=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===(r=t)||void 0===r?void 0:r.code))t.resolver=new Ah(e,function(e,t){var n,r=Yn(e),i=t;return Xi(t.customData.operationType,r,"argument-error"),Xi(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),fu._fromError(r,i)}(e,t));else if(i){var a=Ch(t),o=t;a&&(o.credential=a,o.tenantId=i.tenantId||void 0,o.email=i.email||void 0,o.phoneNumber=i.phoneNumber||void 0)}}function Ch(e){var t=(e instanceof Tn?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Tn)&&"temporaryProof"in t&&"phoneNumber"in t)return gc.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Oi)return null;switch(r){case Ai:n=rs;break;case Ni:n=ns;break;case Pi:n=is;break;case Di:n=ss;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,s=t.pendingToken,u=t.nonce;return a||o||i||s?s?r.startsWith("saml.")?as._create(r,s):Bo._fromParams({providerId:r,signInMethod:r,pendingToken:s,idToken:i,accessToken:a}):new ts(r).credential({idToken:i,accessToken:a,rawNonce:u}):null}return e instanceof Tn?n.credentialFromError(e):n.credentialFromResult(e)}function Rh(e,t){return t.catch((function(t){throw t instanceof Tn&&Eh(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Ch(t)),additionalUserInfo:lu(e),user:Oh.getOrCreate(r)}}))}function Nh(e,t){return Ph.apply(this,arguments)}function Ph(){return(Ph=$(Q().mark((function e(t,n){var r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Rh(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ah=function(){function e(t,n){Ne(this,e),this.resolver=n,this.auth=t.wrapped()}return(0,Pe.Z)(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Rh(Ih(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Oh=function(){function e(t){Ne(this,e),this._delegate=t,this.multiFactor=function(e){var t=Yn(e);return yu.has(t)||yu.set(t,vu._fromUser(t)),yu.get(t)}(t)}return(0,Pe.Z)(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=$(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rh(this.auth,Cs(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=$(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nh(this.auth,fc(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=$(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rh(this.auth,Nc(this._delegate,t,Th)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=$(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_h(ho(this.auth));case 2:return e.abrupt("return",Hc(this._delegate,t,Th));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=$(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rh(this.auth,Ns(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Nh(this.auth,function(e,t,n){return pc.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Rh(this.auth,function(e,t,n){return Rc.apply(this,arguments)}(this._delegate,e,Th))}},{key:"reauthenticateWithRedirect",value:function(){var e=$(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_h(ho(this.auth));case 2:return e.abrupt("return",zc(this._delegate,t,Th));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return $s.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=$(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ys(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return nu(Yn(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return nu(Yn(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return mc.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return tu.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Xs.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Oh.USER_MAP=new WeakMap;var Dh=Xi,Lh=function(){function e(t,n){if(Ne(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Dh(r,"invalid-api-key",{appName:t.name}),Dh(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?Th:void 0;this._delegate=n.initialize({options:{persistence:Fh(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(qi),this.linkUnderlyingAuth()}return(0,Pe.Z)(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Oh.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){po(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Zs.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Vs(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return js.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=$(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rh(this._delegate,zs(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Ys.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=$o.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=$(Q().mark((function e(){var t;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Dh(dh(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Gc(this._delegate,Th);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Rh(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){ho(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Mh(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Mh(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Hs.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Us.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=$(Q().mark((function e(t){var n,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:bh(this._delegate,t),e.t0=t,e.next=e.t0===mh.SESSION?4:e.t0===mh.LOCAL?6:e.t0===mh.NONE?11:13;break;case 4:return n=wu,e.abrupt("break",14);case 6:return e.next=8,na(Wu)._isAvailable();case 8:return r=e.sent,n=r?Wu:bu,e.abrupt("break",14);case 11:return n=Ka,e.abrupt("break",14);case 13:return e.abrupt("return",Ki("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Rh(this._delegate,function(e){return fs.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Rh(this._delegate,Is(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Rh(this._delegate,function(e,t){return Ds.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Rh(this._delegate,function(e,t,n){return Is(Yn(e),Xo.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Rh(this._delegate,function(e,t,n){return Ks.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Nh(this._delegate,function(e,t,n){return hc.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=$(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Dh(dh(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Rh(this._delegate,Ec(this._delegate,t,Th)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=$(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Dh(dh(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,_h(this._delegate);case 3:return e.abrupt("return",qc(this._delegate,t,Th));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Bs.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Mh(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Oh.getOrCreate(e))},error:t,complete:n}}function Fh(e,t){var n=function(e,t){var n=xh();if(!n)return[];var r=Ga(kh,e,t);switch(n.getItem(r)){case mh.NONE:return[Ka];case mh.LOCAL:return[Wu,wu];case mh.SESSION:return[wu];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Wu)||n.push(Wu),"undefined"!==typeof window)for(var r=0,i=[bu,wu];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Ka)||n.push(Ka),n}Lh.Persistence=mh;var Uh=function(){function e(){Ne(this,e),this.providerId="phone",this._delegate=new gc(Ih(wi.auth()))}return(0,Pe.Z)(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return gc.credential(e,t)}}]),e}();Uh.PHONE_SIGN_IN_METHOD=gc.PHONE_SIGN_IN_METHOD,Uh.PROVIDER_ID=gc.PROVIDER_ID;var jh=Xi,Zh=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wi.app();Ne(this,e),jh(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new uc(t,n,i.auth()),this.type=this._delegate.type}return(0,Pe.Z)(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();!function(e){e.INTERNAL.registerComponent(new $n("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Lh(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Li,PASSWORD_RESET:Mi,RECOVER_EMAIL:Fi,REVERT_SECOND_FACTOR_ADDITION:Ui,VERIFY_AND_CHANGE_EMAIL:ji,VERIFY_EMAIL:Zi}},EmailAuthProvider:Xo,FacebookAuthProvider:ns,GithubAuthProvider:is,GoogleAuthProvider:rs,OAuthProvider:ts,SAMLAuthProvider:os,PhoneAuthProvider:Uh,PhoneMultiFactorGenerator:Al,RecaptchaVerifier:Zh,TwitterAuthProvider:ss,Auth:Lh,AuthCredential:mo,Error:Tn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.2.24")}(wi);var Vh="firebasestorage.googleapis.com",qh=function(e){Kt(n,e);var t=$t(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Ne(this,n),(i=t.call(this,Bh(e),"Firebase Storage: ".concat(r," (").concat(Bh(e),")"))).status_=a,i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf((0,x.Z)(i),n.prototype),i}return(0,Pe.Z)(n,[{key:"status",get:function(){return this.status_},set:function(e){this.status_=e}},{key:"_codeEquals",value:function(e){return Bh(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(Tn);function Bh(e){return"storage/"+e}function zh(){return new qh("unknown","An unknown error occurred, please check the error payload for server response.")}function Wh(){return new qh("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function Hh(){return new qh("canceled","User canceled the upload/download.")}function Kh(){return new qh("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Gh(e){return new qh("invalid-argument",e)}function Qh(){return new qh("app-deleted","The Firebase app was deleted.")}function Yh(e){return new qh("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function $h(e,t){return new qh("invalid-format","String does not match format '"+e+"': "+t)}function Xh(e){throw new qh("internal-error","Internal error: "+e)}var Jh,ef=function(){function e(t,n){Ne(this,e),this.bucket=t,this.path_=n}return(0,Pe.Z)(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(i){return new e(t,"")}if(""===r.path)return r;throw new qh("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===Vh?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<u.length;c++){var l=u[c],h=l.regex.exec(t);if(h){var f=h[l.indices.bucket],d=h[l.indices.path];d||(d=""),r=new e(f,d),l.postModify(r);break}}if(null==r)throw function(e){return new qh("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),tf=function(){function e(t){Ne(this,e),this.promise_=Promise.reject(t)}return(0,Pe.Z)(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function nf(e){return"string"===typeof e||e instanceof String}function rf(e){return af()&&e instanceof Blob}function af(){return"undefined"!==typeof Blob&&!pn()}function of(e,t,n,r){if(r<t)throw Gh("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw Gh("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function sf(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function uf(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}function cf(e,t){var n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Jh||(Jh={}));var lf=function(){function e(t,n,r,i,a,o,s,u,c,l,h){var f=this,d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];Ne(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=h,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){f.resolve_=e,f.reject_=t,f.start_()}))}return(0,Pe.Z)(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(u){i(u)}else if(null!==a){var s=zh();s.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,s)):i(s)}else{if(n.canceled)i(e.appDelete_?Qh():Hh());else i(Wh())}};this.canceled_?t(0,new hf(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,s=0;function u(){return 2===s}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout((function(){i=null,e(d,u())}),t)}function f(){a&&clearTimeout(a)}function d(e){if(c)f();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return f(),void l.call.apply(l,[null,e].concat(n));var a;if(u()||o)return f(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===s?(s=2,a=0):a=1e3*(r+Math.random()),h(a)}}var p=!1;function v(e){p||(p=!0,f(),c||(null!==i?(e||(s=2),clearTimeout(i),h(0)):e||(s=1)))}return h(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new hf(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===Jh.NO_ERROR,a=r.getStatus();if(n&&!cf(a,e.additionalRetryCodes_)||!e.retry){var o=-1!==e.successCodes_.indexOf(a);t(!0,new hf(o,r))}else{var s=r.getErrorCode()===Jh.ABORT;t(!1,new hf(!1,null,s))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}]),e}(),hf=(0,Pe.Z)((function e(t,n,r){Ne(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function ff(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}function df(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}function pf(e,t){t&&(e["X-Firebase-GMPID"]=t)}function vf(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}function yf(e,t,n,r,i,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=uf(e.urlParams),u=e.url+s,c=Object.assign({},e.headers);return pf(c,t),ff(c,n),df(c,a),vf(c,r),new lf(u,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}function mf(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function gf(){for(var e=mf(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(af())return new Blob(n);throw new qh("unsupported-environment","This browser doesn't seem to support creating Blobs")}var kf={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},bf=(0,Pe.Z)((function e(t,n){Ne(this,e),this.data=t,this.contentType=n||null}));function _f(e,t){switch(e){case kf.RAW:return new bf(wf(t));case kf.BASE64:case kf.BASE64URL:return new bf(xf(e,t));case kf.DATA_URL:return new bf(function(e){var t=new Sf(e);return t.base64?xf(kf.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw $h(kf.DATA_URL,"Malformed data URL.")}return wf(t)}(t.rest)}(t),new Sf(t).contentType)}throw zh()}function wf(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function xf(e,t){switch(e){case kf.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw $h(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case kf.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw $h(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=atob(t)}catch(c){throw $h(e,"Invalid character found")}for(var s=new Uint8Array(o.length),u=0;u<o.length;u++)s[u]=o.charCodeAt(u);return s}var Sf=(0,Pe.Z)((function e(t){Ne(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw $h(kf.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var Tf=function(){function e(t,n){Ne(this,e);var r=0,i="";rf(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return(0,Pe.Z)(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(rf(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(af()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(gf.apply(null,i))}var a=n.map((function(e){return nf(e)?_f(kf.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var s=new Uint8Array(o),u=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)s[u++]=e[t]})),new e(s,!0)}}]),e}();function If(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function Ef(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Cf(e,t){return t}var Rf=(0,Pe.Z)((function e(t,n,r,i){Ne(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||Cf})),Nf=null;function Pf(){if(Nf)return Nf;var e=[];e.push(new Rf("bucket")),e.push(new Rf("generation")),e.push(new Rf("metageneration")),e.push(new Rf("name","fullPath",!0));var t=new Rf("name");t.xform=function(e,t){return function(e){return!nf(e)||e.length<2?e:Ef(e)}(t)},e.push(t);var n=new Rf("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Rf("timeCreated")),e.push(new Rf("updated")),e.push(new Rf("md5Hash",null,!0)),e.push(new Rf("cacheControl",null,!0)),e.push(new Rf("contentDisposition",null,!0)),e.push(new Rf("contentEncoding",null,!0)),e.push(new Rf("contentLanguage",null,!0)),e.push(new Rf("contentType",null,!0)),e.push(new Rf("metadata","customMetadata",!0)),Nf=e}function Af(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new ef(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Of(e,t,n){var r=If(t);return null===r?null:Af(e,r,n)}function Df(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}function Lf(e,t,n){var r=If(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes){var i,a=Wt(n.prefixes);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),s=e._makeStorageReference(new ef(t,o));r.prefixes.push(s)}}catch(f){a.e(f)}finally{a.f()}}if(n.items){var u,c=Wt(n.items);try{for(c.s();!(u=c.n()).done;){var l=u.value,h=e._makeStorageReference(new ef(t,l.name));r.items.push(h)}}catch(f){c.e(f)}finally{c.f()}}return r}(e,t,r)}var Mf=(0,Pe.Z)((function e(t,n,r,i){Ne(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function Ff(e){if(!e)throw zh()}function Uf(e,t){return function(n,r){var i=Of(e,r,t);return Ff(null!==i),i}}function jf(e,t){return function(n,r){var i=Of(e,r,t);return Ff(null!==i),function(e,t,n,r){var i=If(t);if(null===i)return null;if(!nf(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return sf("/b/"+o(i)+"/o/"+o(a),n,r)+uf({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function Zf(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new qh("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new qh("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new qh("quota-exceeded","Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new qh("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function Vf(e){var t=Zf(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new qh("object-not-found","Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function qf(e,t,n){var r=sf(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new Mf(r,"GET",Uf(e,n),i);return a.errorHandler=Vf(t),a}function Bf(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=sf(t.bucketOnlyServerUrl(),e.host,e._protocol),s=e.maxOperationRetryTime,u=new Mf(o,"GET",function(e,t){return function(n,r){var i=Lf(e,t,r);return Ff(null!==i),i}}(e,t.bucket),s);return u.urlParams=a,u.errorHandler=Zf(t),u}function zf(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function Wf(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+s;var u=zf(t,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Df(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",h=Tf.getBlob(c,r,l);if(null===h)throw Kh();var f={name:u.fullPath},d=sf(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new Mf(d,"POST",Uf(e,n),p);return v.urlParams=f,v.headers=o,v.body=h.uploadData(),v.errorHandler=Zf(t),v}var Hf=(0,Pe.Z)((function e(t,n,r,i){Ne(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function Kf(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){Ff(!1)}return Ff(!!n&&-1!==(t||["active"]).indexOf(n)),n}var Gf=262144;function Qf(e,t,n,r,i,a,o,s){var u=new Hf(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new qh("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f=h+l,d={"X-Goog-Upload-Command":0===l?"finalize":c===l?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(u.current)},p=r.slice(h,f);if(null===p)throw Kh();var v=t.maxUploadRetryTime,y=new Mf(n,"POST",(function(e,n){var i,o=Kf(e,["active","final"]),s=u.current+l,c=r.size();return i="final"===o?Uf(t,a)(e,n):null,new Hf(s,c,"final"===o,i)}),v);return y.headers=d,y.body=p.uploadData(),y.progressCallback=s||null,y.errorHandler=Zf(e),y}var Yf={STATE_CHANGED:"state_changed"},$f={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Xf(e){switch(e){case"running":case"pausing":case"canceling":return $f.RUNNING;case"paused":return $f.PAUSED;case"success":return $f.SUCCESS;case"canceled":return $f.CANCELED;default:return $f.ERROR}}var Jf=(0,Pe.Z)((function e(t,n,r){Ne(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function ed(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var td=function(){function e(){var t=this;Ne(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Jh.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=Jh.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=Jh.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return(0,Pe.Z)(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw Xh("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw Xh("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw Xh("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw Xh("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw Xh("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),nd=function(e){Kt(n,e);var t=$t(n);function n(){return Ne(this,n),t.apply(this,arguments)}return(0,Pe.Z)(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(td);function rd(){return new nd}var id=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Ne(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=Pf(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){if(r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled"))r._needToFetchStatus=!0,r.completeTransitions_();else{var t=r.isExponentialBackoffExpired();if(cf(e.status,[])){if(!t)return r.sleepTime=Math.max(2*r.sleepTime,1e3),r._needToFetchStatus=!0,void r.completeTransitions_();e=Wh()}r._error=e,r._transition("error")}},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return(0,Pe.Z)(e,[{key:"isExponentialBackoffExpired",value:function(){return this.sleepTime>this.maxSleepTime}},{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){var e=this;"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((function(){e.pendingTimeout=void 0,e._continueUpload()}),this.sleepTime):this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=(0,a.Z)(n,2),i=r[0],o=r[1];switch(t._state){case"running":e(i,o);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=zf(t,r,i),s={name:o.fullPath},u=sf(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=Df(o,n),h=e.maxUploadRetryTime,f=new Mf(u,"POST",(function(e){var t;Kf(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){Ff(!1)}return Ff(nf(t)),t}),h);return f.urlParams=s,f.headers=c,f.body=l,f.errorHandler=Zf(t),f}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,rd,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new Mf(n,"POST",(function(e){var t=Kf(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){Ff(!1)}n||Ff(!1);var i=Number(n);return Ff(!isNaN(i)),new Hf(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=Zf(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,rd,n,r);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=Gf*this._chunkMultiplier,n=new Hf(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=Qf(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(u){return e._error=u,void e._transition("error")}var s=e._ref.storage._makeRequest(o,rd,i,a,!1);e._request=s,s.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){2*(Gf*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=qf(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,rd,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=Wf(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,rd,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Hh(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=Xf(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new Jf(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(Xf(this._state)){case $f.SUCCESS:ed(this._resolve.bind(null,this.snapshot))();break;case $f.CANCELED:case $f.ERROR:ed(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(Xf(this._state)){case $f.RUNNING:case $f.PAUSED:e.next&&ed(e.next.bind(e,this.snapshot))();break;case $f.SUCCESS:e.complete&&ed(e.complete.bind(e))();break;default:e.error&&ed(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),ad=function(){function e(t,n){Ne(this,e),this._service=t,this._location=n instanceof ef?n:ef.makeFromUrl(n,t.host)}return(0,Pe.Z)(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new ef(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return Ef(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new ef(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw Yh(e)}}]),e}();function od(e,t,n){return sd.apply(this,arguments)}function sd(){return(sd=$(Q().mark((function e(t,n,r){var a,o,s,u;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={pageToken:r},e.next=3,ud(t,s);case 3:if(u=e.sent,(a=n.prefixes).push.apply(a,(0,i.Z)(u.prefixes)),(o=n.items).push.apply(o,(0,i.Z)(u.items)),null==u.nextPageToken){e.next=9;break}return e.next=9,od(t,n,u.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ud(e,t){null!=t&&"number"===typeof t.maxResults&&of("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=Bf(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,rd)}function cd(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=sf(t.fullServerUrl(),e.host,e._protocol),a=Df(n,r),o=e.maxOperationRetryTime,s=new Mf(i,"PATCH",Uf(e,r),o);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=a,s.errorHandler=Vf(t),s}(e.storage,e._location,t,Pf());return e.storage.makeRequestWithTokens(n,rd)}function ld(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=sf(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new Mf(r,"GET",jf(e,n),i);return a.errorHandler=Vf(t),a}(e.storage,e._location,Pf());return e.storage.makeRequestWithTokens(t,rd).then((function(e){if(null===e)throw new qh("no-download-url","The given file does not have any download URLs.");return e}))}function hd(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=sf(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new Mf(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=Vf(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,rd)}function fd(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new ef(e._location.bucket,n);return new ad(e.storage,r)}function dd(e,t){if(e instanceof md){var n=e;if(null==n._bucket)throw new qh("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new ad(n,n._bucket);return null!=t?dd(r,t):r}return void 0!==t?fd(e,t):e}function pd(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof md)return new ad(e,t);throw Gh("To use ref(service, url), the first argument must be a Storage instance.")}return dd(e,t)}function vd(e,t){var n=null===t||void 0===t?void 0:t.storageBucket;return null==n?null:ef.makeFromBucketSpec(n,e)}function yd(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:Sn(i,e.app.options.projectId))}var md=function(){function e(t,n,r,i,a){Ne(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=Vh,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ef.makeFromBucketSpec(i,this._host):vd(this._host,this.app.options)}return(0,Pe.Z)(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=ef.makeFromBucketSpec(this._url,e):this._bucket=vd(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){of("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){of("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=$(Q().mark((function e(){var t,n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=$(Q().mark((function e(){var t,n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new ad(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new tf(Qh());var o=yf(e,this._appId,n,r,t,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then((function(){return i._requests.delete(o)}),(function(){return i._requests.delete(o)})),o}},{key:"makeRequestWithTokens",value:function(){var e=$(Q().mark((function e(t,n){var r,i,o,s;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=(0,a.Z)(r,2),o=i[0],s=i[1],e.abrupt("return",this._makeRequest(t,n,o,s).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),gd="@firebase/storage",kd="0.9.13",bd="storage";function _d(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new id(e,new Tf(t),n)}(e=Yn(e),t,n)}function wd(e){return function(e){e._throwIfRoot("getMetadata");var t=qf(e.storage,e._location,Pf());return e.storage.makeRequestWithTokens(t,rd)}(e=Yn(e))}function xd(e){return function(e){var t={prefixes:[],items:[]};return od(e,t).then((function(){return t}))}(e=Yn(e))}function Sd(e,t){return pd(e=Yn(e),t)}function Td(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};yd(e,t,n,r)}function Id(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new md(r,i,a,n,Hr)}jr(new $n(bd,Id,"PUBLIC").setMultipleInstances(!0)),Xr(gd,kd,""),Xr(gd,kd,"esm2017");var Ed=function(){function e(t,n,r){Ne(this,e),this._delegate=t,this.task=n,this.ref=r}return(0,Pe.Z)(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),Cd=function(){function e(t,n){Ne(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return(0,Pe.Z)(e,[{key:"snapshot",get:function(){return new Ed(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new Ed(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new Ed(e,i,i._ref))}:{next:t.next?function(e){return t.next(new Ed(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),Rd=function(){function e(t,n){Ne(this,e),this._delegate=t,this._service=n}return(0,Pe.Z)(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new Nd(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new Nd(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),Nd=function(){function e(t,n){Ne(this,e),this._delegate=t,this.storage=n}return(0,Pe.Z)(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return fd(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new Cd(_d(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kf.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=_f(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new Cd(new id(this._delegate,new Tf(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return xd(this._delegate).then((function(t){return new Rd(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return ud(e=Yn(e),t)}(this._delegate,e||void 0).then((function(e){return new Rd(e,t.storage)}))}},{key:"getMetadata",value:function(){return wd(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return cd(e=Yn(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return ld(Yn(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),hd(Yn(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw Yh(e)}}]),e}(),Pd=function(){function e(t,n){Ne(this,e),this.app=t,this._delegate=n}return(0,Pe.Z)(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(Ad(e))throw Gh("ref() expected a child path but got a URL, use refFromURL instead.");return new Nd(Sd(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!Ad(e))throw Gh("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ef.makeFromUrl(e,this._delegate.host)}catch(t){throw Gh("refFromUrl() expected a valid full URL but got an invalid one.")}return new Nd(Sd(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Td(this._delegate,e,t,n)}}]),e}();function Ad(e){return/^[A-Za-z]+:\/\//.test(e)}function Od(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new Pd(r,i)}!function(e){var t={TaskState:$f,TaskEvent:Yf,StringFormat:kf,Storage:Pd,Reference:Nd};e.INTERNAL.registerComponent(new $n("storage-compat",Od,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.1.21")}(wi);var Dd="@firebase/database",Ld="0.13.10",Md="";function Fd(e){Md=e}var Ud=function(){function e(t){Ne(this,e),this.domStorage_=t,this.prefix_="firebase:"}return(0,Pe.Z)(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Nn(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Rn(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),jd=function(){function e(){Ne(this,e),this.cache_={},this.isInMemoryStorage=!0}return(0,Pe.Z)(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return An(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),Zd=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Ud(t)}}catch(n){}return new jd},Vd=Zd("localStorage"),qd=Zd("sessionStorage"),Bd=new ur("@firebase/database"),zd=function(){var e=1;return function(){return e++}}(),Wd=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,rn(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new Vn;n.update(t);var r=n.digest();return sn.encodeByteArray(r)},Hd=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?Nn(r):r,t+=" "}return t},Kd=null,Gd=!0,Qd=function(e,t){rn(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(Bd.logLevel=tr.VERBOSE,Kd=Bd.log.bind(Bd),t&&qd.set("logging_enabled",!0)):"function"===typeof e?Kd=e:(Kd=null,qd.remove("logging_enabled"))},Yd=function(){if(!0===Gd&&(Gd=!1,null===Kd&&!0===qd.get("logging_enabled")&&Qd(!0)),Kd){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Hd.apply(null,t);Kd(r)}},$d=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Yd.apply(void 0,[e].concat(n))}},Xd=function(){var e="FIREBASE INTERNAL ERROR: "+Hd.apply(void 0,arguments);Bd.error(e)},Jd=function(){var e="FIREBASE FATAL ERROR: ".concat(Hd.apply(void 0,arguments));throw Bd.error(e),new Error(e)},ep=function(){var e="FIREBASE WARNING: "+Hd.apply(void 0,arguments);Bd.warn(e)},tp=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},np="[MIN_NAME]",rp="[MAX_NAME]",ip=function(e,t){if(e===t)return 0;if(e===np||t===rp)return-1;if(t===np||e===rp)return 1;var n=pp(e),r=pp(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},ap=function(e,t){return e===t?0:e<t?-1:1},op=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Nn(t))},sp=function e(t){if("object"!==typeof t||null===t)return Nn(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=Nn(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},up=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function cp(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var lp=function(e){rn(!tp(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var u=s.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(u.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var hp=new RegExp("^-?(0*)\\d{1,10}$"),fp=-2147483648,dp=2147483647,pp=function(e){if(hp.test(e)){var t=Number(e);if(t>=fp&&t<=dp)return t}return null},vp=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw ep("Exception was thrown by user callback.",e),t}),Math.floor(0))}},yp=function(e,t){var n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n},mp=function(){function e(t,n){var r=this;Ne(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return(0,Pe.Z)(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){ep('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),gp=function(){function e(t,n,r){var i=this;Ne(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return(0,Pe.Z)(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(Yd("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ep(e)}}]),e}(),kp=function(){function e(t){Ne(this,e),this.accessToken=t}return(0,Pe.Z)(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();kp.OWNER="owner";var bp="5",_p=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,wp="websocket",xp="long_polling",Sp=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];Ne(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Vd.get("host:"+t)||this._host}return(0,Pe.Z)(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Vd.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function Tp(e,t,n){var r;if(rn("string"===typeof t,"typeof type must == string"),rn("object"===typeof n,"typeof params must == object"),t===wp)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==xp)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return cp(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var Ip=function(){function e(){Ne(this,e),this.counters_={}}return(0,Pe.Z)(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;An(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return hn(void 0,this.counters_)}}]),e}(),Ep={},Cp={};function Rp(e){var t=e.toString();return Ep[t]||(Ep[t]=new Ip),Ep[t]}var Np=function(){function e(t){Ne(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return(0,Pe.Z)(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&vp((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),Pp="start",Ap="close",Op=function(){function e(t,n,r,i,a,o,s){var u=this;Ne(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=$d(t),this.stats_=Rp(n),this.urlFn=function(e){return u.appCheckToken&&(e.ac=u.appCheckToken),Tp(n,xp,e)}}return(0,Pe.Z)(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Np(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(gn()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Dp((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===Pp)n.id=a,n.password=o;else{if(i!==Ap)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=bp,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&_p.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=Nn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=un(t),r=up(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!gn()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=Nn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!gn()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),Dp=function(){function e(t,n,r,i){if(Ne(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,gn())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=zd(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(s){Yd("frame writing exception"),s.stack&&Yd(s.stack),Yd(s)}}}return(0,Pe.Z)(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;gn()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){Yd("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Yd("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),Lp=null;"undefined"!==typeof MozWebSocket?Lp=MozWebSocket:"undefined"!==typeof WebSocket&&(Lp=WebSocket);var Mp=function(){function e(t,n,r,i,a,o,s){Ne(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=$d(this.connId),this.stats_=Rp(n),this.connURL=e.connectionURL_(n,o,s,i,r),this.nodeAdmin=n.nodeAdmin}return(0,Pe.Z)(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Vd.set("previous_websocket_failure",!0);try{var r;if(gn()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(bp,"/").concat(Md,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/messaging-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new Lp(this.connURL,[],r)}catch(u){this.log_("Error instantiating WebSocket.");var s=u.message||u.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){Vd.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=Rn(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(rn(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=Nn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=up(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=bp,!gn()&&"undefined"!==typeof location&&location.hostname&&_p.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a.ac=r),i&&(a.p=i),Tp(e,wp,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==Lp&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return Vd.isInMemoryStorage||!0===Vd.get("previous_websocket_failure")}}]),e}();Mp.responsesRequiredToBeHealthy=2,Mp.healthyTimeout=3e4;var Fp=function(){function e(t){Ne(this,e),this.initTransports_(t)}return(0,Pe.Z)(e,[{key:"initTransports_",value:function(t){var n=Mp&&Mp.isAvailable(),r=n&&!Mp.previouslyFailed();if(t.webSocketOnly&&(n||ep("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Mp];else{var i,a=this.transports_=[],o=Wt(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var s=i.value;s&&s.isAvailable()&&a.push(s)}}catch(u){o.e(u)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[Op,Mp]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();Fp.globalTransportInitialized_=!1;var Up=function(){function e(t,n,r,i,a,o,s,u,c,l){Ne(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=u,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=$d("c:"+this.id+":"),this.transportManager_=new Fp(n),this.log_("Connection created"),this.start_()}return(0,Pe.Z)(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=yp((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=op("t",e),n=op("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=op("t",e),n=op("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=op("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Xd("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Xd("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),bp!==n&&ep("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),yp((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):yp((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Vd.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),jp=function(){function e(){Ne(this,e)}return(0,Pe.Z)(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),Zp=function(){function e(t){Ne(this,e),this.allowedEvents_=t,this.listeners_={},rn(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return(0,Pe.Z)(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=(0,i.Z)(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];for(var o=0;o<t.length;o++)t[o].callback.apply(t[o].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){rn(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),Vp=function(e){Kt(n,e);var t=$t(n);function n(){var e;return Ne(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||dn()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return(0,Pe.Z)(n,[{key:"getInitialEvent",value:function(e){return rn("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(Zp),qp=function(){function e(t,n){if(Ne(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return(0,Pe.Z)(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function Bp(){return new qp("")}function zp(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Wp(e){return e.pieces_.length-e.pieceNum_}function Hp(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new qp(e.pieces_,t)}function Kp(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Gp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function Qp(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new qp(t,0)}function Yp(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof qp)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new qp(n,0)}function $p(e){return e.pieceNum_>=e.pieces_.length}function Xp(e,t){var n=zp(e),r=zp(t);if(null===n)return t;if(n===r)return Xp(Hp(e),Hp(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Jp(e,t){for(var n=Gp(e,0),r=Gp(t,0),i=0;i<n.length&&i<r.length;i++){var a=ip(n[i],r[i]);if(0!==a)return a}return n.length===r.length?0:n.length<r.length?-1:1}function ev(e,t){if(Wp(e)!==Wp(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function tv(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(Wp(e)>Wp(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var nv=(0,Pe.Z)((function e(t,n){Ne(this,e),this.errorPrefix_=n,this.parts_=Gp(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=Qn(this.parts_[r]);rv(this)}));function rv(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+iv(e))}function iv(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var av=function(e){Kt(n,e);var t=$t(n);function n(){var e,r,i;return Ne(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return(0,Pe.Z)(n,[{key:"getInitialEvent",value:function(e){return rn("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(Zp),ov=1e3,sv=function(e){Kt(n,e);var t=$t(n);function n(e,r,i,a,o,s,u,c){var l;if(Ne(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=s,l.appCheckTokenProvider_=u,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=$d("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=ov,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!gn())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return av.getInstance().on("visible",l.onVisible_,(0,x.Z)(l)),-1===e.host.indexOf("fblocal")&&Vp.getInstance().on("online",l.onOnline_,(0,x.Z)(l)),l}return(0,Pe.Z)(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(Nn(i)),rn(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new xn,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),rn(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),rn(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var s=o.d,u=o.s;n.warnOnListenWarnings_(s,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==u&&t.removeListen_(i,a),e.onComplete&&e.onComplete(u,s))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=Pn(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=Pn(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),rn(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+Nn(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Xd("Unrecognized action received from server: "+Nn(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;rn(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ov,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ov,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=ov),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=$(Q().mark((function e(){var t,r,i,o,s,u,c,l,h,f,d,p,v,y,m=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+n.nextConnectionId_++,s=this.lastSessionId,u=!1,c=null,l=function(){c?c.close():(u=!0,i())},h=function(e){rn(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(e)},this.realtime_={close:l,sendRequest:h},f=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);case 19:d=e.sent,p=(0,a.Z)(d,2),v=p[0],y=p[1],u?Yd("getToken() completed but was canceled"):(Yd("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=y&&y.token,c=new Up(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){ep(e+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")}),s)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),u||(this.repoInfo_.nodeAdmin&&ep(e.t0),l());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){Yd("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){Yd("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Dn(this.interruptReasons_)&&(this.reconnectDelay_=ov,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return sp(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new qp(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){Yd("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){Yd("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=Wt(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=Wt(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(u){r.e(u)}finally{r.f()}}}catch(u){t.e(u)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}},{key:"sendConnectStats_",value:function(){var e={},t="js";gn()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+Md.replace(/\./g,"-")]=1,dn()?e["framework.cordova"]=1:yn()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=Vp.getInstance().currentlyOnline();return Dn(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&An(e,"w")){var n=On(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();ep("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(jp);sv.nextPersistentConnectionId_=0,sv.nextConnectionId_=0;var uv,cv=function(){function e(t,n){Ne(this,e),this.name=t,this.node=n}return(0,Pe.Z)(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),lv=function(){function e(){Ne(this,e)}return(0,Pe.Z)(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new cv(np,e),r=new cv(np,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return cv.MIN}}]),e}(),hv=function(e){Kt(n,e);var t=$t(n);function n(){return Ne(this,n),t.apply(this,arguments)}return(0,Pe.Z)(n,[{key:"compare",value:function(e,t){return ip(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw an("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return cv.MIN}},{key:"maxPost",value:function(){return new cv(rp,uv)}},{key:"makePost",value:function(e,t){return rn("string"===typeof e,"KeyIndex indexValue must always be a string."),new cv(e,uv)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return uv},set:function(e){uv=e}}]),n}(lv),fv=new hv,dv=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;Ne(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return(0,Pe.Z)(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),pv=function(){function e(t,n,r,i,a){Ne(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:mv.EMPTY_NODE,this.right=null!=a?a:mv.EMPTY_NODE}return(0,Pe.Z)(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return mv.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return mv.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();pv.RED=!0,pv.BLACK=!1;var vv,yv=function(){function e(){Ne(this,e)}return(0,Pe.Z)(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new pv(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),mv=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;Ne(this,e),this.comparator_=t,this.root_=n}return(0,Pe.Z)(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,pv.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,pv.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new dv(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new dv(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new dv(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new dv(this.root_,null,this.comparator_,!0,e)}}]),e}();function gv(e,t){return ip(e.name,t.name)}function kv(e,t){return ip(e,t)}mv.EMPTY_NODE=new yv;var bv,_v,wv,xv=function(e){return"number"===typeof e?"number:"+lp(e):"string:"+e},Sv=function(e){if(e.isLeafNode()){var t=e.val();rn("string"===typeof t||"number"===typeof t||"object"===typeof t&&An(t,".sv"),"Priority must be a string or number.")}else rn(e===vv||e.isEmpty(),"priority of unexpected type.");rn(e===vv||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Tv=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;Ne(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,rn(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Sv(this.priorityNode_)}return(0,Pe.Z)(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return $p(t)?this:".priority"===zp(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=zp(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(rn(".priority"!==r||1===Wp(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(Hp(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+xv(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?lp(this.value_):this.value_,this.lazyHash_=Wd(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(rn(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return rn(i>=0,"Unknown leaf type: "+n),rn(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return bv},set:function(e){bv=e}}]),e}();Tv.VALUE_TYPE_ORDER=["object","boolean","number","string"];var Iv,Ev,Cv=function(e){Kt(n,e);var t=$t(n);function n(){return Ne(this,n),t.apply(this,arguments)}return(0,Pe.Z)(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?ip(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return cv.MIN}},{key:"maxPost",value:function(){return new cv(rp,new Tv("[PRIORITY-POST]",wv))}},{key:"makePost",value:function(e,t){var n=_v(e);return new cv(t,new Tv("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(lv),Rv=new Cv,Nv=Math.log(2),Pv=function(){function e(t){Ne(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/Nv,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return(0,Pe.Z)(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),Av=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,s=i-r;if(0===s)return null;if(1===s)return a=e[r],o=n?n(a):a,new pv(o,a.node,pv.BLACK,null,null);var u=parseInt(s/2,10)+r,c=t(r,u),l=t(u+1,i);return a=e[u],o=n?n(a):a,new pv(o,a.node,pv.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,s=function(t,r){var a=o-t,s=o;o-=t;var c=i(a+1,s),l=e[a],h=n?n(l):l;u(new pv(h,l.node,r,null,c))},u=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?s(h,pv.BLACK):(s(h,pv.BLACK),s(h,pv.RED))}return a}(new Pv(e.length));return new mv(r||t,a)},Ov={},Dv=function(){function e(t,n){Ne(this,e),this.indexes_=t,this.indexSet_=n}return(0,Pe.Z)(e,[{key:"get",value:function(e){var t=On(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof mv?t:null}},{key:"hasIndex",value:function(e){return An(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){rn(t!==fv,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(cv.Wrap),s=o.getNext();s;)a=a||t.isDefinedOn(s.node),i.push(s),s=o.getNext();r=a?Av(i,t.getCompare()):Ov;var u=t.toString(),c=Object.assign({},this.indexSet_);c[u]=t;var l=Object.assign({},this.indexes_);return l[u]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(Ln(this.indexes_,(function(e,i){var a=On(r.indexSet_,i);if(rn(a,"Missing index implementation for "+i),e===Ov){if(a.isDefinedOn(t.node)){for(var o=[],s=n.getIterator(cv.Wrap),u=s.getNext();u;)u.name!==t.name&&o.push(u),u=s.getNext();return o.push(t),Av(o,a.getCompare())}return Ov}var c=n.get(t.name),l=e;return c&&(l=l.remove(new cv(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(Ln(this.indexes_,(function(e){if(e===Ov)return e;var r=n.get(t.name);return r?e.remove(new cv(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return rn(Ov&&Rv,"ChildrenNode.ts has not been loaded"),Iv=Iv||new e({".priority":Ov},{".priority":Rv})}}]),e}(),Lv=function(){function e(t,n,r){Ne(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Sv(this.priorityNode_),this.children_.isEmpty()&&rn(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return(0,Pe.Z)(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||Ev}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?Ev:t}},{key:"getChild",value:function(e){var t=zp(e);return null===t?this:this.getImmediateChild(t).getChild(Hp(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(rn(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new cv(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?Ev:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=zp(e);if(null===n)return t;rn(".priority"!==zp(e)||1===Wp(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(Hp(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(Rv,(function(o,s){n[o]=s.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var s in n)o[s]=n[s];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+xv(this.getPriority().val())+":"),this.forEachChild(Rv,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":Wd(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new cv(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new cv(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new cv(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,cv.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,cv.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Mv?-1:0}},{key:"withIndex",value:function(t){if(t===fv||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===fv||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(Rv),r=t.getIterator(Rv),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===fv?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return Ev||(Ev=new e(new mv(kv),null,Dv.Default))}}]),e}();Lv.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var Mv=new(function(e){Kt(n,e);var t=$t(n);function n(){return Ne(this,n),t.call(this,new mv(kv),Lv.EMPTY_NODE,Dv.Default)}return(0,Pe.Z)(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return Lv.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(Lv));Object.defineProperties(cv,{MIN:{value:new cv(np,Lv.EMPTY_NODE)},MAX:{value:new cv(rp,Mv)}}),hv.__EMPTY_NODE=Lv.EMPTY_NODE,Tv.__childrenNodeConstructor=Lv,vv=Mv,function(e){wv=e}(Mv);function Fv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return Lv.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),rn(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new Tv(n,Fv(t))}if(e instanceof Array){var r=Lv.EMPTY_NODE;return cp(e,(function(t,n){if(An(e,t)&&"."!==t.substring(0,1)){var i=Fv(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(Fv(t))}var i=[],a=!1,o=e;if(cp(o,(function(e,t){if("."!==e.substring(0,1)){var n=Fv(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new cv(e,n)))}})),0===i.length)return Lv.EMPTY_NODE;var s=Av(i,gv,(function(e){return e.name}),kv);if(a){var u=Av(i,Rv.getCompare());return new Lv(s,Fv(t),new Dv({".priority":u},{".priority":Rv}))}return new Lv(s,Fv(t),Dv.Default)}!function(e){_v=e}(Fv);var Uv=function(e){Kt(n,e);var t=$t(n);function n(e){var r;return Ne(this,n),(r=t.call(this)).indexPath_=e,rn(!$p(e)&&".priority"!==zp(e),"Can't create PathIndex with empty path or .priority key"),r}return(0,Pe.Z)(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?ip(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=Fv(e),r=Lv.EMPTY_NODE.updateChild(this.indexPath_,n);return new cv(t,r)}},{key:"maxPost",value:function(){var e=Lv.EMPTY_NODE.updateChild(this.indexPath_,Mv);return new cv(rp,e)}},{key:"toString",value:function(){return Gp(this.indexPath_,0).join("/")}}]),n}(lv),jv=function(e){Kt(n,e);var t=$t(n);function n(){return Ne(this,n),t.apply(this,arguments)}return(0,Pe.Z)(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?ip(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return cv.MIN}},{key:"maxPost",value:function(){return cv.MAX}},{key:"makePost",value:function(e,t){var n=Fv(e);return new cv(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(lv),Zv=new jv,Vv="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",qv=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=Vv.charAt(n%64),n=Math.floor(n/64);rn(0===n,"Cannot push at time == 0");var o=a.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=Vv.charAt(t[r]);return rn(20===o.length,"nextPushId: Length should be 20."),o}}(),Bv=function(e){if("2147483647"===e)return"-";var t=pp(e);if(null!=t)return""+(t+1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return rp;var a=n[i],o=Vv.charAt(Vv.indexOf(a)+1);return n[i]=o,n.slice(0,i+1).join("")},zv=function(e){if("-2147483648"===e)return np;var t=pp(e);if(null!=t)return""+(t-1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=Vv.charAt(Vv.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function Wv(e){return{type:"value",snapshotNode:e}}function Hv(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Kv(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Gv(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var Qv=function(){function e(t){Ne(this,e),this.index_=t}return(0,Pe.Z)(e,[{key:"updateChild",value:function(e,t,n,r,i,a){rn(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(Kv(t,o)):rn(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(Hv(t,n)):a.trackChildChange(Gv(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Rv,(function(e,r){t.hasChild(e)||n.trackChildChange(Kv(e,r))})),t.isLeafNode()||t.forEachChild(Rv,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(Gv(t,r,i))}else n.trackChildChange(Hv(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?Lv.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),Yv=function(){function e(t){Ne(this,e),this.indexedFilter_=new Qv(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return(0,Pe.Z)(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new cv(t,n))||(n=Lv.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=Lv.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(Lv.EMPTY_NODE);var i=this;return t.forEachChild(Rv,(function(e,t){i.matches(new cv(e,t))||(r=r.updateImmediateChild(e,Lv.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),$v=function(){function e(t){Ne(this,e),this.rangedFilter_=new Yv(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return(0,Pe.Z)(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new cv(t,n))||(n=Lv.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=Lv.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=Lv.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),o)<=0:this.index_.compare(o,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(o.name,o.node),a++}}else{var s,u,c,l;if(r=(r=t.withIndex(this.index_)).updatePriority(Lv.EMPTY_NODE),this.reverse_){l=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();c=function(e,t){return h(t,e)}}else l=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();for(var f=0,d=!1;l.hasNext();){var p=l.getNext();!d&&c(s,p)<=0&&(d=!0),d&&f<this.limit_&&c(p,u)<=0?f++:r=r.updateImmediateChild(p.name,Lv.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var s=e;rn(s.numChildren()===this.limit_,"");var u=new cv(t,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(s.hasChild(t)){for(var h=s.getImmediateChild(t),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===t||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:a(f,u);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(Gv(t,n,h)),s.updateImmediateChild(t,n);null!=i&&i.trackChildChange(Kv(t,h));var p=s.updateImmediateChild(t,Lv.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(Hv(f.name,f.node)),p.updateImmediateChild(f.name,f.node)):p}return n.isEmpty()?e:l&&a(c,u)>=0?(null!=i&&(i.trackChildChange(Kv(c.name,c.node)),i.trackChildChange(Hv(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(c.name,Lv.EMPTY_NODE)):e}}]),e}(),Xv=function(){function e(){Ne(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Rv}return(0,Pe.Z)(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"hasStartAfter",value:function(){return this.startAfterSet_}},{key:"hasEndBefore",value:function(){return this.endBeforeSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return rn(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return rn(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:np}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return rn(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return rn(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:rp}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return rn(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===Rv}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function Jv(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function ey(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function ty(e,t){var n=e.copy();return n.index_=t,n}function ny(e){var t,n={};return e.isDefault()||(e.index_===Rv?t="$priority":e.index_===Zv?t="$value":e.index_===fv?t="$key":(rn(e.index_ instanceof Uv,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=Nn(t),e.startSet_&&(n.startAt=Nn(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+Nn(e.indexStartName_))),e.endSet_&&(n.endAt=Nn(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+Nn(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function ry(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Rv&&(t.i=e.index_.toString()),t}var iy=function(e){Kt(n,e);var t=$t(n);function n(e,r,i,a){var o;return Ne(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=$d("p:rest:"),o.listens_={},o}return(0,Pe.Z)(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var s=n.getListenId_(e,r),u={};this.listens_[s]=u;var c=ny(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),On(a.listens_,s)===u)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=ny(e._queryParams),r=e._path.toString(),i=new xn;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var o=(0,a.Z)(i,2),s=o[0],u=o[1];s&&s.accessToken&&(n.auth=s.accessToken),u&&u.token&&(n.ac=u.token);var c=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+Un(n);t.log_("Sending REST request for "+c);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(r&&4===l.readyState){t.log_("REST Response for "+c+" received. status:",l.status,"response:",l.responseText);var e=null;if(l.status>=200&&l.status<300){try{e=Rn(l.responseText)}catch(n){ep("Failed to parse JSON response for "+c+": "+l.responseText)}r(null,e)}else 401!==l.status&&404!==l.status&&ep("Got unsuccessful REST response for "+c+" Status: "+l.status),r(l.status);r=null}},l.open("GET",c,!0),l.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(rn(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(jp),ay=function(){function e(){Ne(this,e),this.rootNode_=Lv.EMPTY_NODE}return(0,Pe.Z)(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function oy(){return{value:null,children:new Map}}function sy(e,t,n){if($p(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=zp(t);e.children.has(r)||e.children.set(r,oy()),sy(e.children.get(r),t=Hp(t),n)}}function uy(e,t){if($p(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(Rv,(function(t,n){sy(e,new qp(t),n)})),uy(e,t)}if(e.children.size>0){var r=zp(t);if(t=Hp(t),e.children.has(r))uy(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function cy(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){cy(r,new qp(t.toString()+"/"+e),n)}))}var ly,hy=function(){function e(t){Ne(this,e),this.collection_=t,this.last_=null}return(0,Pe.Z)(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&cp(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),fy=function(){function e(t,n){Ne(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new hy(t);var r=1e4+2e4*Math.random();yp(this.reportStats_.bind(this),Math.floor(r))}return(0,Pe.Z)(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;cp(t,(function(t,i){i>0&&An(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),yp(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function dy(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(ly||(ly={}));var py,vy=function(){function e(t,n,r){Ne(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=ly.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return(0,Pe.Z)(e,[{key:"operationForChild",value:function(t){if($p(this.path)){if(null!=this.affectedTree.value)return rn(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new qp(t));return new e(Bp(),n,this.revert)}return rn(zp(this.path)===t,"operationForChild called for unrelated child."),new e(Hp(this.path),this.affectedTree,this.revert)}}]),e}(),yy=function(){function e(t,n){Ne(this,e),this.source=t,this.path=n,this.type=ly.LISTEN_COMPLETE}return(0,Pe.Z)(e,[{key:"operationForChild",value:function(t){return $p(this.path)?new e(this.source,Bp()):new e(this.source,Hp(this.path))}}]),e}(),my=function(){function e(t,n,r){Ne(this,e),this.source=t,this.path=n,this.snap=r,this.type=ly.OVERWRITE}return(0,Pe.Z)(e,[{key:"operationForChild",value:function(t){return $p(this.path)?new e(this.source,Bp(),this.snap.getImmediateChild(t)):new e(this.source,Hp(this.path),this.snap)}}]),e}(),gy=function(){function e(t,n,r){Ne(this,e),this.source=t,this.path=n,this.children=r,this.type=ly.MERGE}return(0,Pe.Z)(e,[{key:"operationForChild",value:function(t){if($p(this.path)){var n=this.children.subtree(new qp(t));return n.isEmpty()?null:n.value?new my(this.source,Bp(),n.value):new e(this.source,Bp(),n)}return rn(zp(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,Hp(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),ky=function(){function e(t,n,r){Ne(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return(0,Pe.Z)(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if($p(e))return this.isFullyInitialized()&&!this.filtered_;var t=zp(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),by=(0,Pe.Z)((function e(t){Ne(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function _y(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw an("Should only compare child_ events.");var r=new cv(t.childName,t.snapshotNode),i=new cv(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function wy(e,t){return{eventCache:e,serverCache:t}}function xy(e,t,n,r){return wy(new ky(t,n,r),e.serverCache)}function Sy(e,t,n,r){return wy(e.eventCache,new ky(t,n,r))}function Ty(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Iy(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var Ey=function(){return py||(py=new mv(ap)),py},Cy=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ey();Ne(this,e),this.value=t,this.children=n}return(0,Pe.Z)(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:Bp(),value:this.value};if($p(e))return null;var n=zp(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(Hp(e),t);return null!=i?{path:Yp(new qp(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if($p(t))return this;var n=zp(t),r=this.children.get(n);return null!==r?r.subtree(Hp(t)):new e(null)}},{key:"set",value:function(t,n){if($p(t))return new e(n,this.children);var r=zp(t),i=(this.children.get(r)||new e(null)).set(Hp(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if($p(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=zp(t),r=this.children.get(n);if(r){var i,a=r.remove(Hp(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if($p(e))return this.value;var t=zp(e),n=this.children.get(t);return n?n.get(Hp(e)):null}},{key:"setTree",value:function(t,n){if($p(t))return n;var r,i=zp(t),a=(this.children.get(i)||new e(null)).setTree(Hp(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(Bp(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(Yp(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,Bp(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if($p(e))return null;var i=zp(e),a=this.children.get(i);return a?a.findOnPath_(Hp(e),Yp(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,Bp(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if($p(t))return this;this.value&&r(n,this.value);var i=zp(t),a=this.children.get(i);return a?a.foreachOnPath_(Hp(t),Yp(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(Bp(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(Yp(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return cp(t,(function(e,t){n=n.set(new qp(e),t)})),n}}]),e}(),Ry=function(){function e(t){Ne(this,e),this.writeTree_=t}return(0,Pe.Z)(e,null,[{key:"empty",value:function(){return new e(new Cy(null))}}]),e}();function Ny(e,t,n){if($p(t))return new Ry(new Cy(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=Xp(i,t);return a=a.updateChild(o,n),new Ry(e.writeTree_.set(i,a))}var s=new Cy(n),u=e.writeTree_.setTree(t,s);return new Ry(u)}function Py(e,t,n){var r=e;return cp(n,(function(e,n){r=Ny(r,Yp(t,e),n)})),r}function Ay(e,t){if($p(t))return Ry.empty();var n=e.writeTree_.setTree(t,new Cy(null));return new Ry(n)}function Oy(e,t){return null!=Dy(e,t)}function Dy(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Xp(n.path,t)):null}function Ly(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Rv,(function(e,n){t.push(new cv(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new cv(e,n.value))})),t}function My(e,t){if($p(t))return e;var n=Dy(e,t);return new Ry(null!=n?new Cy(n):e.writeTree_.subtree(t))}function Fy(e){return e.writeTree_.isEmpty()}function Uy(e,t){return jy(Bp(),e.writeTree_,t)}function jy(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(rn(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=jy(Yp(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(Yp(e,".priority"),r)),n}function Zy(e,t){return em(t,e)}function Vy(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function qy(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));rn(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var s=e.allWrites[o];s.visible&&(o>=n&&By(s,r.path)?i=!1:tv(r.path,s.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=Wy(e.allWrites,zy,Bp()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=Ay(e.visibleWrites,r.path):cp(r.children,(function(t){e.visibleWrites=Ay(e.visibleWrites,Yp(r.path,t))}));return!0}return!1}function By(e,t){if(e.snap)return tv(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&tv(Yp(e.path,n),t))return!0;return!1}function zy(e){return e.visible}function Wy(e,t,n){for(var r=Ry.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,s=void 0;if(a.snap)tv(n,o)?r=Ny(r,s=Xp(n,o),a.snap):tv(o,n)&&(s=Xp(o,n),r=Ny(r,Bp(),a.snap.getChild(s)));else{if(!a.children)throw an("WriteRecord should have .snap or .children");if(tv(n,o))r=Py(r,s=Xp(n,o),a.children);else if(tv(o,n))if($p(s=Xp(o,n)))r=Py(r,Bp(),a.children);else{var u=On(a.children,zp(s));if(u){var c=u.getChild(Hp(s));r=Ny(r,Bp(),c)}}}}}return r}function Hy(e,t,n,r,i){if(r||i){var a=My(e.visibleWrites,t);if(!i&&Fy(a))return n;if(i||null!=n||Oy(a,Bp())){return Uy(Wy(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(tv(e.path,t)||tv(t,e.path))}),t),n||Lv.EMPTY_NODE)}return null}var o=Dy(e.visibleWrites,t);if(null!=o)return o;var s=My(e.visibleWrites,t);return Fy(s)?n:null!=n||Oy(s,Bp())?Uy(s,n||Lv.EMPTY_NODE):null}function Ky(e,t,n,r){return Hy(e.writeTree,e.treePath,t,n,r)}function Gy(e,t){return function(e,t,n){var r=Lv.EMPTY_NODE,i=Dy(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Rv,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=My(e.visibleWrites,t);return n.forEachChild(Rv,(function(e,t){var n=Uy(My(a,new qp(e)),t);r=r.updateImmediateChild(e,n)})),Ly(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return Ly(My(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function Qy(e,t,n,r){return function(e,t,n,r,i){rn(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=Yp(t,n);if(Oy(e.visibleWrites,a))return null;var o=My(e.visibleWrites,a);return Fy(o)?i.getChild(n):Uy(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function Yy(e,t){return function(e,t){return Dy(e.visibleWrites,t)}(e.writeTree,Yp(e.treePath,t))}function $y(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var s,u=My(e.visibleWrites,t),c=Dy(u,Bp());if(null!=c)s=c;else{if(null==n)return[];s=Uy(u,n)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var l=[],h=o.getCompare(),f=a?s.getReverseIteratorFrom(r,o):s.getIteratorFrom(r,o),d=f.getNext();d&&l.length<i;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function Xy(e,t,n){return function(e,t,n,r){var i=Yp(t,n),a=Dy(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?Uy(My(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function Jy(e,t){return em(Yp(e.treePath,t),e.writeTree)}function em(e,t){return{treePath:e,writeTree:t}}var tm=function(){function e(){Ne(this,e),this.changeMap=new Map}return(0,Pe.Z)(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;rn("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),rn(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Gv(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Kv(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,Hv(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw an("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Gv(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),nm=new(function(){function e(){Ne(this,e)}return(0,Pe.Z)(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),rm=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Ne(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return(0,Pe.Z)(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new ky(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Xy(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Iy(this.viewCache_),i=$y(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function im(e,t,n,r,i){var a,o,s=new tm;if(n.type===ly.OVERWRITE){var u=n;u.source.fromUser?a=sm(e,t,u.path,u.snap,r,i,s):(rn(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.serverCache.isFiltered()&&!$p(u.path),a=om(e,t,u.path,u.snap,r,i,o,s))}else if(n.type===ly.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var s=t;return r.foreach((function(r,u){var c=Yp(n,r);um(t,zp(c))&&(s=sm(e,s,c,u,i,a,o))})),r.foreach((function(r,u){var c=Yp(n,r);um(t,zp(c))||(s=sm(e,s,c,u,i,a,o))})),s}(e,t,c.path,c.children,r,i,s):(rn(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=lm(e,t,c.path,c.children,r,i,o,s))}else if(n.type===ly.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=Yy(r,n))return t;var s,u=new rm(r,t,i),c=t.eventCache.getNode();if($p(n)||".priority"===zp(n)){var l;if(t.serverCache.isFullyInitialized())l=Ky(r,Iy(t));else{var h=t.serverCache.getNode();rn(h instanceof Lv,"serverChildren would be complete if leaf node"),l=Gy(r,h)}s=e.filter.updateFullNode(c,l,a)}else{var f=zp(n),d=Xy(r,f,t.serverCache);null==d&&t.serverCache.isCompleteForChild(f)&&(d=c.getImmediateChild(f)),(s=null!=d?e.filter.updateChild(c,f,d,Hp(n),u,a):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(c,f,Lv.EMPTY_NODE,Hp(n),u,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Ky(r,Iy(t))).isLeafNode()&&(s=e.filter.updateFullNode(s,o,a))}return o=t.serverCache.isFullyInitialized()||null!=Yy(r,Bp()),xy(t,s,o,e.filter.filtersNodes())}(e,t,l.path,r,i,s):function(e,t,n,r,i,a,o){if(null!=Yy(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if($p(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return om(e,t,n,u.getNode().getChild(n),i,a,s,o);if($p(n)){var c=new Cy(null);return u.getNode().forEachChild(fv,(function(e,t){c=c.set(new qp(e),t)})),lm(e,t,n,c,i,a,s,o)}return t}var l=new Cy(null);return r.foreach((function(e,t){var r=Yp(n,e);u.isCompleteForPath(r)&&(l=l.set(e,u.getNode().getChild(r)))})),lm(e,t,n,l,i,a,s,o)}(e,t,l.path,l.affectedTree,r,i,s)}else{if(n.type!==ly.LISTEN_COMPLETE)throw an("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=Sy(t,a.getNode(),a.isFullyInitialized()||$p(n),a.isFiltered());return am(e,o,n,r,nm,i)}(e,t,n.path,r,s)}var h=s.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=Ty(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(Wv(Ty(t)))}}(t,a,h),{viewCache:a,changes:h}}function am(e,t,n,r,i,a){var o,s,u=t.eventCache;if(null!=Yy(r,n))return t;if($p(n))if(rn(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=Iy(t),l=Gy(r,c instanceof Lv?c:Lv.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var h=Ky(r,Iy(t));o=e.filter.updateFullNode(t.eventCache.getNode(),h,a)}else{var f=zp(n);if(".priority"===f){rn(1===Wp(n),"Can't have a priority with additional path components");var d=u.getNode(),p=Qy(r,n,d,s=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):u.getNode()}else{var v,y=Hp(n);if(u.isCompleteForChild(f)){s=t.serverCache.getNode();var m=Qy(r,n,u.getNode(),s);v=null!=m?u.getNode().getImmediateChild(f).updateChild(y,m):u.getNode().getImmediateChild(f)}else v=Xy(r,f,t.serverCache);o=null!=v?e.filter.updateChild(u.getNode(),f,v,y,i,a):u.getNode()}}return xy(t,o,u.isFullyInitialized()||$p(n),e.filter.filtersNodes())}function om(e,t,n,r,i,a,o,s){var u,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if($p(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=zp(n);if(!c.isCompleteForPath(n)&&Wp(n)>1)return t;var d=Hp(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,nm,null)}var v=Sy(t,u,c.isFullyInitialized()||$p(n),l.filtersNodes());return am(e,v,n,i,new rm(i,v,a),s)}function sm(e,t,n,r,i,a,o){var s,u,c=t.eventCache,l=new rm(i,t,a);if($p(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,o),s=xy(t,u,!0,e.filter.filtersNodes());else{var h=zp(n);if(".priority"===h)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=xy(t,u,c.isFullyInitialized(),c.isFiltered());else{var f,d=Hp(n),p=c.getNode().getImmediateChild(h);if($p(d))f=r;else{var v=l.getCompleteChild(h);f=null!=v?".priority"===Kp(d)&&v.getChild(Qp(d)).isEmpty()?v:v.updateChild(d,r):Lv.EMPTY_NODE}if(p.equals(f))s=t;else s=xy(t,e.filter.updateChild(c.getNode(),h,f,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return s}function um(e,t){return e.eventCache.isCompleteForChild(t)}function cm(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function lm(e,t,n,r,i,a,o,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,c=t;u=$p(n)?r:new Cy(null).setTree(n,r);var l=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=cm(0,t.serverCache.getNode().getImmediateChild(n),r);c=om(e,c,new qp(n),u,i,a,o,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!l.hasChild(n)&&!u){var h=cm(0,t.serverCache.getNode().getImmediateChild(n),r);c=om(e,c,new qp(n),h,i,a,o,s)}})),c}var hm,fm=function(){function e(t,n){Ne(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new Qv(i.getIndex()),o=(r=i).loadsAllData()?new Qv(r.getIndex()):r.hasLimit()?new $v(r):new Yv(r);this.processor_=function(e){return{filter:e}}(o);var s=n.serverCache,u=n.eventCache,c=a.updateFullNode(Lv.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(Lv.EMPTY_NODE,u.getNode(),null),h=new ky(c,s.isFullyInitialized(),a.filtersNodes()),f=new ky(l,u.isFullyInitialized(),o.filtersNodes());this.viewCache_=wy(f,h),this.eventGenerator_=new by(this.query_)}return(0,Pe.Z)(e,[{key:"query",get:function(){return this.query_}}]),e}();function dm(e,t){var n=Iy(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!$p(t)&&!n.getImmediateChild(zp(t)).isEmpty())?n.getChild(t):null}function pm(e){return 0===e.eventRegistrations_.length}function vm(e,t,n){var r=[];if(n){rn(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var s=e.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(s)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function ym(e,t,n,r){t.type===ly.MERGE&&null!==t.source.queryId&&(rn(Iy(e.viewCache_),"We should always have a full cache before handling merges"),rn(Ty(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,s=im(e.processor_,o,t,n,r);return i=e.processor_,a=s.viewCache,rn(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),rn(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),rn(s.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,mm(e,s.changes,s.viewCache.eventCache.getNode(),null)}function mm(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),_y(e,i,"child_removed",t,r,n),_y(e,i,"child_added",t,r,n),_y(e,i,"child_moved",a,r,n),_y(e,i,"child_changed",t,r,n),_y(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var gm,km=(0,Pe.Z)((function e(){Ne(this,e),this.views=new Map}));function bm(e){return 0===e.views.size}function _m(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return rn(null!=a,"SyncTree gave us an op for an invalid query."),ym(a,t,n,r)}var o,s=[],u=Wt(e.views.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s=s.concat(ym(c,t,n,r))}}catch(l){u.e(l)}finally{u.f()}return s}function wm(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var s=Ky(n,i?r:null),u=!1;s?u=!0:r instanceof Lv?(s=Gy(n,r),u=!1):(s=Lv.EMPTY_NODE,u=!1);var c=wy(new ky(s,u,!1),new ky(r,i,!1));return new fm(t,c)}return o}function xm(e,t,n,r,i,a){var o=wm(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Rv,(function(e,t){r.push(Hv(e,t))})),n.isFullyInitialized()&&r.push(Wv(n.getNode())),mm(e,r,n.getNode(),t)}(o,n)}function Sm(e,t,n,r){var i=t._queryIdentifier,o=[],s=[],u=Rm(e);if("default"===i){var c,l=Wt(e.views.entries());try{for(l.s();!(c=l.n()).done;){var h=(0,a.Z)(c.value,2),f=h[0],d=h[1];s=s.concat(vm(d,n,r)),pm(d)&&(e.views.delete(f),d.query._queryParams.loadsAllData()||o.push(d.query))}}catch(v){l.e(v)}finally{l.f()}}else{var p=e.views.get(i);p&&(s=s.concat(vm(p,n,r)),pm(p)&&(e.views.delete(i),p.query._queryParams.loadsAllData()||o.push(p.query)))}return u&&!Rm(e)&&o.push(new(rn(hm,"Reference.ts has not been loaded"),hm)(t._repo,t._path)),{removed:o,events:s}}function Tm(e){var t,n=[],r=Wt(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function Im(e,t){var n,r=null,i=Wt(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||dm(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function Em(e,t){if(t._queryParams.loadsAllData())return Nm(e);var n=t._queryIdentifier;return e.views.get(n)}function Cm(e,t){return null!=Em(e,t)}function Rm(e){return null!=Nm(e)}function Nm(e){var t,n=Wt(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var Pm=1,Am=(0,Pe.Z)((function e(t){Ne(this,e),this.listenProvider_=t,this.syncPointTree_=new Cy(null),this.pendingWriteTree_={visibleWrites:Ry.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function Om(e,t,n,r,i){return function(e,t,n,r,i){rn(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Ny(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?qm(e,new my({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Dm(e,t,n,r){!function(e,t,n,r){rn(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=Py(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=Cy.fromObject(n);return qm(e,new gy({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function Lm(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Vy(e.pendingWriteTree_,t),i=qy(e.pendingWriteTree_,t);if(i){var a=new Cy(null);return null!=r.snap?a=a.set(Bp(),!0):cp(r.children,(function(e){a=a.set(new qp(e),!0)})),qm(e,new vy(r.path,a,n))}return[]}function Mm(e,t,n){return qm(e,new my({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Fm(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t._path,o=e.syncPointTree_.get(a),s=[];if(o&&("default"===t._queryIdentifier||Cm(o,t))){var u=Sm(o,t,n,r);bm(o)&&(e.syncPointTree_=e.syncPointTree_.remove(a));var c=u.removed;if(s=u.events,!i){var l=-1!==c.findIndex((function(e){return e._queryParams.loadsAllData()})),h=e.syncPointTree_.findOnPath(a,(function(e,t){return Rm(t)}));if(l&&!h){var f=e.syncPointTree_.subtree(a);if(!f.isEmpty())for(var d=$m(f),p=0;p<d.length;++p){var v=d[p],y=v.query,m=Wm(e,v);e.listenProvider_.startListening(Xm(y),Hm(e,y),m.hashFn,m.onComplete)}}if(!h&&c.length>0&&!r)if(l){var g=null;e.listenProvider_.stopListening(Xm(t),g)}else c.forEach((function(t){var n=e.queryToTagMap.get(Km(t));e.listenProvider_.stopListening(Xm(t),n)}))}Jm(e,c)}return s}function Um(e,t,n,r){var i=Gm(e,r);if(null!=i){var a=Qm(i),o=a.path,s=a.queryId,u=Xp(o,t);return Ym(e,o,new my(dy(s),u,n))}return[]}function jm(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t._path,a=null,o=!1;e.syncPointTree_.foreachOnPath(i,(function(e,t){var n=Xp(e,i);a=a||Im(t,n),o=o||Rm(t)}));var s,u=e.syncPointTree_.get(i);if(u?(o=o||Rm(u),a=a||Im(u,Bp())):(u=new km,e.syncPointTree_=e.syncPointTree_.set(i,u)),null!=a)s=!0;else{s=!1,a=Lv.EMPTY_NODE;var c=e.syncPointTree_.subtree(i);c.foreachChild((function(e,t){var n=Im(t,Bp());n&&(a=a.updateImmediateChild(e,n))}))}var l=Cm(u,t);if(!l&&!t._queryParams.loadsAllData()){var h=Km(t);rn(!e.queryToTagMap.has(h),"View does not exist, but we have a tag");var f=eg();e.queryToTagMap.set(h,f),e.tagToQueryMap.set(f,h)}var d=Zy(e.pendingWriteTree_,i),p=xm(u,t,n,d,a,s);if(!l&&!o&&!r){var v=Em(u,t);p=p.concat(tg(e,t,v))}return p}function Zm(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=Im(n,Xp(e,t));if(r)return r}));return Hy(r,t,i,n,!0)}function Vm(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=Xp(e,n);r=r||Im(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||Im(i,Bp()):(i=new km,e.syncPointTree_=e.syncPointTree_.set(n,i));var a=null!=r,o=a?new ky(r,!0,!1):null;return function(e){return Ty(e.viewCache_)}(wm(i,t,Zy(e.pendingWriteTree_,t._path),a?o.getNode():Lv.EMPTY_NODE,a))}function qm(e,t){return Bm(t,e.syncPointTree_,null,Zy(e.pendingWriteTree_,Bp()))}function Bm(e,t,n,r){if($p(e.path))return zm(e,t,n,r);var i=t.get(Bp());null==n&&null!=i&&(n=Im(i,Bp()));var a=[],o=zp(e.path),s=e.operationForChild(o),u=t.children.get(o);if(u&&s){var c=n?n.getImmediateChild(o):null,l=Jy(r,o);a=a.concat(Bm(s,u,c,l))}return i&&(a=a.concat(_m(i,e,r,n))),a}function zm(e,t,n,r){var i=t.get(Bp());null==n&&null!=i&&(n=Im(i,Bp()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,s=Jy(r,t),u=e.operationForChild(t);u&&(a=a.concat(zm(u,i,o,s)))})),i&&(a=a.concat(_m(i,e,r,n))),a}function Wm(e,t){var n=t.query,r=Hm(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||Lv.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=Gm(e,n);if(r){var i=Qm(r),a=i.path,o=i.queryId,s=Xp(a,t);return Ym(e,a,new yy(dy(o),s))}return[]}(e,n._path,r):function(e,t){return qm(e,new yy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return Fm(e,n,null,i)}}}function Hm(e,t){var n=Km(t);return e.queryToTagMap.get(n)}function Km(e){return e._path.toString()+"$"+e._queryIdentifier}function Gm(e,t){return e.tagToQueryMap.get(t)}function Qm(e){var t=e.indexOf("$");return rn(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new qp(e.substr(0,t))}}function Ym(e,t,n){var r=e.syncPointTree_.get(t);return rn(r,"Missing sync point for query tag that we're tracking"),_m(r,n,Zy(e.pendingWriteTree_,t),null)}function $m(e){return e.fold((function(e,t,n){if(t&&Rm(t))return[Nm(t)];var r=[];return t&&(r=Tm(t)),cp(n,(function(e,t){r=r.concat(t)})),r}))}function Xm(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(rn(gm,"Reference.ts has not been loaded"),gm)(e._repo,e._path):e}function Jm(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=Km(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}function eg(){return Pm++}function tg(e,t,n){var r=t._path,i=Hm(e,t),a=Wm(e,n),o=e.listenProvider_.startListening(Xm(t),i,a.hashFn,a.onComplete),s=e.syncPointTree_.subtree(r);if(i)rn(!Rm(s.value),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold((function(e,t,n){if(!$p(e)&&t&&Rm(t))return[Nm(t).query];var r=[];return t&&(r=r.concat(Tm(t).map((function(e){return e.query})))),cp(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<u.length;++c){var l=u[c];e.listenProvider_.stopListening(Xm(l),Hm(e,l))}return o}var ng=function(){function e(t){Ne(this,e),this.node_=t}return(0,Pe.Z)(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),rg=function(){function e(t,n){Ne(this,e),this.syncTree_=t,this.path_=n}return(0,Pe.Z)(e,[{key:"getImmediateChild",value:function(t){var n=Yp(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return Zm(this.syncTree_,this.path_)}}]),e}(),ig=function(e,t,n){return e&&"object"===typeof e?(rn(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?ag(e[".sv"],t,n):"object"===typeof e[".sv"]?og(e[".sv"],t):void rn(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},ag=function(e,t,n){if("timestamp"===e)return n.timestamp;rn(!1,"Unexpected server value: "+e)},og=function(e,t,n){e.hasOwnProperty("increment")||rn(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&rn(!1,"Unexpected increment value: "+r);var i=t.node();if(rn(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},sg=function(e,t,n,r){return cg(t,new rg(n,e),r)},ug=function(e,t,n){return cg(e,new ng(t),n)};function cg(e,t,n){var r,i=e.getPriority().val(),a=ig(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,s=ig(o.getValue(),t,n);return s!==o.getValue()||a!==o.getPriority().val()?new Tv(s,Fv(a)):e}var u=e;return r=u,a!==u.getPriority().val()&&(r=r.updatePriority(new Tv(a))),u.forEachChild(Rv,(function(e,i){var a=cg(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var lg=(0,Pe.Z)((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};Ne(this,e),this.name=t,this.parent=n,this.node=r}));function hg(e,t){for(var n=t instanceof qp?t:new qp(t),r=e,i=zp(n);null!==i;){var a=On(r.node.children,i)||{children:{},childCount:0};r=new lg(i,r,a),i=zp(n=Hp(n))}return r}function fg(e){return e.node.value}function dg(e,t){e.node.value=t,gg(e)}function pg(e){return e.node.childCount>0}function vg(e,t){cp(e.node.children,(function(n,r){t(new lg(n,e,r))}))}function yg(e,t,n,r){n&&!r&&t(e),vg(e,(function(e){yg(e,t,!0,r)})),n&&r&&t(e)}function mg(e){return new qp(null===e.parent?e.name:mg(e.parent)+"/"+e.name)}function gg(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===fg(e)&&!pg(e)}(n),i=An(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,gg(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,gg(e))}(e.parent,e.name,e)}var kg=/[\[\].#$\/\u0000-\u001F\u007F]/,bg=/[\[\].#$\u0000-\u001F\u007F]/,_g=10485760,wg=function(e){return"string"===typeof e&&0!==e.length&&!kg.test(e)},xg=function(e){return"string"===typeof e&&0!==e.length&&!bg.test(e)},Sg=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!tp(e)||e&&"object"===typeof e&&An(e,".sv")},Tg=function(e,t,n,r){r&&void 0===t||Ig(Hn(e,"value"),t,n)},Ig=function e(t,n,r){var i=r instanceof qp?new nv(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+iv(i));if("function"===typeof n)throw new Error(t+"contains a function "+iv(i)+" with contents = "+n.toString());if(tp(n))throw new Error(t+"contains "+n.toString()+" "+iv(i));if("string"===typeof n&&n.length>_g/3&&Qn(n)>_g)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+iv(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(cp(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!wg(n)))throw new Error(t+" contains an invalid key ("+n+") "+iv(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Qn(t),rv(e)}(i,n),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=Qn(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+iv(i)+" in addition to actual children.")}},Eg=function(e,t,n,r){if(!r||void 0!==t){var i=Hn(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var a=[];cp(t,(function(e,t){var r=new qp(e);if(Ig(i,t,Yp(n,r)),".priority"===Kp(r)&&!Sg(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=Gp(r=t[n]),a=0;a<i.length;a++)if(".priority"===i[a]&&a===i.length-1);else if(!wg(i[a]))throw new Error(e+"contains an invalid key ("+i[a]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(Jp);var o=null;for(n=0;n<t.length;n++){if(r=t[n],null!==o&&tv(o,r))throw new Error(e+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(i,a)}},Cg=function(e,t,n){if(!n||void 0!==t){if(tp(t))throw new Error(Hn(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Sg(t))throw new Error(Hn(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Rg=function(e,t,n,r){if((!r||void 0!==n)&&!wg(n))throw new Error(Hn(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Ng=function(e,t,n,r){if((!r||void 0!==n)&&!xg(n))throw new Error(Hn(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Pg=function(e,t){if(".info"===zp(t))throw new Error(e+" failed = Can't modify data under /.info/")},Ag=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!wg(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),xg(e)}(n))throw new Error(Hn(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Og=(0,Pe.Z)((function e(){Ne(this,e),this.eventLists_=[],this.recursionDepth_=0}));function Dg(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||ev(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function Lg(e,t,n){Dg(e,n),Fg(e,(function(e){return ev(e,t)}))}function Mg(e,t,n){Dg(e,n),Fg(e,(function(e){return tv(e,t)||tv(t,e)}))}function Fg(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(Ug(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function Ug(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();Kd&&Yd("event: "+n.toString()),vp(r)}}}var jg="repo_interrupt",Zg=function(){function e(t,n,r,i){Ne(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Og,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=oy(),this.transactionQueueTree_=new lg,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return(0,Pe.Z)(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function Vg(e,t,n){if(e.stats_=Rp(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new iy(e.repoInfo_,(function(t,n,r,i){zg(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return Wg(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Nn(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new sv(e.repoInfo_,t,(function(t,n,r,i){zg(e,t,n,r,i)}),(function(t){Wg(e,t)}),(function(t){!function(e,t){cp(t,(function(t,n){Hg(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return Cp[n]||(Cp[n]=t()),Cp[n]}(e.repoInfo_,(function(){return new fy(e.stats_,e.server_)})),e.infoData_=new ay,e.infoSyncTree_=new Am({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=Mm(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),Hg(e,"connected",!1),e.serverSyncTree_=new Am({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);Mg(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function qg(e){var t=e.infoData_.getNode(new qp(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Bg(e){return function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e}({timestamp:qg(e)})}function zg(e,t,n,r,i){e.dataUpdateCount++;var a=new qp(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var s=Ln(n,(function(e){return Fv(e)}));o=function(e,t,n,r){var i=Gm(e,r);if(i){var a=Qm(i),o=a.path,s=a.queryId,u=Xp(o,t),c=Cy.fromObject(n);return Ym(e,o,new gy(dy(s),u,c))}return[]}(e.serverSyncTree_,a,s,i)}else{var u=Fv(n);o=Um(e.serverSyncTree_,a,u,i)}else if(r){var c=Ln(n,(function(e){return Fv(e)}));o=function(e,t,n){var r=Cy.fromObject(n);return qm(e,new gy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=Fv(n);o=Mm(e.serverSyncTree_,a,l)}var h=a;o.length>0&&(h=ik(e,a)),Mg(e.eventQueue_,h,o)}function Wg(e,t){Hg(e,"connected",t),!1===t&&function(e){Jg(e,"onDisconnectEvents");var t=Bg(e),n=oy();cy(e.onDisconnect_,Bp(),(function(r,i){var a=sg(r,i,e.serverSyncTree_,t);sy(n,r,a)}));var r=[];cy(n,Bp(),(function(t,n){r=r.concat(Mm(e.serverSyncTree_,t,n));var i=ck(e,t);ik(e,i)})),e.onDisconnect_=oy(),Mg(e.eventQueue_,Bp(),r)}(e)}function Hg(e,t,n){var r=new qp("/.info/"+t),i=Fv(n);e.infoData_.updateSnapshot(r,i);var a=Mm(e.infoSyncTree_,r,i);Mg(e.eventQueue_,r,a)}function Kg(e){return e.nextWriteId_++}function Gg(e,t,n,r,i){Jg(e,"set",{path:t.toString(),value:n,priority:r});var a=Bg(e),o=Fv(n,r),s=Zm(e.serverSyncTree_,t),u=ug(o,s,a),c=Kg(e),l=Om(e.serverSyncTree_,t,u,c,!0);Dg(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||ep("set at "+t+" failed: "+n);var o=Lm(e.serverSyncTree_,c,!a);Mg(e.eventQueue_,t,o),ek(e,i,n,r)}));var h=ck(e,t);ik(e,h),Mg(e.eventQueue_,h,[])}function Qg(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&uy(e.onDisconnect_,t),ek(e,n,r,i)}))}function Yg(e,t,n,r){var i=Fv(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,a){"ok"===n&&sy(e.onDisconnect_,t,i),ek(e,r,n,a)}))}function $g(e,t,n){var r;r=".info"===zp(t._path)?Fm(e.infoSyncTree_,t,n):Fm(e.serverSyncTree_,t,n),Lg(e.eventQueue_,t._path,r)}function Xg(e){e.persistentConnection_&&e.persistentConnection_.interrupt(jg)}function Jg(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Yd.apply(void 0,[t].concat(r))}function ek(e,t,n,r){t&&vp((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function tk(e,t,n){return Zm(e.serverSyncTree_,t,n)||Lv.EMPTY_NODE}function nk(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||uk(e,t),fg(t)){var n=ok(e,t);rn(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&rk(e,mg(t),n)}else pg(t)&&vg(t,(function(t){nk(e,t)}))}function rk(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=tk(e,t,r),a=i,o=i.hash(),s=0;s<n.length;s++){var u=n[s];rn(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var c=Xp(t,u.path);a=a.updateChild(c,u.currentOutputSnapshotRaw)}var l=a.val(!0),h=t;e.server_.put(h.toString(),l,(function(r){Jg(e,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(Lm(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)o(s);uk(e,hg(e.transactionQueueTree_,t)),nk(e,e.transactionQueueTree_),Mg(e.eventQueue_,t,i);for(var u=0;u<a.length;u++)vp(a[u])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{ep("transaction at "+h.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}ik(e,t)}}),o)}function ik(e,t){var n=ak(e,t),r=mg(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),s=function(a){var s,u=t[a],c=Xp(n,u.path),l=!1,h=void 0;if(rn(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)l=!0,h=u.abortReason,i=i.concat(Lm(e.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=25)l=!0,h="maxretry",i=i.concat(Lm(e.serverSyncTree_,u.currentWriteId,!0));else{var f=tk(e,u.path,o);u.currentInputSnapshot=f;var d=t[a].update(f.val());if(void 0!==d){Ig("transaction failed: Data returned ",d,u.path);var p=Fv(d);"object"===typeof d&&null!=d&&An(d,".priority")||(p=p.updatePriority(f.getPriority()));var v=u.currentWriteId,y=Bg(e),m=ug(p,f,y);u.currentOutputSnapshotRaw=p,u.currentOutputSnapshotResolved=m,u.currentWriteId=Kg(e),o.splice(o.indexOf(v),1),i=(i=i.concat(Om(e.serverSyncTree_,u.path,m,u.currentWriteId,u.applyLocally))).concat(Lm(e.serverSyncTree_,v,!0))}else l=!0,h="nodata",i=i.concat(Lm(e.serverSyncTree_,u.currentWriteId,!0))}Mg(e.eventQueue_,n,i),i=[],l&&(t[a].status=2,s=t[a].unwatcher,setTimeout(s,Math.floor(0)),t[a].onComplete&&("nodata"===h?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(h),!1,null)}))))},u=0;u<t.length;u++)s(u);uk(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)vp(r[c]);nk(e,e.transactionQueueTree_)}(e,ok(e,n),r),r}function ak(e,t){var n,r=e.transactionQueueTree_;for(n=zp(t);null!==n&&void 0===fg(r);)r=hg(r,n),n=zp(t=Hp(t));return r}function ok(e,t){var n=[];return sk(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function sk(e,t,n){var r=fg(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);vg(t,(function(t){sk(e,t,n)}))}function uk(e,t){var n=fg(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,dg(t,n.length>0?n:void 0)}vg(t,(function(t){uk(e,t)}))}function ck(e,t){var n=mg(ak(e,t)),r=hg(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){lk(e,t)})),lk(e,r),yg(r,(function(t){lk(e,t)})),n}function lk(e,t){var n=fg(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(rn(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(rn(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Lm(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?dg(t,void 0):n.length=a+1,Mg(e.eventQueue_,mg(t),i);for(var s=0;s<r.length;s++)vp(r[s])}}var hk=function(e,t){var n=fk(e),r=n.namespace;"firebase.com"===n.domain&&Jd(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Jd("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ep("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Sp(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new qp(n.pathString)}},fk=function(e){var t="",n="",r="",i="",a="",o=!0,s="https",u=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(s=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(l,h)),l<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(l,h)));var f=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=Wt(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):ep("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,h)));(c=t.indexOf(":"))>=0?(o="https"===s||"wss"===s,u=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in f&&(a=f.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:o,scheme:s,pathString:i,namespace:a}},dk=function(){function e(t,n,r,i){Ne(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return(0,Pe.Z)(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+Nn(this.snapshot.exportVal())}}]),e}(),pk=function(){function e(t,n,r){Ne(this,e),this.eventRegistration=t,this.error=n,this.path=r}return(0,Pe.Z)(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),vk=function(){function e(t,n){Ne(this,e),this.snapshotCallback=t,this.cancelCallback=n}return(0,Pe.Z)(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return rn(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),yk=function(){function e(t,n){Ne(this,e),this._repo=t,this._path=n}return(0,Pe.Z)(e,[{key:"cancel",value:function(){var e=new xn;return Qg(this._repo,this._path,e.wrapCallback((function(){}))),e.promise}},{key:"remove",value:function(){Pg("OnDisconnect.remove",this._path);var e=new xn;return Yg(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise}},{key:"set",value:function(e){Pg("OnDisconnect.set",this._path),Tg("OnDisconnect.set",e,this._path,!1);var t=new xn;return Yg(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}},{key:"setWithPriority",value:function(e,t){Pg("OnDisconnect.setWithPriority",this._path),Tg("OnDisconnect.setWithPriority",e,this._path,!1),Cg("OnDisconnect.setWithPriority",t,!1);var n=new xn;return function(e,t,n,r,i){var a=Fv(n,r);e.server_.onDisconnectPut(t.toString(),a.val(!0),(function(n,r){"ok"===n&&sy(e.onDisconnect_,t,a),ek(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise}},{key:"update",value:function(e){Pg("OnDisconnect.update",this._path),Eg("OnDisconnect.update",e,this._path,!1);var t=new xn;return function(e,t,n,r){if(Dn(n))return Yd("onDisconnect().update() called with empty data.  Don't do anything."),void ek(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,a){"ok"===i&&cp(n,(function(n,r){var i=Fv(r);sy(e.onDisconnect_,Yp(t,n),i)})),ek(0,r,i,a)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}}]),e}(),mk=function(){function e(t,n,r,i){Ne(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return(0,Pe.Z)(e,[{key:"key",get:function(){return $p(this._path)?null:Kp(this._path)}},{key:"ref",get:function(){return new _k(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=ry(this._queryParams),t=sp(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return ry(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=Yn(t))instanceof e))return!1;var n=this._repo===t._repo,r=ev(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();function gk(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function kk(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===fv){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==np)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==rp)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===Rv){if(null!=t&&!Sg(t)||null!=n&&!Sg(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(rn(e.getIndex()instanceof Uv||e.getIndex()===Zv,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function bk(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var _k=function(e){Kt(n,e);var t=$t(n);function n(e,r){return Ne(this,n),t.call(this,e,r,new Xv,!1)}return(0,Pe.Z)(n,[{key:"parent",get:function(){var e=Qp(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(mk),wk=function(){function e(t,n,r){Ne(this,e),this._node=t,this.ref=n,this._index=r}return(0,Pe.Z)(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new qp(t),r=Tk(this.ref,t);return new e(this._node.getChild(n),r,Rv)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,Tk(n.ref,r),Rv))}))}},{key:"hasChild",value:function(e){var t=new qp(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function xk(e,t){return(e=Yn(e))._checkNotDeleted("ref"),void 0!==t?Tk(e._root,t):e._root}function Sk(e,t){(e=Yn(e))._checkNotDeleted("refFromURL");var n=hk(t,e._repo.repoInfo_.nodeAdmin);Ag("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||Jd("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),xk(e,n.path.toString())}function Tk(e,t){var n,r,i,a;return null===zp((e=Yn(e))._path)?(n="child",r="path",a=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),Ng(n,r,i,a)):Ng("child","path",t,!1),new _k(e._repo,Yp(e._path,t))}function Ik(e,t){e=Yn(e),Pg("push",e._path),Tg("push",t,e._path,!0);var n,r=qg(e._repo),i=qv(r),a=Tk(e,i),o=Tk(e,i);return n=null!=t?Ck(o,t).then((function(){return o})):Promise.resolve(o),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}function Ek(e){return Pg("remove",e._path),Ck(e,null)}function Ck(e,t){e=Yn(e),Pg("set",e._path),Tg("set",t,e._path,!1);var n=new xn;return Gg(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function Rk(e,t){e=Yn(e),Pg("setPriority",e._path),Cg("setPriority",t,!1);var n=new xn;return Gg(e._repo,Yp(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}function Nk(e,t,n){if(Pg("setWithPriority",e._path),Tg("setWithPriority",t,e._path,!1),Cg("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new xn;return Gg(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}function Pk(e,t){Eg("update",t,e._path,!1);var n=new xn;return function(e,t,n,r){Jg(e,"update",{path:t.toString(),value:n});var i=!0,a=Bg(e),o={};if(cp(n,(function(n,r){i=!1,o[n]=sg(Yp(t,n),Fv(r),e.serverSyncTree_,a)})),i)Yd("update() called with empty data.  Don't do anything."),ek(0,r,"ok",void 0);else{var s=Kg(e),u=Dm(e.serverSyncTree_,t,o,s);Dg(e.eventQueue_,u),e.server_.merge(t.toString(),n,(function(n,i){var a="ok"===n;a||ep("update at "+t+" failed: "+n);var o=Lm(e.serverSyncTree_,s,!a),u=o.length>0?ik(e,t):t;Mg(e.eventQueue_,u,o),ek(0,r,n,i)})),cp(n,(function(n){var r=ck(e,Yp(t,n));ik(e,r)})),Mg(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function Ak(e){e=Yn(e);var t=new vk((function(){})),n=new Ok(t);return function(e,t,n){var r=Vm(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((function(r){var i,a=Fv(r).withIndex(t._queryParams.getIndex());if(jm(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())i=Mm(e.serverSyncTree_,t._path,a);else{var o=Hm(e.serverSyncTree_,t);i=Um(e.serverSyncTree_,t._path,a,o)}return Mg(e.eventQueue_,t._path,i),Fm(e.serverSyncTree_,t,n,null,!0),a}),(function(n){return Jg(e,"get for query "+Nn(t)+" failed: "+n),Promise.reject(new Error(n))}))}(e._repo,e,n).then((function(t){return new wk(t,new _k(e._repo,e._path),e._queryParams.getIndex())}))}var Ok=function(){function e(t){Ne(this,e),this.callbackContext=t}return(0,Pe.Z)(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new dk("value",this,new wk(e.snapshotNode,new _k(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new pk(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),Dk=function(){function e(t,n){Ne(this,e),this.eventType=t,this.callbackContext=n}return(0,Pe.Z)(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new pk(this,e,t):null}},{key:"createEvent",value:function(e,t){rn(null!=e.childName,"Child events should have a childName.");var n=Tk(new _k(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new dk(e.type,this,new wk(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function Lk(e,t,n,r,i){var a;if("object"===typeof r&&(a=void 0,i=r),"function"===typeof r&&(a=r),i&&i.onlyOnce){var o=n,s=function(t,n){$g(e._repo,e,c),o(t,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new vk(n,a||void 0),c="value"===t?new Ok(u):new Dk(t,u);return function(e,t,n){var r;r=".info"===zp(t._path)?jm(e.infoSyncTree_,t,n):jm(e.serverSyncTree_,t,n),Lg(e.eventQueue_,t._path,r)}(e._repo,e,c),function(){return $g(e._repo,e,c)}}function Mk(e,t,n,r){return Lk(e,"value",t,n,r)}function Fk(e,t,n,r){return Lk(e,"child_added",t,n,r)}function Uk(e,t,n,r){return Lk(e,"child_changed",t,n,r)}function jk(e,t,n,r){return Lk(e,"child_moved",t,n,r)}function Zk(e,t,n,r){return Lk(e,"child_removed",t,n,r)}function Vk(e,t,n){var r=null,i=n?new vk(n):null;"value"===t?r=new Ok(i):t&&(r=new Dk(t,i)),$g(e._repo,e,r)}var qk=(0,Pe.Z)((function e(){Ne(this,e)})),Bk=function(e){Kt(n,e);var t=$t(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this))._value=e,i._key=r,i}return(0,Pe.Z)(n,[{key:"_apply",value:function(e){Tg("endAt",this._value,e._path,!0);var t=ey(e._queryParams,this._value,this._key);if(bk(t),kk(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new mk(e._repo,e._path,t,e._orderByCalled)}}]),n}(qk);function zk(e,t){return Rg("endAt","key",t,!0),new Bk(e,t)}var Wk=function(e){Kt(n,e);var t=$t(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this))._value=e,i._key=r,i}return(0,Pe.Z)(n,[{key:"_apply",value:function(e){Tg("endBefore",this._value,e._path,!1);var t=function(e,t,n){var r;return e.index_===fv?("string"===typeof t&&(t=zv(t)),r=ey(e,t,n)):r=ey(e,t,null==n?np:zv(n)),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(bk(t),kk(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new mk(e._repo,e._path,t,e._orderByCalled)}}]),n}(qk);function Hk(e,t){return Rg("endBefore","key",t,!0),new Wk(e,t)}var Kk=function(e){Kt(n,e);var t=$t(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this))._value=e,i._key=r,i}return(0,Pe.Z)(n,[{key:"_apply",value:function(e){Tg("startAt",this._value,e._path,!0);var t=Jv(e._queryParams,this._value,this._key);if(bk(t),kk(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new mk(e._repo,e._path,t,e._orderByCalled)}}]),n}(qk);function Gk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return Rg("startAt","key",t,!0),new Kk(e,t)}var Qk=function(e){Kt(n,e);var t=$t(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this))._value=e,i._key=r,i}return(0,Pe.Z)(n,[{key:"_apply",value:function(e){Tg("startAfter",this._value,e._path,!1);var t=function(e,t,n){var r;return e.index_===fv?("string"===typeof t&&(t=Bv(t)),r=Jv(e,t,n)):r=Jv(e,t,null==n?rp:Bv(n)),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(bk(t),kk(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new mk(e._repo,e._path,t,e._orderByCalled)}}]),n}(qk);function Yk(e,t){return Rg("startAfter","key",t,!0),new Qk(e,t)}var $k=function(e){Kt(n,e);var t=$t(n);function n(e){var r;return Ne(this,n),(r=t.call(this))._limit=e,r}return(0,Pe.Z)(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new mk(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(qk);function Xk(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new $k(e)}var Jk=function(e){Kt(n,e);var t=$t(n);function n(e){var r;return Ne(this,n),(r=t.call(this))._limit=e,r}return(0,Pe.Z)(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new mk(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(qk);function eb(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Jk(e)}var tb=function(e){Kt(n,e);var t=$t(n);function n(e){var r;return Ne(this,n),(r=t.call(this))._path=e,r}return(0,Pe.Z)(n,[{key:"_apply",value:function(e){gk(e,"orderByChild");var t=new qp(this._path);if($p(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new Uv(t),r=ty(e._queryParams,n);return kk(r),new mk(e._repo,e._path,r,!0)}}]),n}(qk);function nb(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Ng("orderByChild","path",e,!1),new tb(e)}var rb=function(e){Kt(n,e);var t=$t(n);function n(){return Ne(this,n),t.apply(this,arguments)}return(0,Pe.Z)(n,[{key:"_apply",value:function(e){gk(e,"orderByKey");var t=ty(e._queryParams,fv);return kk(t),new mk(e._repo,e._path,t,!0)}}]),n}(qk);function ib(){return new rb}var ab=function(e){Kt(n,e);var t=$t(n);function n(){return Ne(this,n),t.apply(this,arguments)}return(0,Pe.Z)(n,[{key:"_apply",value:function(e){gk(e,"orderByPriority");var t=ty(e._queryParams,Rv);return kk(t),new mk(e._repo,e._path,t,!0)}}]),n}(qk);function ob(){return new ab}var sb=function(e){Kt(n,e);var t=$t(n);function n(){return Ne(this,n),t.apply(this,arguments)}return(0,Pe.Z)(n,[{key:"_apply",value:function(e){gk(e,"orderByValue");var t=ty(e._queryParams,Zv);return kk(t),new mk(e._repo,e._path,t,!0)}}]),n}(qk);function ub(){return new sb}var cb=function(e){Kt(n,e);var t=$t(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this))._value=e,i._key=r,i}return(0,Pe.Z)(n,[{key:"_apply",value:function(e){if(Tg("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Bk(this._value,this._key)._apply(new Kk(this._value,this._key)._apply(e))}}]),n}(qk);function lb(e,t){return Rg("equalTo","key",t,!0),new cb(e,t)}function hb(e){for(var t=Yn(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];t=s._apply(t)}return t}!function(e){rn(!hm,"__referenceConstructor has already been defined"),hm=e}(_k),function(e){rn(!gm,"__referenceConstructor has already been defined"),gm=e}(_k);var fb={},db=!1;function pb(e,t,n,r){e.repoInfo_=new Sp("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}function vb(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||Jd("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Yd("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,s=hk(a,i),u=s.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"/messaging-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),c?(o=!0,a="http://".concat(c,"?ns=").concat(u.namespace),u=(s=hk(a,i)).repoInfo):o=!s.repoInfo.secure;var l=i&&o?new kp(kp.OWNER):new gp(e.name,e.options,t);Ag("Invalid Firebase Database URL",s),$p(s.path)||Jd("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=fb[t.name];i||(i={},fb[t.name]=i);var a=i[e.toURLString()];a&&Jd("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new Zg(e,db,n,r),i[e.toURLString()]=a,a}(u,e,l,new mp(e.name,n));return new yb(h,e)}var yb=function(){function e(t,n){Ne(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return(0,Pe.Z)(e,[{key:"_repo",get:function(){return this._instanceStarted||(Vg(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new _k(this._repo,Bp())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=fb[t];n&&n[e.key]===e||Jd("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),Xg(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&Jd("Cannot call "+e+" on a deleted database.")}}]),e}();function mb(){Fp.IS_TRANSPORT_INITIALIZED&&ep("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function gb(){mb(),Op.forceDisallow()}function kb(){mb(),Mp.forceDisallow(),Op.forceAllow()}function bb(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=Yn(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&Jd("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Jd('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new kp(kp.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:Sn(r.mockUserToken,e.app.options.projectId);a=new kp(o)}pb(i,t,n,a)}function _b(e){(e=Yn(e))._checkNotDeleted("goOffline"),Xg(e._repo)}function wb(e){var t;(e=Yn(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(jg)}function xb(e,t){Qd(e,t)}var Sb={".sv":"timestamp"};var Tb=function(){function e(t,n){Ne(this,e),this.committed=t,this.snapshot=n}return(0,Pe.Z)(e,[{key:"toJSON",value:function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}();function Ib(e,t,n){var r;if(e=Yn(e),Pg("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,a=new xn,o=Mk(e,(function(){}));return function(e,t,n,r,i,a){Jg(e,"transaction on "+t);var o={path:t,update:n,onComplete:r,status:null,order:zd(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=tk(e,t,void 0);o.currentInputSnapshot=s;var u=o.update(s.val());if(void 0===u)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{Ig("transaction failed: Data returned ",u,o.path),o.status=0;var c,l=hg(e.transactionQueueTree_,t),h=fg(l)||[];h.push(o),dg(l,h),"object"===typeof u&&null!==u&&An(u,".priority")?(c=On(u,".priority"),rn(Sg(c),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):c=(Zm(e.serverSyncTree_,t)||Lv.EMPTY_NODE).getPriority().val();var f=Bg(e),d=Fv(u,c),p=ug(d,s,f);o.currentOutputSnapshotRaw=d,o.currentOutputSnapshotResolved=p,o.currentWriteId=Kg(e);var v=Om(e.serverSyncTree_,t,p,o.currentWriteId,o.applyLocally);Mg(e.eventQueue_,t,v),nk(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(function(t,n,r){var i=null;t?a.reject(t):(i=new wk(r,new _k(e._repo,e._path),Rv),a.resolve(new Tb(n,i)))}),o,i),a.promise}sv.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},sv.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){Fd(Hr),jr(new $n("database",(function(e,t){var n=t.instanceIdentifier;return vb(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Xr(Dd,Ld,e),Xr(Dd,Ld,"esm2017")}();var Eb=new ur("@firebase/database-compat"),Cb=function(e){var t="FIREBASE WARNING: "+e;Eb.warn(t)},Rb=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(Hn(e,t)+"must be a boolean.")},Nb=function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Hn(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Pb=function(){function e(t){Ne(this,e),this._delegate=t}return(0,Pe.Z)(e,[{key:"cancel",value:function(e){Wn("OnDisconnect.cancel",0,1,arguments.length),Kn("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"remove",value:function(e){Wn("OnDisconnect.remove",0,1,arguments.length),Kn("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"set",value:function(e,t){Wn("OnDisconnect.set",1,2,arguments.length),Kn("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"setWithPriority",value:function(e,t,n){Wn("OnDisconnect.setWithPriority",2,3,arguments.length),Kn("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"update",value:function(e,t){if(Wn("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,Cb("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Kn("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}}]),e}(),Ab=function(){function e(t,n){Ne(this,e),this.committed=t,this.snapshot=n}return(0,Pe.Z)(e,[{key:"toJSON",value:function(){return Wn("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}(),Ob=function(){function e(t,n){Ne(this,e),this._database=t,this._delegate=n}return(0,Pe.Z)(e,[{key:"val",value:function(){return Wn("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}},{key:"exportVal",value:function(){return Wn("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}},{key:"toJSON",value:function(){return Wn("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"exists",value:function(){return Wn("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}},{key:"child",value:function(t){return Wn("DataSnapshot.child",0,1,arguments.length),t=String(t),Ng("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))}},{key:"hasChild",value:function(e){return Wn("DataSnapshot.hasChild",1,1,arguments.length),Ng("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}},{key:"getPriority",value:function(){return Wn("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}},{key:"forEach",value:function(t){var n=this;return Wn("DataSnapshot.forEach",1,1,arguments.length),Kn("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))}},{key:"hasChildren",value:function(){return Wn("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}},{key:"key",get:function(){return this._delegate.key}},{key:"numChildren",value:function(){return Wn("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}},{key:"getRef",value:function(){return Wn("DataSnapshot.ref",0,0,arguments.length),new Lb(this._database,this._delegate.ref)}},{key:"ref",get:function(){return this.getRef()}}]),e}(),Db=function(){function e(t,n){Ne(this,e),this.database=t,this._delegate=n}return(0,Pe.Z)(e,[{key:"on",value:function(t,n,r,i){var a,o=this;Wn("Query.on",2,4,arguments.length),Kn("Query.on","callback",n,!1);var s=e.getCancelAndContextArgs_("Query.on",r,i),u=function(e,t){n.call(s.context,new Ob(o.database,e),t)};u.userCallback=n,u.context=s.context;var c=null===(a=s.cancel)||void 0===a?void 0:a.bind(s.context);switch(t){case"value":return Mk(this._delegate,u,c),n;case"child_added":return Fk(this._delegate,u,c),n;case"child_removed":return Zk(this._delegate,u,c),n;case"child_changed":return Uk(this._delegate,u,c),n;case"child_moved":return jk(this._delegate,u,c),n;default:throw new Error(Hn("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}},{key:"off",value:function(e,t,n){if(Wn("Query.off",0,3,arguments.length),Nb("Query.off",e,!0),Kn("Query.off","callback",t,!0),Gn("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,Vk(this._delegate,e,r)}else Vk(this._delegate,e)}},{key:"get",value:function(){var e=this;return Ak(this._delegate).then((function(t){return new Ob(e.database,t)}))}},{key:"once",value:function(t,n,r,i){var a=this;Wn("Query.once",1,4,arguments.length),Kn("Query.once","callback",n,!0);var o=e.getCancelAndContextArgs_("Query.once",r,i),s=new xn,u=function(e,t){var r=new Ob(a.database,e);n&&n.call(o.context,r,t),s.resolve(r)};u.userCallback=n,u.context=o.context;var c=function(e){o.cancel&&o.cancel.call(o.context,e),s.reject(e)};switch(t){case"value":Mk(this._delegate,u,c,{onlyOnce:!0});break;case"child_added":Fk(this._delegate,u,c,{onlyOnce:!0});break;case"child_removed":Zk(this._delegate,u,c,{onlyOnce:!0});break;case"child_changed":Uk(this._delegate,u,c,{onlyOnce:!0});break;case"child_moved":jk(this._delegate,u,c,{onlyOnce:!0});break;default:throw new Error(Hn("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}},{key:"limitToFirst",value:function(t){return Wn("Query.limitToFirst",1,1,arguments.length),new e(this.database,hb(this._delegate,Xk(t)))}},{key:"limitToLast",value:function(t){return Wn("Query.limitToLast",1,1,arguments.length),new e(this.database,hb(this._delegate,eb(t)))}},{key:"orderByChild",value:function(t){return Wn("Query.orderByChild",1,1,arguments.length),new e(this.database,hb(this._delegate,nb(t)))}},{key:"orderByKey",value:function(){return Wn("Query.orderByKey",0,0,arguments.length),new e(this.database,hb(this._delegate,ib()))}},{key:"orderByPriority",value:function(){return Wn("Query.orderByPriority",0,0,arguments.length),new e(this.database,hb(this._delegate,ob()))}},{key:"orderByValue",value:function(){return Wn("Query.orderByValue",0,0,arguments.length),new e(this.database,hb(this._delegate,ub()))}},{key:"startAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Wn("Query.startAt",0,2,arguments.length),new e(this.database,hb(this._delegate,Gk(t,n)))}},{key:"startAfter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Wn("Query.startAfter",0,2,arguments.length),new e(this.database,hb(this._delegate,Yk(t,n)))}},{key:"endAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Wn("Query.endAt",0,2,arguments.length),new e(this.database,hb(this._delegate,zk(t,n)))}},{key:"endBefore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Wn("Query.endBefore",0,2,arguments.length),new e(this.database,hb(this._delegate,Hk(t,n)))}},{key:"equalTo",value:function(t,n){return Wn("Query.equalTo",1,2,arguments.length),new e(this.database,hb(this._delegate,lb(t,n)))}},{key:"toString",value:function(){return Wn("Query.toString",0,0,arguments.length),this._delegate.toString()}},{key:"toJSON",value:function(){return Wn("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"isEqual",value:function(t){if(Wn("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(t._delegate)}},{key:"ref",get:function(){return new Lb(this.database,new _k(this._delegate._repo,this._delegate._path))}}],[{key:"getCancelAndContextArgs_",value:function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,Kn(e,"cancel",r.cancel,!0),r.context=n,Gn(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(Hn(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}}]),e}(),Lb=function(e){Kt(n,e);var t=$t(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this,e,new mk(r._repo,r._path,new Xv,!1))).database=e,i._delegate=r,i}return(0,Pe.Z)(n,[{key:"getKey",value:function(){return Wn("Reference.key",0,0,arguments.length),this._delegate.key}},{key:"child",value:function(e){return Wn("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new n(this.database,Tk(this._delegate,e))}},{key:"getParent",value:function(){Wn("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new n(this.database,e):null}},{key:"getRoot",value:function(){return Wn("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}},{key:"set",value:function(e,t){Wn("Reference.set",1,2,arguments.length),Kn("Reference.set","onComplete",t,!0);var n=Ck(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"update",value:function(e,t){if(Wn("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,Cb("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Pg("Reference.update",this._delegate._path),Kn("Reference.update","onComplete",t,!0);var i=Pk(this._delegate,e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}},{key:"setWithPriority",value:function(e,t,n){Wn("Reference.setWithPriority",2,3,arguments.length),Kn("Reference.setWithPriority","onComplete",n,!0);var r=Nk(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"remove",value:function(e){Wn("Reference.remove",0,1,arguments.length),Kn("Reference.remove","onComplete",e,!0);var t=Ek(this._delegate);return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"transaction",value:function(e,t,n){var r=this;Wn("Reference.transaction",1,3,arguments.length),Kn("Reference.transaction","transactionUpdate",e,!1),Kn("Reference.transaction","onComplete",t,!0),Rb("Reference.transaction","applyLocally",n,!0);var i=Ib(this._delegate,e,{applyLocally:n}).then((function(e){return new Ab(e.committed,new Ob(r.database,e.snapshot))}));return t&&i.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),i}},{key:"setPriority",value:function(e,t){Wn("Reference.setPriority",1,2,arguments.length),Kn("Reference.setPriority","onComplete",t,!0);var n=Rk(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"push",value:function(e,t){var r=this;Wn("Reference.push",0,2,arguments.length),Kn("Reference.push","onComplete",t,!0);var i=Ik(this._delegate,e),a=i.then((function(e){return new n(r.database,e)}));t&&a.then((function(){return t(null)}),(function(e){return t(e)}));var o=new n(this.database,i);return o.then=a.then.bind(a),o.catch=a.catch.bind(a,void 0),o}},{key:"onDisconnect",value:function(){return Pg("Reference.onDisconnect",this._delegate._path),new Pb(new yk(this._delegate._repo,this._delegate._path))}},{key:"key",get:function(){return this.getKey()}},{key:"parent",get:function(){return this.getParent()}},{key:"root",get:function(){return this.getRoot()}}]),n}(Db),Mb=function(){function e(t,n){var r=this;Ne(this,e),this._delegate=t,this.app=n,this.INTERNAL={delete:function(){return r._delegate._delete()},forceWebSockets:gb,forceLongPolling:kb}}return(0,Pe.Z)(e,[{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};bb(this._delegate,e,t,n)}},{key:"ref",value:function(e){if(Wn("database.ref",0,1,arguments.length),e instanceof Lb){var t=Sk(this._delegate,e.toString());return new Lb(this,t)}var n=xk(this._delegate,e);return new Lb(this,n)}},{key:"refFromURL",value:function(e){var t="database.refFromURL";Wn(t,1,1,arguments.length);var n=Sk(this._delegate,e);return new Lb(this,n)}},{key:"goOffline",value:function(){return Wn("database.goOffline",0,0,arguments.length),_b(this._delegate)}},{key:"goOnline",value:function(){return Wn("database.goOnline",0,0,arguments.length),wb(this._delegate)}}]),e}();Mb.ServerValue={TIMESTAMP:Sb,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}};var Fb=Object.freeze({__proto__:null,initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,a=e.namespace,o=e.nodeAdmin,s=void 0!==o&&o;Fd(r);var u=new Jn("auth-internal",new nr("database-standalone"));return u.setComponent(new $n("auth-internal",(function(){return i}),"PRIVATE")),{instance:new Mb(vb(t,u,void 0,n,s),t),namespace:a}}}),Ub=Mb.ServerValue;!function(e){e.INTERNAL.registerComponent(new $n("database-compat",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new Mb(i,r)}),"PUBLIC").setServiceProps({Reference:Lb,Query:Db,Database:Mb,DataSnapshot:Ob,enableLogging:xb,INTERNAL:Fb,ServerValue:Ub}).setMultipleInstances(!0)),e.registerVersion("@firebase/database-compat","0.2.10")}(wi);var jb,Zb="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Vb={},qb=qb||{},Bb=Zb||self;function zb(){}function Wb(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Hb(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Kb="closure_uid_"+(1e9*Math.random()>>>0),Gb=0;function Qb(e,t,n){return e.call.apply(e.bind,arguments)}function Yb(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function $b(e,t,n){return($b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Qb:Yb).apply(null,arguments)}function Xb(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Jb(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function e_(){this.s=this.s,this.o=this.o}e_.prototype.s=!1,e_.prototype.na=function(){var e;!this.s&&(this.s=!0,this.M(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Kb)&&e[Kb]||(e[Kb]=++Gb))},e_.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var t_=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function n_(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function r_(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Wb(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function i_(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}i_.prototype.h=function(){this.defaultPrevented=!0};var a_=function(){if(!Bb.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Bb.addEventListener("test",zb,t),Bb.removeEventListener("test",zb,t)}catch(n){}return e}();function o_(e){return/^[\s\xa0]*$/.test(e)}var s_=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function u_(e,t){return e<t?-1:e>t?1:0}function c_(){var e=Bb.navigator;return e&&(e=e.userAgent)?e:""}function l_(e){return-1!=c_().indexOf(e)}function h_(e){return h_[" "](e),e}h_[" "]=zb;var f_,d_=l_("Opera"),p_=l_("Trident")||l_("MSIE"),v_=l_("Edge"),y_=v_||p_,m_=l_("Gecko")&&!(-1!=c_().toLowerCase().indexOf("webkit")&&!l_("Edge"))&&!(l_("Trident")||l_("MSIE"))&&!l_("Edge"),g_=-1!=c_().toLowerCase().indexOf("webkit")&&!l_("Edge");function k_(){var e=Bb.document;return e?e.documentMode:void 0}e:{var b_="",__=function(){var e=c_();return m_?/rv:([^\);]+)(\)|;)/.exec(e):v_?/Edge\/([\d\.]+)/.exec(e):p_?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):g_?/WebKit\/(\S+)/.exec(e):d_?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(__&&(b_=__?__[1]:""),p_){var w_=k_();if(null!=w_&&w_>parseFloat(b_)){f_=String(w_);break e}}f_=b_}var x_,S_={};function T_(){return function(e){var t=S_;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=s_(String(f_)).split("."),n=s_("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=u_(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||u_(0==a[2].length,0==o[2].length)||u_(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Bb.document&&p_){var I_=k_();x_=I_||(parseInt(f_,10)||void 0)}else x_=void 0;var E_=x_;function C_(e,t){if(i_.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(m_){e:{try{h_(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:R_[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&C_.X.h.call(this)}}Jb(C_,i_);var R_={2:"touch",3:"pen",4:"mouse"};C_.prototype.h=function(){C_.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var N_="closure_listenable_"+(1e6*Math.random()|0),P_=0;function A_(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++P_,this.ba=this.ea=!1}function O_(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function D_(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function L_(e){var t={};for(var n in e)t[n]=e[n];return t}var M_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F_(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<M_.length;a++)n=M_[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function U_(e){this.src=e,this.g={},this.h=0}function j_(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=t_(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(O_(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Z_(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}U_.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Z_(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new A_(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var V_="closure_lm_"+(1e6*Math.random()|0),q_={};function B_(e,t,n,r,i){if(r&&r.once)return W_(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)B_(e,t[a],n,r,i);return null}return n=X_(n),e&&e[N_]?e.N(t,n,Hb(r)?!!r.capture:!!r,i):z_(e,t,n,!1,r,i)}function z_(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Hb(i)?!!i.capture:!!i,s=Y_(e);if(s||(e[V_]=s=new U_(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Q_;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)a_||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(G_(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function W_(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)W_(e,t[a],n,r,i);return null}return n=X_(n),e&&e[N_]?e.O(t,n,Hb(r)?!!r.capture:!!r,i):z_(e,t,n,!0,r,i)}function H_(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)H_(e,t[a],n,r,i);else r=Hb(r)?!!r.capture:!!r,n=X_(n),e&&e[N_]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Z_(a=e.g[t],n,r,i))&&(O_(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Y_(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Z_(t,n,r,i)),(n=-1<e?t[e]:null)&&K_(n))}function K_(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[N_])j_(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(G_(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Y_(t))?(j_(n,e),0==n.h&&(n.src=null,t[V_]=null)):O_(e)}}}function G_(e){return e in q_?q_[e]:q_[e]="on"+e}function Q_(e,t){if(e.ba)e=!0;else{t=new C_(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&K_(e),e=n.call(r,t)}return e}function Y_(e){return(e=e[V_])instanceof U_?e:null}var $_="__closure_events_fn_"+(1e9*Math.random()>>>0);function X_(e){return"function"===typeof e?e:(e[$_]||(e[$_]=function(t){return e.handleEvent(t)}),e[$_])}function J_(){e_.call(this),this.i=new U_(this),this.P=this,this.I=null}function ew(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new i_(t,e);else if(t instanceof i_)t.target=t.target||e;else{var i=t;F_(t=new i_(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=tw(o,r,!0,t)&&i}if(i=tw(o=t.g=e,r,!0,t)&&i,i=tw(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=tw(o=t.g=n[a],r,!1,t)&&i}function tw(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var s=o.listener,u=o.ha||o.src;o.ea&&j_(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}Jb(J_,e_),J_.prototype[N_]=!0,J_.prototype.removeEventListener=function(e,t,n,r){H_(this,e,t,n,r)},J_.prototype.M=function(){if(J_.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)O_(n[r]);delete t.g[e],t.h--}}this.I=null},J_.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},J_.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var nw=Bb.JSON.stringify;function rw(){var e=hw,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var iw,aw=function(){function e(){Ne(this,e),this.h=this.g=null}return(0,Pe.Z)(e,[{key:"add",value:function(e,t){var n=ow.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),ow=new(function(){function e(t,n){Ne(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return(0,Pe.Z)(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new sw}),(function(e){return e.reset()})),sw=function(){function e(){Ne(this,e),this.next=this.g=this.h=null}return(0,Pe.Z)(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function uw(e){Bb.setTimeout((function(){throw e}),0)}function cw(e,t){iw||function(){var e=Bb.Promise.resolve(void 0);iw=function(){e.then(fw)}}(),lw||(iw(),lw=!0),hw.add(e,t)}var lw=!1,hw=new aw;function fw(){for(var e;e=rw();){try{e.h.call(e.g)}catch(n){uw(n)}var t=ow;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}lw=!1}function dw(e,t){J_.call(this),this.h=e||1,this.g=t||Bb,this.j=$b(this.lb,this),this.l=Date.now()}function pw(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function vw(e,t,n){if("function"===typeof e)n&&(e=$b(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=$b(e.handleEvent,e)}return 2147483647<Number(t)?-1:Bb.setTimeout(e,t||0)}function yw(e){e.g=vw((function(){e.g=null,e.i&&(e.i=!1,yw(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Jb(dw,J_),(jb=dw.prototype).ca=!1,jb.R=null,jb.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),ew(this,"tick"),this.ca&&(pw(this),this.start()))}},jb.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},jb.M=function(){dw.X.M.call(this),pw(this),delete this.g};var mw=function(e){Kt(n,e);var t=$t(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return(0,Pe.Z)(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:yw(this)}},{key:"M",value:function(){Ei(Gt(n.prototype),"M",this).call(this),this.g&&(Bb.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(e_);function gw(e){e_.call(this),this.h=e,this.g={}}Jb(gw,e_);var kw=[];function bw(e,t,n,r){Array.isArray(n)||(n&&(kw[0]=n.toString()),n=kw);for(var i=0;i<n.length;i++){var a=B_(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function _w(e){D_(e.g,(function(e,t){this.g.hasOwnProperty(t)&&K_(e)}),e),e.g={}}function ww(){this.g=!0}function xw(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return nw(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}gw.prototype.M=function(){gw.X.M.call(this),_w(this)},gw.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ww.prototype.Aa=function(){this.g=!1},ww.prototype.info=function(){};var Sw={},Tw=null;function Iw(){return Tw=Tw||new J_}function Ew(e){i_.call(this,Sw.Pa,e)}function Cw(e){var t=Iw();ew(t,new Ew(t))}function Rw(e,t){i_.call(this,Sw.STAT_EVENT,e),this.stat=t}function Nw(e){var t=Iw();ew(t,new Rw(t,e))}function Pw(e,t){i_.call(this,Sw.Qa,e),this.size=t}function Aw(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Bb.setTimeout((function(){e()}),t)}Sw.Pa="serverreachability",Jb(Ew,i_),Sw.STAT_EVENT="statevent",Jb(Rw,i_),Sw.Qa="timingevent",Jb(Pw,i_);var Ow={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Dw={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Lw(){}function Mw(e){return e.h||(e.h=e.i())}function Fw(){}Lw.prototype.h=null;var Uw,jw={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Zw(){i_.call(this,"d")}function Vw(){i_.call(this,"c")}function qw(){}function Bw(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new gw(this),this.O=Ww,e=y_?125:void 0,this.T=new dw(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new zw}function zw(){this.i=null,this.g="",this.h=!1}Jb(Zw,i_),Jb(Vw,i_),Jb(qw,Lw),qw.prototype.g=function(){return new XMLHttpRequest},qw.prototype.i=function(){return{}},Uw=new qw;var Ww=45e3,Hw={},Kw={};function Gw(e,t,n){e.K=1,e.v=dx(ux(t)),e.s=n,e.P=!0,Qw(e,null)}function Qw(e,t){e.F=Date.now(),Jw(e),e.A=ux(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),Ix(n.i,"t",r),e.C=0,n=e.l.H,e.h=new zw,e.g=ES(e.l,n?t:null,!e.s),0<e.N&&(e.L=new mw($b(e.La,e,e.g),e.N)),bw(e.S,e.g,"readystatechange",e.ib),t=e.H?L_(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),Cw(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function Yw(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function $w(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Xw(e,n))==Kw){4==t&&(e.o=4,Nw(14),i=!1),xw(e.j,e.m,null,"[Incomplete Response]");break}if(r==Hw){e.o=4,Nw(15),xw(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}xw(e.j,e.m,r,null),ix(e,r)}Yw(e)&&r!=Kw&&r!=Hw&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Nw(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),kS(t),t.K=!0,Nw(11))):(xw(e.j,e.m,n,"[Invalid Chunked Response]"),rx(e),nx(e))}function Xw(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Kw:(n=Number(t.substring(n,r)),isNaN(n)?Hw:(r+=1)+n>t.length?Kw:(t=t.substr(r,n),e.C=r+n,t))}function Jw(e){e.V=Date.now()+e.O,ex(e,e.O)}function ex(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Aw($b(e.gb,e),t)}function tx(e){e.B&&(Bb.clearTimeout(e.B),e.B=null)}function nx(e){0==e.l.G||e.I||wS(e.l,e)}function rx(e){tx(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,pw(e.T),_w(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function ix(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Dx(n.h,e)))if(!e.J&&Dx(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;_S(n),hS(n)}gS(n),Nw(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=Aw($b(n.cb,n),6e3));if(1>=Ox(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else SS(n,11)}else if((e.J||n.g==e)&&_S(n),!o_(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var s=a[4];null!=s&&(n.Ca=s,n.j.info("SVER="+n.Ca));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.h;h.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(h.j=h.l,h.g=new Set,h.h&&(Lx(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.za=f,fx(r.F,r.D,f))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=IS(r,r.H?r.ka:null,r.V),d.J){Mx(r.h,d);var p=d,v=r.J;v&&p.setTimeout(v),p.B&&(tx(p),Jw(p)),r.g=d}else mS(r);0<n.i.length&&dS(n)}else"stop"!=a[0]&&"close"!=a[0]||SS(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?SS(n,7):lS(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}Cw()}catch(a){}}function ax(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Wb(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Wb(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Wb(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(jb=Bw.prototype).setTimeout=function(e){this.O=e},jb.ib=function(e){e=e.target;var t=this.L;t&&3==iS(e)?t.l():this.La(e)},jb.La=function(e){try{if(e==this.g)e:{var t=iS(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||y_||this.g&&(this.h.h||this.g.fa()||aS(this.g)))){this.I||4!=t||7==n||Cw(),tx(this);var r=this.g.aa();this.Y=r;t:if(Yw(this)){var i=aS(this.g);e="";var a=i.length,o=4==iS(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){rx(this),nx(this);var s="";break t}this.h.i=new Bb.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.fa();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var u,c=this.g;if((u=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!o_(u)){var l=u;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,Nw(12),rx(this),nx(this);break e}xw(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ix(this,r)}this.P?($w(this,t,s),y_&&this.i&&3==t&&(bw(this.S,this.T,"tick",this.hb),this.T.start())):(xw(this.j,this.m,s,null),ix(this,s)),4==t&&rx(this),this.i&&!this.I&&(4==t?wS(this.l,this):(this.i=!1,Jw(this)))}else 400==r&&0<s.indexOf("Unknown SID")?(this.o=3,Nw(12)):(this.o=0,Nw(13)),rx(this),nx(this)}}}catch(t){}},jb.hb=function(){if(this.g){var e=iS(this.g),t=this.g.fa();this.C<t.length&&(tx(this),$w(this,e,t),this.i&&4!=e&&Jw(this))}},jb.cancel=function(){this.I=!0,rx(this)},jb.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Cw(),Nw(17)),rx(this),this.o=2,nx(this)):ex(this,this.V-e)};var ox=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sx(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof sx){this.h=void 0!==t?t:e.h,cx(this,e.j),this.s=e.s,this.g=e.g,lx(this,e.m),this.l=e.l,t=e.i;var n=new wx;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),hx(this,n),this.o=e.o}else e&&(n=String(e).match(ox))?(this.h=!!t,cx(this,n[1]||"",!0),this.s=px(n[2]||""),this.g=px(n[3]||"",!0),lx(this,n[4]),this.l=px(n[5]||"",!0),hx(this,n[6]||"",!0),this.o=px(n[7]||"")):(this.h=!!t,this.i=new wx(null,this.h))}function ux(e){return new sx(e)}function cx(e,t,n){e.j=n?px(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lx(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function hx(e,t,n){t instanceof wx?(e.i=t,function(e,t){t&&!e.j&&(xx(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Sx(this,t),Ix(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=vx(t,bx)),e.i=new wx(t,e.h))}function fx(e,t,n){e.i.set(t,n)}function dx(e){return fx(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function px(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function vx(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,yx),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function yx(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}sx.prototype.toString=function(){var e=[],t=this.j;t&&e.push(vx(t,mx,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(vx(t,mx,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(vx(n,"/"==n.charAt(0)?kx:gx,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",vx(n,_x)),e.join("")};var mx=/[#\/\?@]/g,gx=/[#\?:]/g,kx=/[#\?]/g,bx=/[#\?@]/g,_x=/#/g;function wx(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function xx(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Sx(e,t){xx(e),t=Ex(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Tx(e,t){return xx(e),t=Ex(e,t),e.g.has(t)}function Ix(e,t,n){Sx(e,t),0<n.length&&(e.i=null,e.g.set(Ex(e,t),n_(n)),e.h+=n.length)}function Ex(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(jb=wx.prototype).add=function(e,t){xx(this),this.i=null,e=Ex(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},jb.forEach=function(e,t){xx(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},jb.oa=function(){xx(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},jb.W=function(e){xx(this);var t=[];if("string"===typeof e)Tx(this,e)&&(t=t.concat(this.g.get(Ex(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},jb.set=function(e,t){return xx(this),this.i=null,Tx(this,e=Ex(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},jb.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},jb.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Cx=(0,Pe.Z)((function e(t,n){Ne(this,e),this.h=t,this.g=n}));function Rx(e){this.l=e||Px,Bb.PerformanceNavigationTiming?e=0<(e=Bb.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Bb.g&&Bb.g.Ga&&Bb.g.Ga()&&Bb.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Nx,Px=10;function Ax(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ox(e){return e.h?1:e.g?e.g.size:0}function Dx(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Lx(e,t){e.g?e.g.add(t):e.h=t}function Mx(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Fx(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=Wt(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return n_(e.i)}function Ux(){}function jx(){this.g=new Ux}function Zx(e,t,n){var r=n||"";try{ax(e,(function(e,n){var i=e;Hb(e)&&(i=nw(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Vx(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function qx(e){this.l=e.ac||null,this.j=e.jb||!1}function Bx(e,t){J_.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=zx,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Rx.prototype.cancel=function(){if(this.i=Fx(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=Wt(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Ux.prototype.stringify=function(e){return Bb.JSON.stringify(e,void 0)},Ux.prototype.parse=function(e){return Bb.JSON.parse(e,void 0)},Jb(qx,Lw),qx.prototype.g=function(){return new Bx(this.l,this.j)},qx.prototype.i=(Nx={},function(){return Nx}),Jb(Bx,J_);var zx=0;function Wx(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function Hx(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Kx(e)}function Kx(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(jb=Bx.prototype).open=function(e,t){if(this.readyState!=zx)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Kx(this)},jb.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Bb).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},jb.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Hx(this)),this.readyState=zx},jb.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Kx(this)),this.g&&(this.readyState=3,Kx(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof Bb.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Wx(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},jb.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Hx(this):Kx(this),3==this.readyState&&Wx(this)}},jb.Va=function(e){this.g&&(this.response=this.responseText=e,Hx(this))},jb.Ua=function(e){this.g&&(this.response=e,Hx(this))},jb.ga=function(){this.g&&Hx(this)},jb.setRequestHeader=function(e,t){this.v.append(e,t)},jb.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},jb.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Bx.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Gx=Bb.JSON.parse;function Qx(e){J_.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Yx,this.K=this.L=!1}Jb(Qx,J_);var Yx="",$x=/^https?$/i,Xx=["POST","PUT"];function Jx(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,eS(e),nS(e)}function eS(e){e.D||(e.D=!0,ew(e,"complete"),ew(e,"error"))}function tS(e){if(e.h&&"undefined"!=typeof qb&&(!e.C[1]||4!=iS(e)||2!=e.aa()))if(e.v&&4==iS(e))vw(e.Ha,0,e);else if(ew(e,"readystatechange"),4==iS(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(ox)[1]||null;if(!a&&Bb.self&&Bb.self.location){var o=Bb.self.location.protocol;a=o.substr(0,o.length-1)}i=!$x.test(a?a.toLowerCase():"")}t=i}if(t)ew(e,"complete"),ew(e,"success");else{e.m=6;try{var s=2<iS(e)?e.g.statusText:""}catch(u){s=""}e.j=s+" ["+e.aa()+"]",eS(e)}}finally{nS(e)}}}function nS(e,t){if(e.g){rS(e);var n=e.g,r=e.C[0]?zb:null;e.g=null,e.C=null,t||ew(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function rS(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Bb.clearTimeout(e.A),e.A=null)}function iS(e){return e.g?e.g.readyState:0}function aS(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Yx:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(BS){return null}}function oS(e){var t="";return D_(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function sS(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=oS(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):fx(e,t,n))}function uS(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function cS(e){this.Ca=0,this.i=[],this.j=new ww,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=uS("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=uS("baseRetryDelayMs",5e3,e),this.bb=uS("retryDelaySeedMs",1e4,e),this.$a=uS("forwardChannelMaxRetries",2,e),this.ta=uS("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new Rx(e&&e.concurrentRequestLimit),this.Fa=new jx,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function lS(e){if(fS(e),3==e.G){var t=e.U++,n=ux(e.F);fx(n,"SID",e.I),fx(n,"RID",t),fx(n,"TYPE","terminate"),vS(e,n),(t=new Bw(e,e.j,t,void 0)).K=2,t.v=dx(ux(n)),n=!1,Bb.navigator&&Bb.navigator.sendBeacon&&(n=Bb.navigator.sendBeacon(t.v.toString(),"")),!n&&Bb.Image&&((new Image).src=t.v,n=!0),n||(t.g=ES(t.l,null),t.g.da(t.v)),t.F=Date.now(),Jw(t)}TS(e)}function hS(e){e.g&&(kS(e),e.g.cancel(),e.g=null)}function fS(e){hS(e),e.u&&(Bb.clearTimeout(e.u),e.u=null),_S(e),e.h.cancel(),e.m&&("number"===typeof e.m&&Bb.clearTimeout(e.m),e.m=null)}function dS(e){Ax(e.h)||e.m||(e.m=!0,cw(e.Ja,e),e.C=0)}function pS(e,t){var n;n=t?t.m:e.U++;var r=ux(e.F);fx(r,"SID",e.I),fx(r,"RID",n),fx(r,"AID",e.T),vS(e,r),e.o&&e.s&&sS(r,e.o,e.s),n=new Bw(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=yS(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),Lx(e.h,n),Gw(n,r,t)}function vS(e,t){e.ia&&D_(e.ia,(function(e,n){fx(t,n,e)})),e.l&&ax({},(function(e,n){fx(t,n,e)}))}function yS(e,t,n){n=Math.min(e.i.length,n);var r=e.l?$b(e.l.Ra,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=a))a=Math.max(0,i[u].h-100),s=!1;else try{Zx(l,o,"req"+c+"_")}catch(h){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function mS(e){e.g||e.u||(e.Z=1,cw(e.Ia,e),e.A=0)}function gS(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=Aw($b(e.Ia,e),xS(e,e.A)),e.A++,!0)}function kS(e){null!=e.B&&(Bb.clearTimeout(e.B),e.B=null)}function bS(e){e.g=new Bw(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=ux(e.sa);fx(t,"RID","rpc"),fx(t,"SID",e.I),fx(t,"CI",e.L?"0":"1"),fx(t,"AID",e.T),fx(t,"TYPE","xmlhttp"),vS(e,t),e.o&&e.s&&sS(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=dx(ux(t)),n.s=null,n.P=!0,Qw(n,e)}function _S(e){null!=e.v&&(Bb.clearTimeout(e.v),e.v=null)}function wS(e,t){var n=null;if(e.g==t){_S(e),kS(e),e.g=null;var r=2}else{if(!Dx(e.h,t))return;n=t.D,Mx(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;ew(r=Iw(),new Pw(r,n)),dS(e)}else mS(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(Ox(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=Aw($b(e.Ja,e,t),xS(e,e.C)),e.C++,!0))}(e,t)||2==r&&gS(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:SS(e,5);break;case 4:SS(e,10);break;case 3:SS(e,6);break;default:SS(e,2)}}function xS(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function SS(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=$b(e.kb,e);n||(n=new sx("//www.google.com/images/cleardot.gif"),Bb.location&&"http"==Bb.location.protocol||cx(n,"https"),dx(n)),function(e,t){var n=new ww;if(Bb.Image){var r=new Image;r.onload=Xb(Vx,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Xb(Vx,n,r,"TestLoadImage: error",!1,t),r.onabort=Xb(Vx,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Xb(Vx,n,r,"TestLoadImage: timeout",!1,t),Bb.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Nw(2);e.G=0,e.l&&e.l.va(t),TS(e),fS(e)}function TS(e){if(e.G=0,e.la=[],e.l){var t=Fx(e.h);0==t.length&&0==e.i.length||(r_(e.la,t),r_(e.la,e.i),e.h.i.length=0,n_(e.i),e.i.length=0),e.l.ua()}}function IS(e,t,n){var r=n instanceof sx?ux(n):new sx(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),lx(r,r.m);else{var i=Bb.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new sx(null,void 0);r&&cx(a,r),t&&(a.g=t),i&&lx(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&fx(r,n,t),fx(r,"VER",e.ma),vS(e,r),r}function ES(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new Qx(new qx({jb:!0})):new Qx(e.ra)).Ka(e.H),t}function CS(){}function RS(){if(p_&&!(10<=Number(E_)))throw Error("Environmental error: no available transport.")}function NS(e,t){J_.call(this),this.g=new cS(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!o_(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!o_(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new OS(this)}function PS(e){Zw.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function AS(){Vw.call(this),this.status=1}function OS(e){this.g=e}(jb=Qx.prototype).Ka=function(e){this.L=e},jb.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Uw.g(),this.C=this.u?Mw(this.u):Mw(Uw),this.g.onreadystatechange=$b(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(u){return void Jx(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var o,s=Wt(r.keys());try{for(s.s();!(o=s.n()).done;){var u=o.value;n.set(u,r.get(u))}}catch(p){s.e(p)}finally{s.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=Bb.FormData&&e instanceof Bb.FormData,!(0<=t_(Xx,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var c,l=Wt(n);try{for(l.s();!(c=l.n()).done;){var h=(0,a.Z)(c.value,2),f=h[0],d=h[1];this.g.setRequestHeader(f,d)}}catch(p){l.e(p)}finally{l.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{rS(this),0<this.B&&((this.K=function(e){return p_&&T_()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=$b(this.qa,this)):this.A=vw(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){Jx(this,u)}},jb.qa=function(){"undefined"!=typeof qb&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ew(this,"timeout"),this.abort(8))},jb.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ew(this,"complete"),ew(this,"abort"),nS(this))},jb.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),nS(this,!0)),Qx.X.M.call(this)},jb.Ha=function(){this.s||(this.F||this.v||this.l?tS(this):this.fb())},jb.fb=function(){tS(this)},jb.aa=function(){try{return 2<iS(this)?this.g.status:-1}catch(Nx){return-1}},jb.fa=function(){try{return this.g?this.g.responseText:""}catch(Nx){return""}},jb.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Gx(t)}},jb.Ea=function(){return this.m},jb.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(jb=cS.prototype).ma=8,jb.G=1,jb.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new Bw(this,this.j,e,void 0),n=this.s;if(this.S&&(n?F_(n=L_(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=yS(this,t,r),fx(i=ux(this.F),"RID",e),fx(i,"CVER",22),this.D&&fx(i,"X-HTTP-Session-Id",this.D),vS(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(oS(n)))+"&"+r:this.o&&sS(i,this.o,n)),Lx(this.h,t),this.Ya&&fx(i,"TYPE","init"),this.O?(fx(i,"$req",r),fx(i,"SID","null"),t.Z=!0,Gw(t,i,null)):Gw(t,i,r),this.G=2}}else 3==this.G&&(e?pS(this,e):0==this.i.length||Ax(this.h)||pS(this))},jb.Ia=function(){if(this.u=null,bS(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=Aw($b(this.eb,this),e)}},jb.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Nw(10),hS(this),bS(this))},jb.cb=function(){null!=this.v&&(this.v=null,hS(this),gS(this),Nw(19))},jb.kb=function(e){e?(this.j.info("Successfully pinged google.com"),Nw(2)):(this.j.info("Failed to ping google.com"),Nw(1))},(jb=CS.prototype).xa=function(){},jb.wa=function(){},jb.va=function(){},jb.ua=function(){},jb.Ra=function(){},RS.prototype.g=function(e,t){return new NS(e,t)},Jb(NS,J_),NS.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;Nw(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=IS(e,null,e.V),dS(e)},NS.prototype.close=function(){lS(this.g)},NS.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=nw(e),e=n);t.i.push(new Cx(t.ab++,e)),3==t.G&&dS(t)},NS.prototype.M=function(){this.g.l=null,delete this.j,lS(this.g),delete this.g,NS.X.M.call(this)},Jb(PS,Zw),Jb(AS,Vw),Jb(OS,CS),OS.prototype.xa=function(){ew(this.g,"a")},OS.prototype.wa=function(e){ew(this.g,new PS(e))},OS.prototype.va=function(e){ew(this.g,new AS)},OS.prototype.ua=function(){ew(this.g,"b")},RS.prototype.createWebChannel=RS.prototype.g,NS.prototype.send=NS.prototype.u,NS.prototype.open=NS.prototype.m,NS.prototype.close=NS.prototype.close,Ow.NO_ERROR=0,Ow.TIMEOUT=8,Ow.HTTP_ERROR=6,Dw.COMPLETE="complete",Fw.EventType=jw,jw.OPEN="a",jw.CLOSE="b",jw.ERROR="c",jw.MESSAGE="d",J_.prototype.listen=J_.prototype.N,Qx.prototype.listenOnce=Qx.prototype.O,Qx.prototype.getLastError=Qx.prototype.Oa,Qx.prototype.getLastErrorCode=Qx.prototype.Ea,Qx.prototype.getStatus=Qx.prototype.aa,Qx.prototype.getResponseJson=Qx.prototype.Sa,Qx.prototype.getResponseText=Qx.prototype.fa,Qx.prototype.send=Qx.prototype.da,Qx.prototype.setWithCredentials=Qx.prototype.Ka;var DS=Vb.createWebChannelTransport=function(){return new RS},LS=Vb.getStatEventTarget=function(){return Iw()},MS=Vb.ErrorCode=Ow,FS=Vb.EventType=Dw,US=Vb.Event=Sw,jS=Vb.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},ZS=Vb.FetchXmlHttpFactory=qx,VS=Vb.WebChannel=Fw,qS=Vb.XhrIo=Qx,BS="@firebase/firestore",zS=function(){function e(t){Ne(this,e),this.uid=t}return(0,Pe.Z)(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();zS.UNAUTHENTICATED=new zS(null),zS.GOOGLE_CREDENTIALS=new zS("google-credentials-uid"),zS.FIRST_PARTY=new zS("first-party-uid"),zS.MOCK_USER=new zS("mock-user");var WS="9.13.0",HS=new ur("@firebase/firestore");function KS(){return HS.logLevel}function GS(e){if(HS.logLevel<=tr.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map($S);HS.debug.apply(HS,["Firestore (".concat(WS,"): ").concat(e)].concat((0,i.Z)(a)))}}function QS(e){if(HS.logLevel<=tr.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map($S);HS.error.apply(HS,["Firestore (".concat(WS,"): ").concat(e)].concat((0,i.Z)(a)))}}function YS(e){if(HS.logLevel<=tr.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map($S);HS.warn.apply(HS,["Firestore (".concat(WS,"): ").concat(e)].concat((0,i.Z)(a)))}}function $S(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function XS(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(WS,") INTERNAL ASSERTION FAILED: ")+e;throw QS(t),new Error(t)}function JS(e,t){e||XS()}function eT(e,t){return e}var tT={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},nT=function(e){Kt(n,e);var t=$t(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return(0,Pe.Z)(n)}(Tn),rT=(0,Pe.Z)((function e(){var t=this;Ne(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),iT=(0,Pe.Z)((function e(t,n){Ne(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),aT=function(){function e(){Ne(this,e)}return(0,Pe.Z)(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(zS.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),oT=function(){function e(t){Ne(this,e),this.token=t,this.changeListener=null}return(0,Pe.Z)(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),sT=function(){function e(t){Ne(this,e),this.t=t,this.currentUser=zS.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return(0,Pe.Z)(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new rT;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new rT,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable($(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){GS("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(GS("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new rT)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(GS("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(JS("string"==typeof n.accessToken),new iT(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return JS(null===e||"string"==typeof e),new zS(e)}}]),e}(),uT=function(){function e(t,n,r,i){Ne(this,e),this.h=t,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=zS.FIRST_PARTY,this.p=new Map}return(0,Pe.Z)(e,[{key:"I",value:function(){return this.g?this.g():(JS(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}},{key:"headers",get:function(){this.p.set("X-Goog-AuthUser",this.l);var e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}]),e}(),cT=function(){function e(t,n,r,i){Ne(this,e),this.h=t,this.l=n,this.m=r,this.g=i}return(0,Pe.Z)(e,[{key:"getToken",value:function(){return Promise.resolve(new uT(this.h,this.l,this.m,this.g))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(zS.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),lT=(0,Pe.Z)((function e(t){Ne(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),hT=function(){function e(t){Ne(this,e),this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}return(0,Pe.Z)(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&GS("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.A;return n.A=e.token,GS("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){GS("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.T.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.T.getImmediate({optional:!0});e?i(e):GS("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(JS("string"==typeof t.token),e.A=t.token,new lT(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function fT(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var dT=function(){function e(){Ne(this,e)}return(0,Pe.Z)(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=fT(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function pT(e,t){return e<t?-1:e>t?1:0}function vT(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function yT(e){return e+"\0"}var mT=function(){function e(t,n){if(Ne(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new nT(tT.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new nT(tT.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new nT(tT.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new nT(tT.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return(0,Pe.Z)(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?pT(this.nanoseconds,e.nanoseconds):pT(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),gT=function(){function e(t){Ne(this,e),this.timestamp=t}return(0,Pe.Z)(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new mT(0,0))}},{key:"max",value:function(){return new e(new mT(253402300799,999999999))}}]),e}(),kT=function(){function e(t,n,r){Ne(this,e),void 0===n?n=0:n>t.length&&XS(),void 0===r?r=t.length-n:r>t.length-n&&XS(),this.segments=t,this.offset=n,this.len=r}return(0,Pe.Z)(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),bT=function(e){Kt(n,e);var t=$t(n);function n(){return Ne(this,n),t.apply(this,arguments)}return(0,Pe.Z)(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];for(var o=0,s=r;o<s.length;o++){var u=s[o];if(u.indexOf("//")>=0)throw new nT(tT.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,(0,i.Z)(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(kT),_T=/^[_a-zA-Z][_a-zA-Z0-9]*$/,wT=function(e){Kt(n,e);var t=$t(n);function n(){return Ne(this,n),t.apply(this,arguments)}return(0,Pe.Z)(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return _T.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new nT(tT.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new nT(tT.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new nT(tT.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new nT(tT.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(kT),xT=function(){function e(t){Ne(this,e),this.path=t}return(0,Pe.Z)(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===bT.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(bT.fromString(t))}},{key:"fromName",value:function(t){return new e(bT.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(bT.emptyPath())}},{key:"comparator",value:function(e,t){return bT.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new bT(t.slice()))}}]),e}(),ST=(0,Pe.Z)((function e(t,n,r,i){Ne(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function TT(e){return e.fields.find((function(e){return 2===e.kind}))}function IT(e){return e.fields.filter((function(e){return 2!==e.kind}))}ST.UNKNOWN_ID=-1;var ET=(0,Pe.Z)((function e(t,n){Ne(this,e),this.fieldPath=t,this.kind=n}));var CT=function(){function e(t,n){Ne(this,e),this.sequenceNumber=t,this.offset=n}return(0,Pe.Z)(e,null,[{key:"empty",value:function(){return new e(0,PT.min())}}]),e}();function RT(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=gT.fromTimestamp(1e9===r?new mT(n+1,0):new mT(n,r));return new PT(i,xT.empty(),t)}function NT(e){return new PT(e.readTime,e.key,-1)}var PT=function(){function e(t,n,r){Ne(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return(0,Pe.Z)(e,null,[{key:"min",value:function(){return new e(gT.min(),xT.empty(),-1)}},{key:"max",value:function(){return new e(gT.max(),xT.empty(),-1)}}]),e}();function AT(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=xT.comparator(e.documentKey,t.documentKey))?n:pT(e.largestBatchId,t.largestBatchId)}var OT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",DT=function(){function e(){Ne(this,e),this.onCommittedListeners=[]}return(0,Pe.Z)(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function LT(e){return MT.apply(this,arguments)}function MT(){return MT=$(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===tT.FAILED_PRECONDITION&&t.message===OT){e.next=2;break}throw t;case 2:GS("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),MT.apply(this,arguments)}var FT=function(){function e(t){var n=this;Ne(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return(0,Pe.Z)(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&XS(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=Wt(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,s=function(s){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},u=0;u<i;u++)s(u)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),UT=function(){function e(t,n){var r=this;Ne(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.P=new rT,this.transaction.oncomplete=function(){r.P.resolve()},this.transaction.onabort=function(){n.error?r.P.reject(new VT(t,n.error)):r.P.resolve()},this.transaction.onerror=function(e){var n=HT(e.target.error);r.P.reject(new VT(t,n))}}return(0,Pe.Z)(e,[{key:"v",get:function(){return this.P.promise}},{key:"abort",value:function(e){e&&this.P.reject(e),this.aborted||(GS("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"V",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new BT(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new VT(n,t)}}}]),e}(),jT=function(){function e(t,n,r){Ne(this,e),this.name=t,this.version=n,this.S=r,12.2===e.D(fn())&&QS("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return(0,Pe.Z)(e,[{key:"F",value:function(){var e=$(Q().mark((function e(t){var n=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return GS("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new VT(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new nT(tT.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new nT(tT.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new VT(t,n))},i.onupgradeneeded=function(e){GS("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.$(t,i.transaction,e.oldVersion,n.version).next((function(){GS("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.B&&(this.db.onversionchange=function(e){return n.B(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"L",value:function(e){this.B=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=$(Q().mark((function e(t,n,r,i){var a,o,s,u,c,l=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(Q().mark((function e(){var n,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.F(t);case 2:return l.db=e.sent,n=UT.open(l.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.V(),e})).catch((function(e){return n.abort(e),FT.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.v;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(s=e.t0)){e.next=8;break}return e.abrupt("return",s.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),u=e.t1,c="FirebaseError"!==u.name&&o<3,GS("SimpleDb","Transaction failed with error:",u.message,"Retrying:",c),this.close(),c){e.next=15;break}return e.abrupt("return",Promise.reject(u));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return GS("SimpleDb","Removing database:",e),zT(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"C",value:function(){if(!kn())return!1;if(e.N())return!0;var t=fn(),n=e.D(t),r=0<n&&n<10,i=e.k(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"N",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/messaging-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.O)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"k",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),ZT=function(){function e(t){Ne(this,e),this.U=t,this.q=!1,this.K=null}return(0,Pe.Z)(e,[{key:"isDone",get:function(){return this.q}},{key:"G",get:function(){return this.K}},{key:"cursor",set:function(e){this.U=e}},{key:"done",value:function(){this.q=!0}},{key:"j",value:function(e){this.K=e}},{key:"delete",value:function(){return zT(this.U.delete())}}]),e}(),VT=function(e){Kt(n,e);var t=$t(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this,tT.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return(0,Pe.Z)(n)}(nT);function qT(e){return"IndexedDbTransactionError"===e.name}var BT=function(){function e(t){Ne(this,e),this.store=t}return(0,Pe.Z)(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(GS("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(GS("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),zT(n)}},{key:"add",value:function(e){return GS("SimpleDb","ADD",this.store.name,e,e),zT(this.store.add(e))}},{key:"get",value:function(e){var t=this;return zT(this.store.get(e)).next((function(n){return void 0===n&&(n=null),GS("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return GS("SimpleDb","DELETE",this.store.name,e),zT(this.store.delete(e))}},{key:"count",value:function(){return GS("SimpleDb","COUNT",this.store.name),zT(this.store.count())}},{key:"W",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.H(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new FT((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new FT((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Y",value:function(e,t){GS("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.X=!1;var r=this.cursor(n);return this.H(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.H(r,t)}},{key:"tt",value:function(e){var t=this.cursor({});return new FT((function(n,r){t.onerror=function(e){var t=HT(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"H",value:function(e,t){var n=[];return new FT((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new ZT(i),o=t(i.primaryKey,i.value,a);if(o instanceof FT){var s=o.catch((function(e){return a.done(),FT.reject(e)}));n.push(s)}a.isDone?r():null===a.G?i.continue():i.continue(a.G)}else r()}})).next((function(){return FT.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function zT(e){return new FT((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=HT(e.target.error);n(t)}}))}var WT=!1;function HT(e){var t=jT.D(fn());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new nT("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return WT||(WT=!0,setTimeout((function(){throw r}),0)),r}}return e}var KT=function(){function e(t,n){Ne(this,e),this.asyncQueue=t,this.et=n,this.task=null}return(0,Pe.Z)(e,[{key:"start",value:function(){this.nt(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"nt",value:function(e){var t=this;GS("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,$(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=GS,e.t1="Documents written: ",e.next=6,t.et.st();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!qT(e.t4)){e.next=17;break}GS("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,LT(e.t4);case 19:return e.next=21,t.nt(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),GT=function(){function e(t,n){Ne(this,e),this.localStore=t,this.persistence=n}return(0,Pe.Z)(e,[{key:"st",value:function(){var e=$(Q().mark((function e(){var t,n=this,r=arguments;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.it(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"it",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return FT.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return GS("IndexBackiller","Processing collection: ".concat(t)),n.rt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"rt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.ot(i,n)})).next((function(n){return GS("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"ot",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=NT(t);AT(r,n)>0&&(n=r)})),new PT(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),QT=function(){function e(t,n){var r=this;Ne(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ut(e)},this.ct=function(e){return n.writeSequenceNumber(e)})}return(0,Pe.Z)(e,[{key:"ut",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ct&&this.ct(e),e}}]),e}();function YT(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function $T(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function XT(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}QT.at=-1;var JT=function(){function e(t,n){Ne(this,e),this.comparator=t,this.root=n||tI.EMPTY}return(0,Pe.Z)(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,tI.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,tI.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new eI(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new eI(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new eI(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new eI(this.root,e,this.comparator,!0)}}]),e}(),eI=function(){function e(t,n,r,i){Ne(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return(0,Pe.Z)(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),tI=function(){function e(t,n,r,i,a){Ne(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return(0,Pe.Z)(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw XS();if(this.right.isRed())throw XS();var e=this.left.check();if(e!==this.right.check())throw XS();return e+(this.isRed()?0:1)}}]),e}();tI.EMPTY=null,tI.RED=!0,tI.BLACK=!1,tI.EMPTY=new(function(){function e(){Ne(this,e),this.size=0}return(0,Pe.Z)(e,[{key:"key",get:function(){throw XS()}},{key:"value",get:function(){throw XS()}},{key:"color",get:function(){throw XS()}},{key:"left",get:function(){throw XS()}},{key:"right",get:function(){throw XS()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new tI(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var nI=function(){function e(t){Ne(this,e),this.comparator=t,this.data=new JT(this.comparator)}return(0,Pe.Z)(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new rI(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new rI(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),rI=function(){function e(t){Ne(this,e),this.iter=t}return(0,Pe.Z)(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function iI(e){return e.hasNext()?e.getNext():void 0}var aI=function(){function e(t){Ne(this,e),this.fields=t,t.sort(wT.comparator)}return(0,Pe.Z)(e,[{key:"unionWith",value:function(t){var n,r=new nI(wT.comparator),i=Wt(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,s=Wt(t);try{for(s.s();!(o=s.n()).done;){var u=o.value;r=r.add(u)}}catch(c){s.e(c)}finally{s.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=Wt(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return vT(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}();var oI=function(e){function t(e){Ne(this,t),this.binaryString=e}return(0,Pe.Z)(t,[{key:e,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return pT(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}(Symbol.iterator);oI.EMPTY_BYTE_STRING=new oI("");var sI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function uI(e){if(JS(!!e),"string"==typeof e){var t=0,n=sI.exec(e);if(JS(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:cI(e.seconds),nanos:cI(e.nanos)}}function cI(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function lI(e){return"string"==typeof e?oI.fromBase64String(e):oI.fromUint8Array(e)}function hI(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function fI(e){var t=e.mapValue.fields.__previous_value__;return hI(t)?fI(t):t}function dI(e){var t=uI(e.mapValue.fields.__local_write_time__.timestampValue);return new mT(t.seconds,t.nanos)}var pI=(0,Pe.Z)((function e(t,n,r,i,a,o,s,u){Ne(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u})),vI=function(){function e(t,n){Ne(this,e),this.projectId=t,this.database=n||"(default)"}return(0,Pe.Z)(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function yI(e){return null==e}function mI(e){return 0===e&&1/e==-1/0}function gI(e){return"number"==typeof e&&Number.isInteger(e)&&!mI(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var kI={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},bI={nullValue:"NULL_VALUE"};function _I(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?hI(e)?4:LI(e)?9007199254740991:10:XS()}function wI(e,t){if(e===t)return!0;var n=_I(e);if(n!==_I(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return dI(e).isEqual(dI(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=uI(e.timestampValue),r=uI(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return lI(e.bytesValue).isEqual(lI(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return cI(e.geoPointValue.latitude)===cI(t.geoPointValue.latitude)&&cI(e.geoPointValue.longitude)===cI(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return cI(e.integerValue)===cI(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=cI(e.doubleValue),r=cI(t.doubleValue);return n===r?mI(n)===mI(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return vT(e.arrayValue.values||[],t.arrayValue.values||[],wI);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(YT(n)!==YT(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!wI(n[i],r[i])))return!1;return!0}(e,t);default:return XS()}}function xI(e,t){return void 0!==(e.values||[]).find((function(e){return wI(e,t)}))}function SI(e,t){if(e===t)return 0;var n=_I(e),r=_I(t);if(n!==r)return pT(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pT(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=cI(e.integerValue||e.doubleValue),r=cI(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return TI(e.timestampValue,t.timestampValue);case 4:return TI(dI(e),dI(t));case 5:return pT(e.stringValue,t.stringValue);case 6:return function(e,t){var n=lI(e),r=lI(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=pT(n[i],r[i]);if(0!==a)return a}return pT(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=pT(cI(e.latitude),cI(t.latitude));return 0!==n?n:pT(cI(e.longitude),cI(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=SI(n[i],r[i]);if(a)return a}return pT(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===kI.mapValue&&t===kI.mapValue)return 0;if(e===kI.mapValue)return 1;if(t===kI.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=pT(r[o],a[o]);if(0!==s)return s;var u=SI(n[r[o]],i[a[o]]);if(0!==u)return u}return pT(r.length,a.length)}(e.mapValue,t.mapValue);default:throw XS()}}function TI(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return pT(e,t);var n=uI(e),r=uI(t),i=pT(n.seconds,r.seconds);return 0!==i?i:pT(n.nanos,r.nanos)}function II(e){return EI(e)}function EI(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=uI(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?lI(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,xT.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=Wt(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=EI(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=Wt(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(EI(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):XS();var t,n}function CI(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function RI(e){return!!e&&"integerValue"in e}function NI(e){return!!e&&"arrayValue"in e}function PI(e){return!!e&&"nullValue"in e}function AI(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function OI(e){return!!e&&"mapValue"in e}function DI(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return $T(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=DI(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=DI(e.arrayValue.values[r]);return n}return Object.assign({},e)}function LI(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function MI(e){return"nullValue"in e?bI:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?CI(vI.empty(),xT.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:XS()}function FI(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?CI(vI.empty(),xT.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?kI:XS()}function UI(e,t){var n=SI(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function jI(e,t){var n=SI(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var ZI=function(){function e(t){Ne(this,e),this.value=t}return(0,Pe.Z)(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!OI(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=DI(t)}},{key:"setAll",value:function(e){var t=this,n=wT.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=DI(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());OI(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return wI(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];OI(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){$T(t,(function(t,n){return e[t]=n}));var r,i=Wt(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(DI(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function VI(e){var t=[];return $T(e.fields,(function(e,n){var r=new wT([e]);if(OI(n)){var i=VI(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=Wt(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new aI(t)}var qI=function(){function e(t,n,r,i,a,o){Ne(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return(0,Pe.Z)(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=ZI.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=ZI.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=gT.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,gT.min(),gT.min(),ZI.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,gT.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,gT.min(),ZI.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,gT.min(),ZI.empty(),2)}}]),e}(),BI=(0,Pe.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;Ne(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.ht=null}));function zI(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new BI(e,t,n,r,i,a,o)}function WI(e){var t=eT(e);if(null===t.ht){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+II(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),yI(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return II(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return II(e)})).join(",")),t.ht=n}return t.ht}function HI(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!uE(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!wI(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!lE(e.startAt,t.startAt)&&lE(e.endAt,t.endAt)}function KI(e){return xT.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function GI(e,t){return e.filters.filter((function(e){return e instanceof $I&&e.field.isEqual(t)}))}function QI(e,t,n){var r,i=bI,a=!0,o=Wt(GI(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=bI,c=!0;switch(s.op){case"<":case"<=":u=MI(s.value);break;case"==":case"in":case">=":u=s.value;break;case">":u=s.value,c=!1;break;case"!=":case"not-in":u=bI}UI({value:i,inclusive:a},{value:u,inclusive:c})<0&&(i=u,a=c)}}catch(f){o.e(f)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];UI({value:i,inclusive:a},{value:h,inclusive:n.inclusive})<0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}function YI(e,t,n){var r,i=kI,a=!0,o=Wt(GI(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=kI,c=!0;switch(s.op){case">=":case">":u=FI(s.value),c=!1;break;case"==":case"in":case"<=":u=s.value;break;case"<":u=s.value,c=!1;break;case"!=":case"not-in":u=kI}jI({value:i,inclusive:a},{value:u,inclusive:c})>0&&(i=u,a=c)}}catch(f){o.e(f)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];jI({value:i,inclusive:a},{value:h,inclusive:n.inclusive})>0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}var $I=function(e){Kt(n,e);var t=$t(n);function n(e,r,i){var a;return Ne(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return(0,Pe.Z)(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(SI(t,this.value)):null!==t&&_I(this.value)===_I(t)&&this.ft(SI(t,this.value))}},{key:"ft",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return XS()}}},{key:"dt",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new XI(e,t,r):"array-contains"===t?new nE(e,r):"in"===t?new rE(e,r):"not-in"===t?new iE(e,r):"array-contains-any"===t?new aE(e,r):new n(e,t,r)}},{key:"lt",value:function(e,t,n){return"in"===t?new JI(e,n):new eE(e,n)}}]),n}(function(){return(0,Pe.Z)((function e(){Ne(this,e)}))}()),XI=function(e){Kt(n,e);var t=$t(n);function n(e,r,i){var a;return Ne(this,n),(a=t.call(this,e,r,i)).key=xT.fromName(i.referenceValue),a}return(0,Pe.Z)(n,[{key:"matches",value:function(e){var t=xT.comparator(e.key,this.key);return this.ft(t)}}]),n}($I),JI=function(e){Kt(n,e);var t=$t(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this,e,"in",r)).keys=tE("in",r),i}return(0,Pe.Z)(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}($I),eE=function(e){Kt(n,e);var t=$t(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this,e,"not-in",r)).keys=tE("not-in",r),i}return(0,Pe.Z)(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}($I);function tE(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return xT.fromName(e.referenceValue)}))}var nE=function(e){Kt(n,e);var t=$t(n);function n(e,r){return Ne(this,n),t.call(this,e,"array-contains",r)}return(0,Pe.Z)(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return NI(t)&&xI(t.arrayValue,this.value)}}]),n}($I),rE=function(e){Kt(n,e);var t=$t(n);function n(e,r){return Ne(this,n),t.call(this,e,"in",r)}return(0,Pe.Z)(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&xI(this.value.arrayValue,t)}}]),n}($I),iE=function(e){Kt(n,e);var t=$t(n);function n(e,r){return Ne(this,n),t.call(this,e,"not-in",r)}return(0,Pe.Z)(n,[{key:"matches",value:function(e){if(xI(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!xI(this.value.arrayValue,t)}}]),n}($I),aE=function(e){Kt(n,e);var t=$t(n);function n(e,r){return Ne(this,n),t.call(this,e,"array-contains-any",r)}return(0,Pe.Z)(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!NI(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return xI(t.value.arrayValue,e)}))}}]),n}($I),oE=(0,Pe.Z)((function e(t,n){Ne(this,e),this.position=t,this.inclusive=n})),sE=(0,Pe.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";Ne(this,e),this.field=t,this.dir=n}));function uE(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function cE(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?xT.comparator(xT.fromName(o.referenceValue),n.key):SI(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function lE(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!wI(e.position[n],t.position[n]))return!1;return!0}var hE=(0,Pe.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Ne(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this._t=null,this.wt=null,this.startAt,this.endAt}));function fE(e,t,n,r,i,a,o,s){return new hE(e,t,n,r,i,a,o,s)}function dE(e){return new hE(e)}function pE(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function vE(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function yE(e){var t,n=Wt(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.dt())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function mE(e){return null!==e.collectionGroup}function gE(e){var t=eT(e);if(null===t._t){t._t=[];var n=yE(t),r=vE(t);if(null!==n&&null===r)n.isKeyField()||t._t.push(new sE(n)),t._t.push(new sE(wT.keyField(),"asc"));else{var i,a=!1,o=Wt(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t._t.push(s),s.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t._t.push(new sE(wT.keyField(),u))}}}return t._t}function kE(e){var t=eT(e);if(!t.wt)if("F"===t.limitType)t.wt=zI(t.path,t.collectionGroup,gE(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=Wt(gE(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new sE(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var s=t.endAt?new oE(t.endAt.position,t.endAt.inclusive):null,u=t.startAt?new oE(t.startAt.position,t.startAt.inclusive):null;t.wt=zI(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t.wt}function bE(e,t,n){return new hE(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function _E(e,t){return HI(kE(e),kE(t))&&e.limitType===t.limitType}function wE(e){return"".concat(WI(kE(e)),"|lt:").concat(e.limitType)}function xE(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(II(t.value));var t})).join(", "),"]")),yI(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return II(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return II(e)})).join(",")),"Target(".concat(t,")")}(kE(e)),"; limitType=").concat(e.limitType,")")}function SE(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):xT.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=Wt(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=Wt(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=cE(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,gE(e),t))&&!(e.endAt&&!function(e,t,n){var r=cE(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,gE(e),t))}(e,t)}function TE(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function IE(e){return function(t,n){var r,i=!1,a=Wt(gE(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=EE(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function EE(e,t,n){var r=e.field.isKeyField()?xT.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?SI(r,i):XS()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return XS()}}function CE(e,t){if(e.gt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mI(t)?"-0":t}}function RE(e){return{integerValue:""+e}}function NE(e,t){return gI(t)?RE(t):CE(e,t)}var PE=(0,Pe.Z)((function e(){Ne(this,e),this._=void 0}));function AE(e,t,n){return e instanceof LE?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof ME?FE(e,t):e instanceof UE?jE(e,t):function(e,t){var n=DE(e,t),r=VE(n)+VE(e.yt);return RI(n)&&RI(e.yt)?RE(r):CE(e.It,r)}(e,t)}function OE(e,t,n){return e instanceof ME?FE(e,t):e instanceof UE?jE(e,t):n}function DE(e,t){return e instanceof ZE?RI(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var LE=function(e){Kt(n,e);var t=$t(n);function n(){return Ne(this,n),t.apply(this,arguments)}return(0,Pe.Z)(n)}(PE),ME=function(e){Kt(n,e);var t=$t(n);function n(e){var r;return Ne(this,n),(r=t.call(this)).elements=e,r}return(0,Pe.Z)(n)}(PE);function FE(e,t){var n,r=qE(t),i=Wt(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return wI(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var UE=function(e){Kt(n,e);var t=$t(n);function n(e){var r;return Ne(this,n),(r=t.call(this)).elements=e,r}return(0,Pe.Z)(n)}(PE);function jE(e,t){var n,r=qE(t),i=Wt(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!wI(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var ZE=function(e){Kt(n,e);var t=$t(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this)).It=e,i.yt=r,i}return(0,Pe.Z)(n)}(PE);function VE(e){return cI(e.integerValue||e.doubleValue)}function qE(e){return NI(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var BE=(0,Pe.Z)((function e(t,n){Ne(this,e),this.field=t,this.transform=n}));var zE=(0,Pe.Z)((function e(t,n){Ne(this,e),this.version=t,this.transformResults=n})),WE=function(){function e(t,n){Ne(this,e),this.updateTime=t,this.exists=n}return(0,Pe.Z)(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function HE(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var KE=(0,Pe.Z)((function e(){Ne(this,e)}));function GE(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new oC(e.key,WE.none()):new JE(e.key,e.data,WE.none());var n,r=e.data,i=ZI.empty(),a=new nI(wT.comparator),o=Wt(t.fields);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(!a.has(s)){var u=r.field(s);null===u&&s.length>1&&(s=s.popLast(),u=r.field(s)),null===u?i.delete(s):i.set(s,u),a=a.add(s)}}}catch(c){o.e(c)}finally{o.f()}return new eC(e.key,i,new aI(a.toArray()),WE.none())}function QE(e,t,n){e instanceof JE?function(e,t,n){var r=e.value.clone(),i=nC(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof eC?function(e,t,n){if(HE(e.precondition,t)){var r=nC(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(tC(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function YE(e,t,n,r){return e instanceof JE?function(e,t,n,r){if(!HE(e.precondition,t))return n;var i=e.value.clone(),a=rC(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof eC?function(e,t,n,r){if(!HE(e.precondition,t))return n;var i=rC(e.fieldTransforms,r,t),a=t.data;return a.setAll(tC(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return HE(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function $E(e,t){var n,r=null,i=Wt(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=DE(a.transform,o||null);null!=s&&(null===r&&(r=ZI.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function XE(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&vT(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof ME&&t instanceof ME||e instanceof UE&&t instanceof UE?vT(e.elements,t.elements,wI):e instanceof ZE&&t instanceof ZE?wI(e.yt,t.yt):e instanceof LE&&t instanceof LE}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var JE=function(e){Kt(n,e);var t=$t(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return Ne(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return(0,Pe.Z)(n,[{key:"getFieldMask",value:function(){return null}}]),n}(KE),eC=function(e){Kt(n,e);var t=$t(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return Ne(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return(0,Pe.Z)(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(KE);function tC(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function nC(e,t,n){var r=new Map;JS(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,OE(o,s,n[i]))}return r}function rC(e,t,n){var r,i=new Map,a=Wt(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,AE(s,u,t))}}catch(c){a.e(c)}finally{a.f()}return i}var iC,aC,oC=function(e){Kt(n,e);var t=$t(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return(0,Pe.Z)(n,[{key:"getFieldMask",value:function(){return null}}]),n}(KE),sC=function(e){Kt(n,e);var t=$t(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return(0,Pe.Z)(n,[{key:"getFieldMask",value:function(){return null}}]),n}(KE),uC=(0,Pe.Z)((function e(t){Ne(this,e),this.count=t}));function cC(e){switch(e){default:return XS();case tT.CANCELLED:case tT.UNKNOWN:case tT.DEADLINE_EXCEEDED:case tT.RESOURCE_EXHAUSTED:case tT.INTERNAL:case tT.UNAVAILABLE:case tT.UNAUTHENTICATED:return!1;case tT.INVALID_ARGUMENT:case tT.NOT_FOUND:case tT.ALREADY_EXISTS:case tT.PERMISSION_DENIED:case tT.FAILED_PRECONDITION:case tT.ABORTED:case tT.OUT_OF_RANGE:case tT.UNIMPLEMENTED:case tT.DATA_LOSS:return!0}}function lC(e){if(void 0===e)return QS("GRPC error has no .code"),tT.UNKNOWN;switch(e){case iC.OK:return tT.OK;case iC.CANCELLED:return tT.CANCELLED;case iC.UNKNOWN:return tT.UNKNOWN;case iC.DEADLINE_EXCEEDED:return tT.DEADLINE_EXCEEDED;case iC.RESOURCE_EXHAUSTED:return tT.RESOURCE_EXHAUSTED;case iC.INTERNAL:return tT.INTERNAL;case iC.UNAVAILABLE:return tT.UNAVAILABLE;case iC.UNAUTHENTICATED:return tT.UNAUTHENTICATED;case iC.INVALID_ARGUMENT:return tT.INVALID_ARGUMENT;case iC.NOT_FOUND:return tT.NOT_FOUND;case iC.ALREADY_EXISTS:return tT.ALREADY_EXISTS;case iC.PERMISSION_DENIED:return tT.PERMISSION_DENIED;case iC.FAILED_PRECONDITION:return tT.FAILED_PRECONDITION;case iC.ABORTED:return tT.ABORTED;case iC.OUT_OF_RANGE:return tT.OUT_OF_RANGE;case iC.UNIMPLEMENTED:return tT.UNIMPLEMENTED;case iC.DATA_LOSS:return tT.DATA_LOSS;default:return XS()}}(aC=iC||(iC={}))[aC.OK=0]="OK",aC[aC.CANCELLED=1]="CANCELLED",aC[aC.UNKNOWN=2]="UNKNOWN",aC[aC.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",aC[aC.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",aC[aC.NOT_FOUND=5]="NOT_FOUND",aC[aC.ALREADY_EXISTS=6]="ALREADY_EXISTS",aC[aC.PERMISSION_DENIED=7]="PERMISSION_DENIED",aC[aC.UNAUTHENTICATED=16]="UNAUTHENTICATED",aC[aC.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",aC[aC.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",aC[aC.ABORTED=10]="ABORTED",aC[aC.OUT_OF_RANGE=11]="OUT_OF_RANGE",aC[aC.UNIMPLEMENTED=12]="UNIMPLEMENTED",aC[aC.INTERNAL=13]="INTERNAL",aC[aC.UNAVAILABLE=14]="UNAVAILABLE",aC[aC.DATA_LOSS=15]="DATA_LOSS";var hC=function(){function e(t,n){Ne(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return(0,Pe.Z)(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=Wt(n);try{for(i.s();!(r=i.n()).done;){var o=(0,a.Z)(r.value,2),s=o[0],u=o[1];if(this.equalsFn(s,e))return u}}catch(c){i.e(c)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){$T(this.inner,(function(t,n){var r,i=Wt(n);try{for(i.s();!(r=i.n()).done;){var o=(0,a.Z)(r.value,2),s=o[0],u=o[1];e(s,u)}}catch(c){i.e(c)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return XT(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),fC=new JT(xT.comparator);function dC(){return fC}var pC=new JT(xT.comparator);function vC(){for(var e=pC,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function yC(e){var t=pC;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function mC(){return kC()}function gC(){return kC()}function kC(){return new hC((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var bC=new JT(xT.comparator),_C=new nI(xT.comparator);function wC(){for(var e=_C,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var xC=new nI(pT);function SC(){return xC}var TC=function(){function e(t,n,r,i,a){Ne(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return(0,Pe.Z)(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,IC.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(gT.min(),i,SC(),dC(),wC())}}]),e}(),IC=function(){function e(t,n,r,i,a){Ne(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return(0,Pe.Z)(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,wC(),wC(),wC())}}]),e}(),EC=(0,Pe.Z)((function e(t,n,r,i){Ne(this,e),this.Tt=t,this.removedTargetIds=n,this.key=r,this.Et=i})),CC=(0,Pe.Z)((function e(t,n){Ne(this,e),this.targetId=t,this.At=n})),RC=(0,Pe.Z)((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:oI.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Ne(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),NC=function(){function e(){Ne(this,e),this.Rt=0,this.bt=OC(),this.Pt=oI.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}return(0,Pe.Z)(e,[{key:"current",get:function(){return this.vt}},{key:"resumeToken",get:function(){return this.Pt}},{key:"St",get:function(){return 0!==this.Rt}},{key:"Dt",get:function(){return this.Vt}},{key:"Ct",value:function(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}},{key:"xt",value:function(){var e=wC(),t=wC(),n=wC();return this.bt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:XS()}})),new IC(this.Pt,this.vt,e,t,n)}},{key:"Nt",value:function(){this.Vt=!1,this.bt=OC()}},{key:"kt",value:function(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}},{key:"Ot",value:function(e){this.Vt=!0,this.bt=this.bt.remove(e)}},{key:"Mt",value:function(){this.Rt+=1}},{key:"Ft",value:function(){this.Rt-=1}},{key:"$t",value:function(){this.Vt=!0,this.vt=!0}}]),e}(),PC=function(){function e(t){Ne(this,e),this.Bt=t,this.Lt=new Map,this.Ut=dC(),this.qt=AC(),this.Kt=new nI(pT)}return(0,Pe.Z)(e,[{key:"Gt",value:function(e){var t,n=Wt(e.Tt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Et&&e.Et.isFoundDocument()?this.Qt(r,e.Et):this.jt(r,e.key,e.Et)}}catch(s){n.e(s)}finally{n.f()}var i,a=Wt(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.jt(o,e.key,e.Et)}}catch(s){a.e(s)}finally{a.f()}}},{key:"Wt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.zt(n);switch(e.state){case 0:t.Ht(n)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||t.removeTarget(n);break;case 3:t.Ht(n)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:t.Ht(n)&&(t.Jt(n),r.Ct(e.resumeToken));break;default:XS()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((function(e,r){n.Ht(r)&&t(r)}))}},{key:"Yt",value:function(e){var t=e.targetId,n=e.At.count,r=this.Xt(t);if(r){var i=r.target;if(KI(i))if(0===n){var a=new xT(i.path);this.jt(t,a,qI.newNoDocument(a,gT.min()))}else JS(1===n);else this.Zt(t)!==n&&(this.Jt(t),this.Kt=this.Kt.add(t))}}},{key:"te",value:function(e){var t=this,n=new Map;this.Lt.forEach((function(r,i){var a=t.Xt(i);if(a){if(r.current&&KI(a.target)){var o=new xT(a.target.path);null!==t.Ut.get(o)||t.ee(i,o)||t.jt(i,o,qI.newNoDocument(o,e))}r.Dt&&(n.set(i,r.xt()),r.Nt())}}));var r=wC();this.qt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Xt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Ut.forEach((function(t,n){return n.setReadTime(e)}));var i=new TC(e,n,this.Kt,this.Ut,r);return this.Ut=dC(),this.qt=AC(),this.Kt=new nI(pT),i}},{key:"Qt",value:function(e,t){if(this.Ht(e)){var n=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,n),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}}},{key:"jt",value:function(e,t,n){if(this.Ht(e)){var r=this.zt(e);this.ee(e,t)?r.kt(t,1):r.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),n&&(this.Ut=this.Ut.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Lt.delete(e)}},{key:"Zt",value:function(e){var t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Mt",value:function(e){this.zt(e).Mt()}},{key:"zt",value:function(e){var t=this.Lt.get(e);return t||(t=new NC,this.Lt.set(e,t)),t}},{key:"ne",value:function(e){var t=this.qt.get(e);return t||(t=new nI(pT),this.qt=this.qt.insert(e,t)),t}},{key:"Ht",value:function(e){var t=null!==this.Xt(e);return t||GS("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Xt",value:function(e){var t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}},{key:"Jt",value:function(e){var t=this;this.Lt.set(e,new NC),this.Bt.getRemoteKeysForTarget(e).forEach((function(n){t.jt(e,n,null)}))}},{key:"ee",value:function(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}]),e}();function AC(){return new JT(xT.comparator)}function OC(){return new JT(xT.comparator)}var DC={asc:"ASCENDING",desc:"DESCENDING"},LC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MC=(0,Pe.Z)((function e(t,n){Ne(this,e),this.databaseId=t,this.gt=n}));function FC(e,t){return e.gt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function UC(e,t){return e.gt?t.toBase64():t.toUint8Array()}function jC(e,t){return FC(e,t.toTimestamp())}function ZC(e){return JS(!!e),gT.fromTimestamp(function(e){var t=uI(e);return new mT(t.seconds,t.nanos)}(e))}function VC(e,t){return function(e){return new bT(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function qC(e){var t=bT.fromString(e);return JS(hR(t)),t}function BC(e,t){return VC(e.databaseId,t.path)}function zC(e,t){var n=qC(t);if(n.get(1)!==e.databaseId.projectId)throw new nT(tT.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new nT(tT.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new xT(GC(n))}function WC(e,t){return VC(e.databaseId,t)}function HC(e){var t=qC(e);return 4===t.length?bT.emptyPath():GC(t)}function KC(e){return new bT(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function GC(e){return JS(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function QC(e,t,n){return{name:BC(e,t),fields:n.value.mapValue.fields}}function YC(e,t,n){var r=zC(e,t.name),i=ZC(t.updateTime),a=new ZI({mapValue:{fields:t.fields}}),o=qI.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function $C(e,t){return"found"in t?function(e,t){JS(!!t.found),t.found.name,t.found.updateTime;var n=zC(e,t.found.name),r=ZC(t.found.updateTime),i=new ZI({mapValue:{fields:t.found.fields}});return qI.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){JS(!!t.missing),JS(!!t.readTime);var n=zC(e,t.missing),r=ZC(t.readTime);return qI.newNoDocument(n,r)}(e,t):XS()}function XC(e,t){var n;if(t instanceof JE)n={update:QC(e,t.key,t.value)};else if(t instanceof oC)n={delete:BC(e,t.key)};else if(t instanceof eC)n={update:QC(e,t.key,t.data),updateMask:lR(t.fieldMask)};else{if(!(t instanceof sC))return XS();n={verify:BC(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof LE)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ME)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof UE)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ZE)return{fieldPath:t.field.canonicalString(),increment:n.yt};throw XS()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:jC(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:XS()}(e,t.precondition)),n}function JC(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?WE.updateTime(ZC(e.updateTime)):void 0!==e.exists?WE.exists(e.exists):WE.none()}(t.currentDocument):WE.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)JS("REQUEST_TIME"===t.setToServerValue),n=new LE;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new ME(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new UE(i)}else"increment"in t?n=new ZE(e,t.increment):XS();var a=wT.fromServerFormat(t.fieldPath);return new BE(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=zC(e,t.update.name),a=new ZI({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new aI(t.map((function(e){return wT.fromServerFormat(e)})))}(t.updateMask);return new eC(i,a,o,n,r)}return new JE(i,a,n,r)}if(t.delete){var s=zC(e,t.delete);return new oC(s,n)}if(t.verify){var u=zC(e,t.verify);return new sC(u,n)}return XS()}function eR(e,t){return{documents:[WC(e,t.path)]}}function tR(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=WC(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=WC(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(AI(e.value))return{unaryFilter:{field:oR(e.field),op:"IS_NAN"}};if(PI(e.value))return{unaryFilter:{field:oR(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(AI(e.value))return{unaryFilter:{field:oR(e.field),op:"IS_NOT_NAN"}};if(PI(e.value))return{unaryFilter:{field:oR(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oR(e.field),op:aR(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:oR(e.field),direction:iR(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,s=function(e,t){return e.gt||yI(t)?t:{value:t}}(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function nR(e){var t=HC(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){JS(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=rR(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new sE(sR(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return yI(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new oE(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new oE(n,t)}(n.endAt)),fE(t,i,s,o,u,"F",c,l)}function rR(e){return e?void 0!==e.unaryFilter?[cR(e)]:void 0!==e.fieldFilter?[uR(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return rR(e)})).reduce((function(e,t){return e.concat(t)})):XS():[]}function iR(e){return DC[e]}function aR(e){return LC[e]}function oR(e){return{fieldPath:e.canonicalString()}}function sR(e){return wT.fromServerFormat(e.fieldPath)}function uR(e){return $I.create(sR(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return XS()}}(e.fieldFilter.op),e.fieldFilter.value)}function cR(e){switch(e.unaryFilter.op){case"IS_NAN":var t=sR(e.unaryFilter.field);return $I.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=sR(e.unaryFilter.field);return $I.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=sR(e.unaryFilter.field);return $I.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=sR(e.unaryFilter.field);return $I.create(i,"!=",{nullValue:"NULL_VALUE"});default:return XS()}}function lR(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function hR(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function fR(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=pR(t)),t=dR(e.get(n),t);return pR(t)}function dR(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function pR(e){return e+"\x01\x01"}function vR(e){var t=e.length;if(JS(t>=2),2===t)return JS("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),bT.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&XS(),e.charAt(o+1)){case"\x01":var s=e.substring(a,o),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:XS()}a=o+2}return new bT(r)}var yR=["userId","batchId"];function mR(e,t){return[e,fR(t)]}function gR(e,t,n){return[e,fR(t),n]}var kR={},bR=["prefixPath","collectionGroup","readTime","documentId"],_R=["prefixPath","collectionGroup","documentId"],wR=["collectionGroup","readTime","prefixPath","documentId"],xR=["canonicalId","targetId"],SR=["targetId","path"],TR=["path","targetId"],IR=["collectionId","parent"],ER=["indexId","uid"],CR=["uid","sequenceNumber"],RR=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],NR=["indexId","uid","orderedDocumentKey"],PR=["userId","collectionPath","documentId"],AR=["userId","collectionPath","largestBatchId"],OR=["userId","collectionGroup","largestBatchId"],DR=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),LR=[].concat((0,i.Z)(DR),["documentOverlays"]),MR=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],FR=MR,UR=[].concat(FR,["indexConfiguration","indexState","indexEntries"]),jR=function(e){Kt(n,e);var t=$t(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this)).ie=e,i.currentSequenceNumber=r,i}return(0,Pe.Z)(n)}(DT);function ZR(e,t){var n=eT(e);return jT.M(n.ie,t)}var VR=function(){function e(t,n,r,i){Ne(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return(0,Pe.Z)(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&QE(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=Wt(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=YE(i,e,t,this.localWriteTime))}}catch(u){r.e(u)}finally{r.f()}var a,o=Wt(this.mutations);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.key.isEqual(e.key)&&(t=YE(s,e,t,this.localWriteTime))}}catch(u){o.e(u)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=gC();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,s=n.applyToLocalView(o,a.mutatedFields),u=GE(o,s=t.has(i.key)?null:s);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(gT.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),wC())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&vT(this.mutations,e.mutations,(function(e,t){return XE(e,t)}))&&vT(this.baseMutations,e.baseMutations,(function(e,t){return XE(e,t)}))}}]),e}(),qR=function(){function e(t,n,r,i){Ne(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return(0,Pe.Z)(e,null,[{key:"from",value:function(t,n,r){JS(t.mutations.length===r.length);for(var i=bC,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),BR=function(){function e(t,n){Ne(this,e),this.largestBatchId=t,this.mutation=n}return(0,Pe.Z)(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),zR=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:gT.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:gT.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:oI.EMPTY_BYTE_STRING;Ne(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return(0,Pe.Z)(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),WR=(0,Pe.Z)((function e(t){Ne(this,e),this.re=t}));function HR(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:KR(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:BC(e,t.key),fields:t.data.value.mapValue.fields,updateTime:FC(e,t.version.toTimestamp())}}(e.re,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:GR(t.version)};else{if(!t.isUnknownDocument())return XS();r.unknownDocument={path:n.path.toArray(),version:GR(t.version)}}return r}function KR(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function GR(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function QR(e){var t=new mT(e.seconds,e.nanoseconds);return gT.fromTimestamp(t)}function YR(e,t){for(var n=(t.baseMutations||[]).map((function(t){return JC(e.re,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return JC(e.re,t)})),s=mT.fromMillis(t.localWriteTimeMs);return new VR(t.batchId,s,n,o)}function $R(e){var t,n,r=QR(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?QR(e.lastLimboFreeSnapshotVersion):gT.min();return void 0!==e.query.documents?(JS(1===(n=e.query).documents.length),t=kE(dE(HC(n.documents[0])))):t=function(e){return kE(nR(e))}(e.query),new zR(t,e.targetId,0,e.lastListenSequenceNumber,r,i,oI.fromBase64String(e.resumeToken))}function XR(e,t){var n,r=GR(t.snapshotVersion),i=GR(t.lastLimboFreeSnapshotVersion);n=KI(t.target)?eR(e.re,t.target):tR(e.re,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:WI(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function JR(e){var t=nR({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?bE(t,t.limit,"L"):t}function eN(e,t){return new BR(t.largestBatchId,JC(e.re,t.overlayMutation))}function tN(e,t){var n=t.path.lastSegment();return[e,fR(t.path.popLast()),n]}function nN(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:GR(r.readTime),documentKey:fR(r.documentKey.path),largestBatchId:r.largestBatchId}}var rN=function(){function e(){Ne(this,e)}return(0,Pe.Z)(e,[{key:"getBundleMetadata",value:function(e,t){return iN(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:QR(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return iN(e).put({bundleId:(n=t).id,createTime:GR(ZC(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return aN(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:JR(t.bundledQuery),readTime:QR(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return aN(e).put(function(e){return{name:e.name,readTime:GR(ZC(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function iN(e){return ZR(e,"bundles")}function aN(e){return ZR(e,"namedQueries")}var oN=function(){function e(t,n){Ne(this,e),this.It=t,this.userId=n}return(0,Pe.Z)(e,[{key:"getOverlay",value:function(e,t){var n=this;return sN(e).get(tN(this.userId,t)).next((function(e){return e?eN(n.It,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=mC();return FT.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new BR(t,a);i.push(r.ue(e,o))})),FT.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(fR(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(sN(e).Y("collectionPathOverlayIndex",i))})),FT.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=mC(),a=fR(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return sN(e).W("collectionPathOverlayIndex",o).next((function(e){var t,n=Wt(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=eN(r.It,a);i.set(o.getKey(),o)}}catch(s){n.e(s)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=mC(),s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return sN(e).Z({index:"collectionGroupOverlayIndex",range:s},(function(e,t,n){var s=eN(a.It,t);o.size()<r||s.largestBatchId===i?(o.set(s.getKey(),s),i=s.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ue",value:function(e,t){return sN(e).put(function(e,t,n){var r=tN(t,n.mutation.key),i=(0,a.Z)(r,3);i[0];return{userId:t,collectionPath:i[1],documentId:i[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:XC(e.re,n.mutation)}}(this.It,this.userId,t))}}],[{key:"oe",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function sN(e){return ZR(e,"documentOverlays")}var uN=function(){function e(){Ne(this,e)}return(0,Pe.Z)(e,[{key:"ce",value:function(e,t){this.ae(e,t),t.he()}},{key:"ae",value:function(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(cI(e.integerValue));else if("doubleValue"in e){var n=cI(e.doubleValue);isNaN(n)?this.le(t,13):(this.le(t,15),mI(n)?t.fe(0):t.fe(n))}else if("timestampValue"in e){var r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de("".concat(r.seconds||"")),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(lI(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.le(t,45),t.fe(i.latitude||0),t.fe(i.longitude||0)}else"mapValue"in e?LI(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):XS()}},{key:"_e",value:function(e,t){this.le(t,25),this.Ie(e,t)}},{key:"Ie",value:function(e,t){t.de(e)}},{key:"ye",value:function(e,t){var n=e.fields||{};this.le(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this._e(a,t),this.ae(n[a],t)}}},{key:"pe",value:function(e,t){var n=e.values||[];this.le(t,50);var r,i=Wt(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.ae(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ge",value:function(e,t){var n=this;this.le(t,37),xT.fromName(e).path.forEach((function(e){n.le(t,60),n.Ie(e,t)}))}},{key:"le",value:function(e,t){e.fe(t)}},{key:"we",value:function(e){e.fe(2)}}]),e}();function cN(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function lN(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=cN(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}uN.Te=new uN;var hN=function(){function e(){Ne(this,e),this.buffer=new Uint8Array(1024),this.position=0}return(0,Pe.Z)(e,[{key:"Ee",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ae(n.value),n=t.next();this.Re()}},{key:"be",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Pe(n.value),n=t.next();this.ve()}},{key:"Ve",value:function(e){var t,n=Wt(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{var a=r.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Re()}},{key:"Se",value:function(e){var t,n=Wt(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Pe(i);else if(i<2048)this.Pe(960|i>>>6),this.Pe(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Pe(480|i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i);else{var a=r.codePointAt(0);this.Pe(240|a>>>18),this.Pe(128|63&a>>>12),this.Pe(128|63&a>>>6),this.Pe(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ve()}},{key:"De",value:function(e){var t=this.Ce(e),n=lN(t);this.xe(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Ne",value:function(e){var t=this.Ce(e),n=lN(t);this.xe(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"ke",value:function(){this.Oe(255),this.Oe(255)}},{key:"Me",value:function(){this.Fe(255),this.Fe(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"$e",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ce",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ae",value:function(e){var t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}},{key:"Pe",value:function(e){var t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}},{key:"Re",value:function(){this.Oe(0),this.Oe(1)}},{key:"ve",value:function(){this.Fe(0),this.Fe(1)}},{key:"Oe",value:function(e){this.xe(1),this.buffer[this.position++]=e}},{key:"Fe",value:function(e){this.xe(1),this.buffer[this.position++]=~e}},{key:"xe",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),fN=function(){function e(t){Ne(this,e),this.Be=t}return(0,Pe.Z)(e,[{key:"me",value:function(e){this.Be.Ee(e)}},{key:"de",value:function(e){this.Be.Ve(e)}},{key:"fe",value:function(e){this.Be.De(e)}},{key:"he",value:function(){this.Be.ke()}}]),e}(),dN=function(){function e(t){Ne(this,e),this.Be=t}return(0,Pe.Z)(e,[{key:"me",value:function(e){this.Be.be(e)}},{key:"de",value:function(e){this.Be.Se(e)}},{key:"fe",value:function(e){this.Be.Ne(e)}},{key:"he",value:function(){this.Be.Me()}}]),e}(),pN=function(){function e(){Ne(this,e),this.Be=new hN,this.Le=new fN(this.Be),this.Ue=new dN(this.Be)}return(0,Pe.Z)(e,[{key:"seed",value:function(e){this.Be.seed(e)}},{key:"qe",value:function(e){return 0===e?this.Le:this.Ue}},{key:"$e",value:function(){return this.Be.$e()}},{key:"reset",value:function(){this.Be.reset()}}]),e}(),vN=function(){function e(t,n,r,i){Ne(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return(0,Pe.Z)(e,[{key:"Ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function yN(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=mN(e.arrayValue,t.arrayValue))?n:0!==(n=mN(e.directionalValue,t.directionalValue))?n:xT.comparator(e.documentKey,t.documentKey)}function mN(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var gN=function(){function e(t){Ne(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ge=t.orderBy,this.Qe=[];var n,r=Wt(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.dt()?this.je=i:this.Qe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return(0,Pe.Z)(e,[{key:"We",value:function(e){var t=TT(e);if(void 0!==t&&!this.ze(t))return!1;for(var n=IT(e),r=0,i=0;r<n.length&&this.ze(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.je){var a=n[r];if(!this.He(this.je,a)||!this.Je(this.Ge[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ge.length||!this.Je(this.Ge[i++],o))return!1}return!0}},{key:"ze",value:function(e){var t,n=Wt(this.Qe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.He(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"He",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Je",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),kN=function(){function e(){Ne(this,e),this.Ye=new bN}return(0,Pe.Z)(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Ye.add(t),FT.resolve()}},{key:"getCollectionParents",value:function(e,t){return FT.resolve(this.Ye.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return FT.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return FT.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return FT.resolve(null)}},{key:"getIndexType",value:function(e,t){return FT.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return FT.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return FT.resolve(null)}},{key:"getMinOffset",value:function(e,t){return FT.resolve(PT.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return FT.resolve(PT.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return FT.resolve()}},{key:"updateIndexEntries",value:function(e,t){return FT.resolve()}}]),e}(),bN=function(){function e(){Ne(this,e),this.index={}}return(0,Pe.Z)(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new nI(bT.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new nI(bT.comparator)).toArray()}}]),e}(),_N=new Uint8Array(0),wN=function(){function e(t,n){Ne(this,e),this.user=t,this.databaseId=n,this.Xe=new bN,this.Ze=new hC((function(e){return WI(e)}),(function(e,t){return HI(e,t)})),this.uid=t.uid||""}return(0,Pe.Z)(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Xe.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Xe.add(t)}));var a={collectionId:r,parent:fR(i)};return xN(e).put(a)}return FT.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[yT(t),""],!1,!0);return xN(e).W(r).next((function(e){var r,i=Wt(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(vR(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=TN(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=IN(e);return a.next((function(e){o.put(nN(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=TN(e),r=IN(e),i=SN(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=SN(e),i=!0,a=new Map;return FT.forEach(this.tn(t),(function(t){return n.en(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=wC(),o=[];return FT.forEach(a,(function(i,a){var s;GS("IndexedDbIndexManager","Using index ".concat((s=i,"id=".concat(s.indexId,"|cg=").concat(s.collectionGroup,"|f=").concat(s.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(WI(t)));var u=function(e,t){var n=TT(t);if(void 0===n)return null;var r,i=Wt(GI(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=Wt(IT(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,s=Wt(GI(e,o.fieldPath));try{for(s.s();!(a=s.n()).done;){var u=a.value;switch(u.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),u.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),u.value),Array.from(r.values())}}}catch(c){s.e(c)}finally{s.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=Wt(IT(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?QI(e,o.fieldPath,e.startAt):YI(e,o.fieldPath,e.startAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new oE(r,i)}(a,i),h=function(e,t){var n,r=[],i=!0,a=Wt(IT(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?YI(e,o.fieldPath,e.endAt):QI(e,o.fieldPath,e.endAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new oE(r,i)}(a,i),f=n.nn(i,a,l),d=n.nn(i,a,h),p=n.sn(i,a,c),v=n.rn(i.indexId,u,f,l.inclusive,d,h.inclusive,p);return FT.forEach(v,(function(n){return r.J(n,t.limit).next((function(t){t.forEach((function(t){var n=xT.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return FT.resolve(null)}))}},{key:"tn",value:function(e){var t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}},{key:"rn",value:function(e,t,n,r,a,o,s){for(var u=this,c=(null!=t?t.length:1)*Math.max(n.length,a.length),l=c/(null!=t?t.length:1),h=[],f=function(c){var f=t?u.on(t[c/l]):_N,d=u.un(e,f,n[c%l],r),p=u.cn(e,f,a[c%l],o),v=s.map((function(t){return u.un(e,f,t,!0)}));h.push.apply(h,(0,i.Z)(u.createRange(d,p,v)))},d=0;d<c;++d)f(d);return h}},{key:"un",value:function(e,t,n,r){var i=new vN(e,xT.empty(),t,n);return r?i:i.Ke()}},{key:"cn",value:function(e,t,n,r){var i=new vN(e,xT.empty(),t,n);return r?i.Ke():i}},{key:"en",value:function(e,t){var n=new gN(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=Wt(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.We(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return FT.forEach(this.tn(t),(function(t){return n.en(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new nI(wT.comparator),r=!1,i=Wt(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,s=Wt(e.orderBy);try{for(s.s();!(o=s.n()).done;){var u=o.value;u.field.isKeyField()||(n=n.add(u.field))}}catch(c){s.e(c)}finally{s.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"an",value:function(e,t){var n,r=new pN,i=Wt(IT(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var s=r.qe(a.kind);uN.Te.ce(o,s)}}catch(u){i.e(u)}finally{i.f()}return r.$e()}},{key:"on",value:function(e){var t=new pN;return uN.Te.ce(e,t.qe(0)),t.$e()}},{key:"hn",value:function(e,t){var n=new pN;return uN.Te.ce(CI(this.databaseId,t),n.qe(function(e){var t=IT(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.$e()}},{key:"sn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new pN);var i,a=0,o=Wt(IT(e));try{for(o.s();!(i=o.n()).done;){var s,u=i.value,c=n[a++],l=Wt(r);try{for(l.s();!(s=l.n()).done;){var h=s.value;if(this.ln(t,u.fieldPath)&&NI(c))r=this.fn(r,u,c);else{var f=h.qe(u.kind);uN.Te.ce(c,f)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.dn(r)}},{key:"nn",value:function(e,t,n){return this.sn(e,t,n.position)}},{key:"dn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].$e();return t}},{key:"fn",value:function(e,t,n){var r,a=(0,i.Z)(e),o=[],s=Wt(n.arrayValue.values||[]);try{for(s.s();!(r=s.n()).done;){var u,c=r.value,l=Wt(a);try{for(l.s();!(u=l.n()).done;){var h=u.value,f=new pN;f.seed(h.$e()),uN.Te.ce(c,f.qe(t.kind)),o.push(f)}}catch(d){l.e(d)}finally{l.f()}}}catch(d){s.e(d)}finally{s.f()}return o}},{key:"ln",value:function(e,t){return!!e.filters.find((function(e){return e instanceof $I&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=TN(e),i=IN(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next((function(e){var t=[];return FT.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new CT(t.sequenceNumber,new PT(QR(t.readTime),new xT(vR(t.documentKey)),t.largestBatchId)):CT.empty(),r=e.fields.map((function(e){var t=(0,a.Z)(e,2),n=t[0],r=t[1];return new ET(wT.fromServerFormat(n),r)}));return new ST(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:pT(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=TN(e),a=IN(e);return this._n(e).next((function(e){return i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return FT.forEach(t,(function(t){return a.put(nN(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return FT.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?FT.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),FT.forEach(a,(function(r){return n.wn(e,t,r).next((function(t){var a=n.mn(i,r);return t.isEqual(a)?FT.resolve():n.gn(e,i,r,t,a)}))}))}))}))}},{key:"yn",value:function(e,t,n,r){return SN(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.hn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"pn",value:function(e,t,n,r){return SN(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.hn(n,t.key),t.key.path.toArray()])}},{key:"wn",value:function(e,t,n){var r=SN(e),i=new nI(yN);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.hn(n,t)])},(function(e,r){i=i.add(new vN(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"mn",value:function(e,t){var n=new nI(yN),r=this.an(t,e);if(null==r)return n;var i=TT(t);if(null!=i){var a=e.data.field(i.fieldPath);if(NI(a)){var o,s=Wt(a.arrayValue.values||[]);try{for(s.s();!(o=s.n()).done;){var u=o.value;n=n.add(new vN(t.indexId,e.key,this.on(u),r))}}catch(c){s.e(c)}finally{s.f()}}}else n=n.add(new vN(t.indexId,e.key,_N,r));return n}},{key:"gn",value:function(e,t,n,r,i){var a=this;GS("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),s=iI(a),u=iI(o);s||u;){var c=!1,l=!1;if(s&&u){var h=n(s,u);h<0?l=!0:h>0&&(c=!0)}else null!=s?l=!0:c=!0;c?(r(u),u=iI(o)):l?(i(s),s=iI(a)):(s=iI(a),u=iI(o))}}(r,i,yN,(function(r){o.push(a.yn(e,t,n,r))}),(function(r){o.push(a.pn(e,t,n,r))})),FT.waitFor(o)}},{key:"_n",value:function(e){var t=1;return IN(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return yN(e,t)})).filter((function(e,t,n){return!t||0!==yN(e,n[t-1])}));var r=[];r.push(e);var i,a=Wt(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=yN(o,e),u=yN(o,t);if(0===s)r[0]=e.Ke();else if(s>0&&u<0)r.push(o),r.push(o.Ke());else if(u>0)break}}catch(h){a.e(h)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,_N,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,_N,[]]));return c}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(EN)}},{key:"getMinOffset",value:function(e,t){var n=this;return FT.mapArray(this.tn(t),(function(t){return n.en(e,t).next((function(e){return e||XS()}))})).next(EN)}}]),e}();function xN(e){return ZR(e,"collectionParents")}function SN(e){return ZR(e,"indexEntries")}function TN(e){return ZR(e,"indexConfiguration")}function IN(e){return ZR(e,"indexState")}function EN(e){JS(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;AT(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new PT(t.readTime,t.documentKey,n)}var CN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},RN=function(){function e(t,n,r){Ne(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return(0,Pe.Z)(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function NN(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),s=0,u=r.Z({range:o},(function(e,t,n){return s++,n.delete()}));a.push(u.next((function(){JS(1===s)})));var c,l=[],h=Wt(n.mutations);try{for(h.s();!(c=h.n()).done;){var f=c.value,d=gR(t,f.key.path,n.batchId);a.push(i.delete(d)),l.push(f.key)}}catch(p){h.e(p)}finally{h.f()}return FT.waitFor(a).next((function(){return l}))}function PN(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw XS();t=e.noDocument}return JSON.stringify(t).length}RN.DEFAULT_COLLECTION_PERCENTILE=10,RN.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,RN.DEFAULT=new RN(41943040,RN.DEFAULT_COLLECTION_PERCENTILE,RN.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),RN.DISABLED=new RN(-1,0,0);var AN=function(){function e(t,n,r,i){Ne(this,e),this.userId=t,this.It=n,this.indexManager=r,this.referenceDelegate=i,this.In={}}return(0,Pe.Z)(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return DN(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=LN(e),o=DN(e);return o.add({}).next((function(s){JS("number"==typeof s);var u,c=new VR(s,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return XC(e.re,t)})),i=n.mutations.map((function(t){return XC(e.re,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.It,i.userId,c),h=[],f=new nI((function(e,t){return pT(e.canonicalString(),t.canonicalString())})),d=Wt(r);try{for(d.s();!(u=d.n()).done;){var p=u.value,v=gR(i.userId,p.key.path,s);f=f.add(p.key.path.popLast()),h.push(o.put(l)),h.push(a.put(v,kR))}}catch(y){d.e(y)}finally{d.f()}return f.forEach((function(t){h.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.In[s]=c.keys()})),FT.waitFor(h).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return DN(e).get(t).next((function(e){return e?(JS(e.userId===n.userId),YR(n.It,e)):null}))}},{key:"Tn",value:function(e,t){var n=this;return this.In[t]?FT.resolve(this.In[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.In[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return DN(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(JS(t.batchId>=r),a=YR(n.It,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return DN(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return DN(e).W("userMutationsIndex",n).next((function(e){return e.map((function(e){return YR(t.It,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=mR(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return LN(e).Z({range:i},(function(r,i,s){var u=(0,a.Z)(r,3),c=u[0],l=u[1],h=u[2],f=vR(l);if(c===n.userId&&t.path.isEqual(f))return DN(e).get(h).next((function(e){if(!e)throw XS();JS(e.userId===n.userId),o.push(YR(n.It,e))}));s.done()})).next((function(){return o}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new nI(pT),i=[];return t.forEach((function(t){var o=mR(n.userId,t.path),s=IDBKeyRange.lowerBound(o),u=LN(e).Z({range:s},(function(e,i,o){var s=(0,a.Z)(e,3),u=s[0],c=s[1],l=s[2],h=vR(c);u===n.userId&&t.path.isEqual(h)?r=r.add(l):o.done()}));i.push(u)})),FT.waitFor(i).next((function(){return n.En(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,o=mR(this.userId,r),s=IDBKeyRange.lowerBound(o),u=new nI(pT);return LN(e).Z({range:s},(function(e,t,o){var s=(0,a.Z)(e,3),c=s[0],l=s[1],h=s[2],f=vR(l);c===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(h)):o.done()})).next((function(){return n.En(e,u)}))}},{key:"En",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(DN(e).get(t).next((function(e){if(null===e)throw XS();JS(e.userId===n.userId),r.push(YR(n.It,e))})))})),FT.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return NN(e.ie,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.An(t.batchId)})),FT.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"An",value:function(e){delete this.In[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return FT.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return LN(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=vR(e[1]);i.push(a)}else r.done()})).next((function(){JS(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return ON(e,this.userId,t)}},{key:"Rn",value:function(e){var t=this;return MN(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"oe",value:function(t,n,r,i){return JS(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function ON(e,t,n){var r=mR(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return LN(e).Z({range:o,X:!0},(function(e,n,r){var o=(0,a.Z)(e,3),u=o[0],c=o[1];o[2];u===t&&c===i&&(s=!0),r.done()})).next((function(){return s}))}function DN(e){return ZR(e,"mutations")}function LN(e){return ZR(e,"documentMutations")}function MN(e){return ZR(e,"mutationQueues")}var FN=function(){function e(t){Ne(this,e),this.bn=t}return(0,Pe.Z)(e,[{key:"next",value:function(){return this.bn+=2,this.bn}}],[{key:"Pn",value:function(){return new e(0)}},{key:"vn",value:function(){return new e(-1)}}]),e}(),UN=function(){function e(t,n){Ne(this,e),this.referenceDelegate=t,this.It=n}return(0,Pe.Z)(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Vn(e).next((function(n){var r=new FN(n.highestTargetId);return n.highestTargetId=r.next(),t.Sn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Vn(e).next((function(e){return gT.fromTimestamp(new mT(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Vn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Vn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Sn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Dn(e,t).next((function(){return n.Vn(e).next((function(r){return r.targetCount+=1,n.Cn(t,r),n.Sn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Dn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return jN(e).delete(t.targetId)})).next((function(){return n.Vn(e)})).next((function(t){return JS(t.targetCount>0),t.targetCount-=1,n.Sn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return jN(e).Z((function(o,s){var u=$R(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,a.push(r.removeTargetData(e,u)))})).next((function(){return FT.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return jN(e).Z((function(e,n){var r=$R(n);t(r)}))}},{key:"Vn",value:function(e){return ZN(e).get("targetGlobalKey").next((function(e){return JS(null!==e),e}))}},{key:"Sn",value:function(e,t){return ZN(e).put("targetGlobalKey",t)}},{key:"Dn",value:function(e,t){return jN(e).put(XR(this.It,t))}},{key:"Cn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Vn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=WI(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return jN(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=$R(n);HI(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=VN(e);return t.forEach((function(t){var o=fR(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),FT.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=VN(e);return FT.forEach(t,(function(t){var a=fR(t.path);return FT.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=VN(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=VN(e),i=wC();return r.Z({range:n,X:!0},(function(e,t,n){var r=vR(e[1]),a=new xT(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=fR(t.path),r=IDBKeyRange.bound([n],[yT(n)],!1,!0),i=0;return VN(e).Z({index:"documentTargetsIndex",X:!0,range:r},(function(e,t,n){var r=(0,a.Z)(e,2),o=r[0];r[1];0!==o&&(i++,n.done())})).next((function(){return i>0}))}},{key:"se",value:function(e,t){return jN(e).get(t).next((function(e){return e?$R(e):null}))}}]),e}();function jN(e){return ZR(e,"targets")}function ZN(e){return ZR(e,"targetGlobal")}function VN(e){return ZR(e,"targetDocuments")}function qN(e,t){var n=(0,a.Z)(e,2),r=n[0],i=n[1],o=(0,a.Z)(t,2),s=o[0],u=o[1],c=pT(r,s);return 0===c?pT(i,u):c}var BN=function(){function e(t){Ne(this,e),this.xn=t,this.buffer=new nI(qN),this.Nn=0}return(0,Pe.Z)(e,[{key:"kn",value:function(){return++this.Nn}},{key:"On",value:function(e){var t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();qN(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),zN=function(){function e(t,n,r){Ne(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Mn=null}return(0,Pe.Z)(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}},{key:"stop",value:function(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}},{key:"started",get:function(){return null!==this.Mn}},{key:"Fn",value:function(e){var t=this;GS("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,$(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Mn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!qT(e.t0)){e.next=12;break}GS("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,LT(e.t0);case 14:return e.next=16,t.Fn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),WN=function(){function e(t,n){Ne(this,e),this.$n=t,this.params=n}return(0,Pe.Z)(e,[{key:"calculateTargetCount",value:function(e,t){return this.$n.Bn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return FT.resolve(QT.at);var r=new BN(t);return this.$n.forEachTarget(e,(function(e){return r.On(e.sequenceNumber)})).next((function(){return n.$n.Ln(e,(function(e){return r.On(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.$n.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.$n.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(GS("LruGarbageCollector","Garbage collection skipped; disabled"),FT.resolve(CN)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(GS("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),CN):n.Un(e,t)}))}},{key:"getCacheSize",value:function(e){return this.$n.getCacheSize(e)}},{key:"Un",value:function(e,t){var n,r,i,a,o,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(GS("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),KS()<=tr.DEBUG&&GS("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(s-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-s)+"ms\n"+"Total Duration: ".concat(u-l,"ms")),FT.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),HN=function(){function e(t,n){Ne(this,e),this.db=t,this.garbageCollector=function(e,t){return new WN(e,t)}(this,n)}return(0,Pe.Z)(e,[{key:"Bn",value:function(e){var t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"qn",value:function(e){var t=0;return this.Ln(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Ln",value:function(e,t){return this.Kn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return KN(e,n)}},{key:"removeReference",value:function(e,t,n){return KN(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return KN(e,t)}},{key:"Gn",value:function(e,t){return function(e,t){var n=!1;return MN(e).tt((function(r){return ON(e,r,t).next((function(e){return e&&(n=!0),FT.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Kn(e,(function(o,s){if(s<=t){var u=n.Gn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,gT.min()),VN(e).delete([0,fR(o.path)])}))}));i.push(u)}})).next((function(){return FT.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return KN(e,t)}},{key:"Kn",value:function(e,t){var n,r=VN(e),i=QT.at;return r.Z({index:"documentTargetsIndex"},(function(e,r){var o=(0,a.Z)(e,2),s=o[0],u=(o[1],r.path),c=r.sequenceNumber;0===s?(i!==QT.at&&t(new xT(vR(n)),i),i=c,n=u):i=QT.at})).next((function(){i!==QT.at&&t(new xT(vR(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function KN(e,t){return VN(e).put(function(e,t){return{targetId:0,path:fR(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var GN=function(){function e(){Ne(this,e),this.changes=new hC((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return(0,Pe.Z)(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,qI.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?FT.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),QN=function(){function e(t){Ne(this,e),this.It=t}return(0,Pe.Z)(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return JN(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return JN(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],KR(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Qn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=qI.newInvalidDocument(t);return JN(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(eP(t))},(function(e,i){r=n.jn(t,i)})).next((function(){return r}))}},{key:"Wn",value:function(e,t){var n=this,r={size:0,document:qI.newInvalidDocument(t)};return JN(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(eP(t))},(function(e,i){r={document:n.jn(t,i),size:PN(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=dC();return this.zn(e,t,(function(e,t){var i=n.jn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Hn",value:function(e,t){var n=this,r=dC(),i=new JT(xT.comparator);return this.zn(e,t,(function(e,t){var a=n.jn(e,t);r=r.insert(e,a),i=i.insert(e,PN(t))})).next((function(){return{documents:r,Jn:i}}))}},{key:"zn",value:function(e,t,n){if(t.isEmpty())return FT.resolve();var r=new nI(nP);t.forEach((function(e){return r=r.add(e)}));var a=IDBKeyRange.bound(eP(r.first()),eP(r.last())),o=r.getIterator(),s=o.getNext();return JN(e).Z({index:"documentKeyIndex",range:a},(function(e,t,r){for(var a=xT.fromSegments([].concat((0,i.Z)(t.prefixPath),[t.collectionGroup,t.documentId]));s&&nP(s,a)<0;)n(s,null),s=o.getNext();s&&s.isEqual(a)&&(n(s,t),s=o.hasNext()?o.getNext():null),s?r.j(eP(s)):r.done()})).next((function(){for(;s;)n(s,null),s=o.hasNext()?o.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),KR(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return JN(e).W(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=dC(),i=Wt(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.jn(xT.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(s){i.e(s)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=dC(),o=tP(t,n),s=tP(t,PT.max());return JN(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,s,!0)},(function(e,t,n){var o=i.jn(xT.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new $N(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return XN(e).get("remoteDocumentGlobalKey").next((function(e){return JS(!!e),e}))}},{key:"Qn",value:function(e,t){return XN(e).put("remoteDocumentGlobalKey",t)}},{key:"jn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=YC(e.re,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=xT.fromSegments(t.noDocument.path),i=QR(t.noDocument.readTime);n=qI.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return XS();var a=xT.fromSegments(t.unknownDocument.path),o=QR(t.unknownDocument.version);n=qI.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new mT(e[0],e[1]);return gT.fromTimestamp(t)}(t.readTime)),n}(this.It,t);if(!n.isNoDocument()||!n.version.isEqual(gT.min()))return n}return qI.newInvalidDocument(e)}}]),e}();function YN(e){return new QN(e)}var $N=function(e){Kt(n,e);var t=$t(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this)).Yn=e,i.trackRemovals=r,i.Xn=new hC((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return(0,Pe.Z)(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new nI((function(e,t){return pT(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var s=t.Xn.get(a);if(n.push(t.Yn.removeEntry(e,a,s.readTime)),o.isValidDocument()){var u=HR(t.Yn.It,o);i=i.add(a.path.popLast());var c=PN(u);r+=c-s.size,n.push(t.Yn.addEntry(e,a,u))}else if(r-=s.size,t.trackRemovals){var l=HR(t.Yn.It,o.convertToNoDocument(gT.min()));n.push(t.Yn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Yn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Yn.updateMetadata(e,r)),FT.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Yn.Wn(e,t).next((function(e){return n.Xn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Yn.Hn(e,t).next((function(e){var t=e.documents;return e.Jn.forEach((function(e,r){n.Xn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(GN);function XN(e){return ZR(e,"remoteDocumentGlobal")}function JN(e){return ZR(e,"remoteDocumentsV14")}function eP(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function tP(e,t){var n=t.documentKey.path.toArray();return[e,KR(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function nP(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=pT(n[a],r[a]))return i;return(i=pT(n.length,r.length))||((i=pT(n[n.length-2],r[r.length-2]))||pT(n[n.length-1],r[r.length-1]))}var rP=(0,Pe.Z)((function e(t,n){Ne(this,e),this.overlayedDocument=t,this.mutatedFields=n})),iP=function(){function e(t,n,r,i){Ne(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return(0,Pe.Z)(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.getBaseDocument(e,t,r)})).next((function(e){return null!==r&&YE(r.mutation,e,aI.empty(),mT.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,wC()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wC(),i=mC();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=vC();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=mC();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,wC())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=dC(),a=kC(),o=kC();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof eC)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),YE(o.mutation,t,o.mutation.getFieldMask(),mT.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new rP(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=kC(),i=new JT((function(e,t){return e-t})),a=wC();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=Wt(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||aI.empty();o=e.applyToLocalView(a,o),r.set(n,o);var s=(i.get(e.batchId)||wC()).add(n);i=i.insert(e.batchId,s)}}))};for(a.s();!(n=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}})).next((function(){for(var o=[],s=i.getReverseIterator(),u=function(){var i=s.getNext(),u=i.key,c=i.value,l=gC();c.forEach((function(e){if(!a.has(e)){var n=GE(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,u,l))};s.hasNext();)u();return FT.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return xT.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):mE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):FT.resolve(mC()),s=-1,u=a;return o.next((function(t){return FT.forEach(t,(function(t,n){return s<n.largestBatchId&&(s=n.largestBatchId),a.get(t)?FT.resolve():i.getBaseDocument(e,t,n).next((function(e){u=u.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,u,t,wC())})).next((function(e){return{batchId:s,changes:yC(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new xT(t)).next((function(e){var t=vC();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=vC();return this.indexManager.getCollectionParents(e,i).next((function(o){return FT.forEach(o,(function(o){var s=function(e,t){return new hE(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,qI.newInvalidDocument(n)))}));var n=vC();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&YE(a.mutation,i,aI.empty(),mT.now()),SE(t,i)&&(n=n.insert(r,i))})),n}))}},{key:"getBaseDocument",value:function(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):FT.resolve(qI.newInvalidDocument(t))}}]),e}(),aP=function(){function e(t){Ne(this,e),this.It=t,this.Zn=new Map,this.ts=new Map}return(0,Pe.Z)(e,[{key:"getBundleMetadata",value:function(e,t){return FT.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:ZC(n.createTime)}),FT.resolve()}},{key:"getNamedQuery",value:function(e,t){return FT.resolve(this.ts.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ts.set(t.name,function(e){return{name:e.name,query:JR(e.bundledQuery),readTime:ZC(e.readTime)}}(t)),FT.resolve()}}]),e}(),oP=function(){function e(){Ne(this,e),this.overlays=new JT(xT.comparator),this.es=new Map}return(0,Pe.Z)(e,[{key:"getOverlay",value:function(e,t){return FT.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=mC();return FT.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ue(e,t,i)})),FT.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.es.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.es.delete(n)),FT.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=mC(),i=t.length+1,a=new xT(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return FT.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new JT((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=mC(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=mC(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return FT.resolve(u)}},{key:"ue",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.es.get(r.largestBatchId).delete(n.key);this.es.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new BR(t,n));var a=this.es.get(t);void 0===a&&(a=wC(),this.es.set(t,a)),this.es.set(t,a.add(n.key))}}]),e}(),sP=function(){function e(){Ne(this,e),this.ns=new nI(uP.ss),this.rs=new nI(uP.os)}return(0,Pe.Z)(e,[{key:"isEmpty",value:function(){return this.ns.isEmpty()}},{key:"addReference",value:function(e,t){var n=new uP(e,t);this.ns=this.ns.add(n),this.rs=this.rs.add(n)}},{key:"us",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.cs(new uP(e,t))}},{key:"hs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"ls",value:function(e){var t=this,n=new xT(new bT([])),r=new uP(n,e),i=new uP(n,e+1),a=[];return this.rs.forEachInRange([r,i],(function(e){t.cs(e),a.push(e.key)})),a}},{key:"fs",value:function(){var e=this;this.ns.forEach((function(t){return e.cs(t)}))}},{key:"cs",value:function(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}},{key:"ds",value:function(e){var t=new xT(new bT([])),n=new uP(t,e),r=new uP(t,e+1),i=wC();return this.rs.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new uP(e,0),n=this.ns.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),uP=function(){function e(t,n){Ne(this,e),this.key=t,this._s=n}return(0,Pe.Z)(e,null,[{key:"ss",value:function(e,t){return xT.comparator(e.key,t.key)||pT(e._s,t._s)}},{key:"os",value:function(e,t){return pT(e._s,t._s)||xT.comparator(e.key,t.key)}}]),e}(),cP=function(){function e(t,n){Ne(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new nI(uP.ss)}return(0,Pe.Z)(e,[{key:"checkEmpty",value:function(e){return FT.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new VR(i,t,n,r);this.mutationQueue.push(a);var o,s=Wt(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.gs=this.gs.add(new uP(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return FT.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return FT.resolve(this.ys(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ps(n),i=r<0?0:r;return FT.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return FT.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return FT.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new uP(t,0),i=new uP(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],(function(e){var t=n.ys(e._s);a.push(t)})),FT.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new nI(pT);return t.forEach((function(e){var t=new uP(e,0),i=new uP(e,Number.POSITIVE_INFINITY);n.gs.forEachInRange([t,i],(function(e){r=r.add(e._s)}))})),FT.resolve(this.Is(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;xT.isDocumentKey(i)||(i=i.child(""));var a=new uP(new xT(i),0),o=new nI(pT);return this.gs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e._s)),!0)}),a),FT.resolve(this.Is(o))}},{key:"Is",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ys(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;JS(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();var r=this.gs;return FT.forEach(t.mutations,(function(i){var a=new uP(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.gs=r}))}},{key:"An",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new uP(t,0),r=this.gs.firstAfterOrEqual(n);return FT.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,FT.resolve()}},{key:"Ts",value:function(e,t){return this.ps(e)}},{key:"ps",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"ys",value:function(e){var t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),lP=function(){function e(t){Ne(this,e),this.Es=t,this.docs=new JT(xT.comparator),this.size=0}return(0,Pe.Z)(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Es(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return FT.resolve(n?n.document.mutableCopy():qI.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=dC();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():qI.newInvalidDocument(e))})),FT.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=dC(),i=new xT(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),s=o.key,u=o.value.document;if(!t.isPrefixOf(s.path))break;s.path.length>t.length+1||AT(NT(u),n)<=0||(r=r.insert(u.key,u.mutableCopy()))}return FT.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){XS()}},{key:"As",value:function(e,t){return FT.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new hP(this)}},{key:"getSize",value:function(e){return FT.resolve(this.size)}}]),e}(),hP=function(e){Kt(n,e);var t=$t(n);function n(e){var r;return Ne(this,n),(r=t.call(this)).Yn=e,r}return(0,Pe.Z)(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Yn.addEntry(e,i)):t.Yn.removeEntry(r)})),FT.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Yn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Yn.getEntries(e,t)}}]),n}(GN),fP=function(){function e(t){Ne(this,e),this.persistence=t,this.Rs=new hC((function(e){return WI(e)}),HI),this.lastRemoteSnapshotVersion=gT.min(),this.highestTargetId=0,this.bs=0,this.Ps=new sP,this.targetCount=0,this.vs=FN.Pn()}return(0,Pe.Z)(e,[{key:"forEachTarget",value:function(e,t){return this.Rs.forEach((function(e,n){return t(n)})),FT.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return FT.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return FT.resolve(this.bs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.vs.next(),FT.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.bs&&(this.bs=t),FT.resolve()}},{key:"Dn",value:function(e){this.Rs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.vs=new FN(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Dn(t),this.targetCount+=1,FT.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Dn(t),FT.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,FT.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Rs.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Rs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),FT.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return FT.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Rs.get(t)||null;return FT.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Ps.us(t,n),FT.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Ps.hs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),FT.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Ps.ls(t),FT.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Ps.ds(t);return FT.resolve(n)}},{key:"containsKey",value:function(e,t){return FT.resolve(this.Ps.containsKey(t))}}]),e}(),dP=function(){function e(t,n){var r=this;Ne(this,e),this.Vs={},this.overlays={},this.Ss=new QT(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new fP(this),this.indexManager=new kN,this.remoteDocumentCache=new lP((function(e){return r.referenceDelegate.xs(e)})),this.It=new WR(n),this.Ns=new aP(this.It)}return(0,Pe.Z)(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ds=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ds}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new oP,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Vs[e.toKey()];return n||(n=new cP(t,this.referenceDelegate),this.Vs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;GS("MemoryPersistence","Starting transaction:",e);var i=new pP(this.Ss.next());return this.referenceDelegate.ks(),n(i).next((function(e){return r.referenceDelegate.Os(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ms",value:function(e,t){return FT.or(Object.values(this.Vs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),pP=function(e){Kt(n,e);var t=$t(n);function n(e){var r;return Ne(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return(0,Pe.Z)(n)}(DT),vP=function(){function e(t){Ne(this,e),this.persistence=t,this.Fs=new sP,this.$s=null}return(0,Pe.Z)(e,[{key:"Ls",get:function(){if(this.$s)return this.$s;throw XS()}},{key:"addReference",value:function(e,t,n){return this.Fs.addReference(n,t),this.Ls.delete(n.toString()),FT.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Fs.removeReference(n,t),this.Ls.add(n.toString()),FT.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ls.add(t.toString()),FT.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Fs.ls(t.targetId).forEach((function(e){return n.Ls.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ls.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ks",value:function(){this.$s=new Set}},{key:"Os",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return FT.forEach(this.Ls,(function(r){var i=xT.fromPath(r);return t.Us(e,i).next((function(e){e||n.removeEntry(i,gT.min())}))})).next((function(){return t.$s=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Us(e,t).next((function(e){e?n.Ls.delete(t.toString()):n.Ls.add(t.toString())}))}},{key:"xs",value:function(e){return 0}},{key:"Us",value:function(e,t){var n=this;return FT.or([function(){return FT.resolve(n.Fs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ms(e,t)}])}}],[{key:"Bs",value:function(t){return new e(t)}}]),e}(),yP=function(){function e(t){Ne(this,e),this.It=t}return(0,Pe.Z)(e,[{key:"$",value:function(e,t,n,r){var i=this,a=new UT("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",yR,{unique:!0}),e.createObjectStore("documentMutations")}(e),mP(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=FT.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),mP(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:gT.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").W().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",yR,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return FT.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.qs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ks(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Gs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Qs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.js(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:PR});t.createIndex("collectionPathOverlayIndex",AR,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",OR,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:bR});t.createIndex("documentKeyIndex",_R),t.createIndex("collectionGroupIndex",wR)}(e)})).next((function(){return i.Ws(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.zs(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:ER}).createIndex("sequenceNumberIndex",CR,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:RR}).createIndex("documentKeyIndex",NR,{unique:!1})}(e)}))),o}},{key:"Ks",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=PN(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"qs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next((function(n){return FT.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",i).next((function(r){return FT.forEach(r,(function(r){JS(r.userId===n.userId);var i=YR(t.It,r);return NN(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Gs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new bT(n),o=function(e){return[0,fR(e)]}(a);r.push(t.get(o).next((function(n){return n?FT.resolve():function(n){return t.put({targetId:0,path:fR(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return FT.waitFor(r)}))}))}},{key:"Qs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:IR});var n=t.store("collectionParents"),r=new bN,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:fR(i)})}};return t.store("remoteDocuments").Z({X:!0},(function(e,t){var n=new bT(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({X:!0},(function(e,t){var n=(0,a.Z)(e,3),r=(n[0],n[1]),o=(n[2],vR(r));return i(o.popLast())}))}))}},{key:"js",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=$R(r),a=XR(t.It,i);return n.put(a)}))}},{key:"Ws",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new xT(bT.fromString(i.document.name).popFirst(5)):i.noDocument?xT.fromSegments(i.noDocument.path):i.unknownDocument?xT.fromSegments(i.unknownDocument.path):XS()).path.toArray(),s={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(s))})).next((function(){return FT.waitFor(r)}))}},{key:"zs",value:function(e,t){var n=this,r=t.store("mutations"),i=YN(this.It),a=new dP(vP.Bs,this.It.re);return r.W().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:wC();YR(n.It,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),FT.forEach(r,(function(e,r){var o=new zS(r),s=oN.oe(n.It,o),u=a.getIndexManager(o),c=AN.oe(o,n.It,u,a.referenceDelegate);return new iP(i,c,s,u).recalculateAndSaveOverlaysForDocumentKeys(new jR(t,QT.at),e).next()}))}))}}]),e}();function mP(e){e.createObjectStore("targetDocuments",{keyPath:SR}).createIndex("documentTargetsIndex",TR,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",xR,{unique:!0}),e.createObjectStore("targetGlobal")}var gP="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",kP=function(){function e(t,n,r,i,a,o,s,u,c,l){var h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(Ne(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Hs=a,this.window=o,this.document=s,this.Js=c,this.Ys=l,this.Xs=h,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=function(e){return Promise.resolve()},!e.C())throw new nT(tT.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new HN(this,i),this.ii=n+"main",this.It=new WR(u),this.ri=new jT(this.ii,this.Xs,new yP(this.It)),this.Cs=new UN(this.referenceDelegate,this.It),this.remoteDocumentCache=YN(this.It),this.Ns=new rN,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===l&&QS("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return(0,Pe.Z)(e,[{key:"start",value:function(){var e=this;return this.ui().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new nT(tT.FAILED_PRECONDITION,gP);return e.ci(),e.ai(),e.hi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Cs.getHighestSequenceNumber(t)}))})).then((function(t){e.Ss=new QT(t,e.Js)})).then((function(){e.Ds=!0})).catch((function(t){return e.ri&&e.ri.close(),Promise.reject(t)}))}},{key:"li",value:function(e){var t=this;return this.si=function(){var n=$(Q().mark((function n(r){return Q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ri.L(function(){var t=$(Q().mark((function t(n){return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget($(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ui();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ui",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return _P(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.fi(t).next((function(t){t||(e.isPrimary=!1,e.Hs.enqueueRetryable((function(){return e.si(!1)})))}))})).next((function(){return e.di(t)})).next((function(n){return e.isPrimary&&!n?e._i(t).next((function(){return!1})):!!n&&e.wi(t).next((function(){return!0}))}))})).catch((function(t){if(qT(t))return GS("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return GS("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Hs.enqueueRetryable((function(){return e.si(t)})),e.isPrimary=t}))}},{key:"fi",value:function(e){var t=this;return bP(e).get("owner").next((function(e){return FT.resolve(t.mi(e))}))}},{key:"gi",value:function(e){return _P(e).delete(this.clientId)}},{key:"yi",value:function(){var e=$(Q().mark((function e(){var t,n,r,i,a=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.pi(this.ni,18e5)){e.next=6;break}return this.ni=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=ZR(e,"clientMetadata");return t.W().next((function(e){var n=a.Ii(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return FT.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.oi){n=Wt(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.oi.removeItem(this.Ti(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"hi",value:function(){var e=this;this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ui().then((function(){return e.yi()})).then((function(){return e.hi()}))}))}},{key:"mi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"di",value:function(e){var t=this;return this.Ys?FT.resolve(!0):bP(e).get("owner").next((function(n){if(null!==n&&t.pi(n.leaseTimestampMs,5e3)&&!t.Ei(n.ownerId)){if(t.mi(n)&&t.networkEnabled)return!0;if(!t.mi(n)){if(!n.allowTabSynchronization)throw new nT(tT.FAILED_PRECONDITION,gP);return!1}}return!(!t.networkEnabled||!t.inForeground)||_P(e).W().next((function(e){return void 0===t.Ii(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&GS("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=$(Q().mark((function e(){var t=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ds=!1,this.Ai(),this.ei&&(this.ei.cancel(),this.ei=null),this.Ri(),this.bi(),e.next=7,this.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new jR(e,QT.at);return t._i(n).next((function(){return t.gi(n)}))}));case 7:this.ri.close(),this.Pi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ii",value:function(e,t){var n=this;return e.filter((function(e){return n.pi(e.updateTimeMs,t)&&!n.Ei(e.clientId)}))}},{key:"vi",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return _P(t).W().next((function(t){return e.Ii(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Ds}},{key:"getMutationQueue",value:function(e,t){return AN.oe(e,this.It,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new wN(e,this.It.re.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return oN.oe(this.It,e)}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;GS("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",s=15===(i=this.Xs)?UR:14===i?FR:13===i?MR:12===i?LR:11===i?DR:void XS();return this.ri.runTransaction(e,o,s,(function(i){return a=new jR(i,r.Ss?r.Ss.next():QT.at),"readwrite-primary"===t?r.fi(a).next((function(e){return!!e||r.di(a)})).next((function(t){if(!t)throw QS("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Hs.enqueueRetryable((function(){return r.si(!1)})),new nT(tT.FAILED_PRECONDITION,OT);return n(a)})).next((function(e){return r.wi(a).next((function(){return e}))})):r.Vi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Vi",value:function(e){var t=this;return bP(e).get("owner").next((function(e){if(null!==e&&t.pi(e.leaseTimestampMs,5e3)&&!t.Ei(e.ownerId)&&!t.mi(e)&&!(t.Ys||t.allowTabSynchronization&&e.allowTabSynchronization))throw new nT(tT.FAILED_PRECONDITION,gP)}))}},{key:"wi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return bP(e).put("owner",t)}},{key:"_i",value:function(e){var t=this,n=bP(e);return n.get("owner").next((function(e){return t.mi(e)?(GS("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):FT.resolve()}))}},{key:"pi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(QS("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ci",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=function(){e.Hs.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ui()}))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ri",value:function(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}},{key:"ai",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=function(){t.Ai(),!pn()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Hs.enterRestrictedMode(!0),t.Hs.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Zs))}},{key:"bi",value:function(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}},{key:"Ei",value:function(e){var t;try{var n=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return GS("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return QS("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ai",value:function(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(Jb){QS("Failed to set zombie client id.",Jb)}}},{key:"Pi",value:function(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(Jb){}}},{key:"Ti",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"C",value:function(){return jT.C()}}]),e}();function bP(e){return ZR(e,"owner")}function _P(e){return ZR(e,"clientMetadata")}function wP(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var xP=function(){function e(t,n,r,i){Ne(this,e),this.targetId=t,this.fromCache=n,this.Si=r,this.Di=i}return(0,Pe.Z)(e,null,[{key:"Ci",value:function(t,n){var r,i=wC(),a=wC(),o=Wt(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),SP=function(){function e(){Ne(this,e),this.xi=!1}return(0,Pe.Z)(e,[{key:"initialize",value:function(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.ki(e,t).next((function(a){return a||i.Oi(e,t,r,n)})).next((function(n){return n||i.Mi(e,t)}))}},{key:"ki",value:function(e,t){var n=this;if(pE(t))return FT.resolve(null);var r=kE(t);return this.indexManager.getIndexType(e,r).next((function(a){return 0===a?null:(null!==t.limit&&1===a&&(t=bE(t,null,"F"),r=kE(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(a){var o=wC.apply(void 0,(0,i.Z)(a));return n.Ni.getDocuments(e,o).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var a=n.Fi(t,i);return n.$i(t,a,o,r.readTime)?n.ki(e,bE(t,null,"F")):n.Bi(e,a,t,r)}))}))})))}))}},{key:"Oi",value:function(e,t,n,r){var i=this;return pE(t)||r.isEqual(gT.min())?this.Mi(e,t):this.Ni.getDocuments(e,n).next((function(a){var o=i.Fi(t,a);return i.$i(t,o,n,r)?i.Mi(e,t):(KS()<=tr.DEBUG&&GS("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),xE(t)),i.Bi(e,o,t,RT(r,-1)))}))}},{key:"Fi",value:function(e,t){var n=new nI(IE(e));return t.forEach((function(t,r){SE(e,r)&&(n=n.add(r))})),n}},{key:"$i",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Mi",value:function(e,t){return KS()<=tr.DEBUG&&GS("QueryEngine","Using full collection scan to execute query:",xE(t)),this.Ni.getDocumentsMatchingQuery(e,t,PT.min())}},{key:"Bi",value:function(e,t,n,r){return this.Ni.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),TP=function(){function e(t,n,r,i){Ne(this,e),this.persistence=t,this.Li=n,this.It=i,this.Ui=new JT(pT),this.qi=new hC((function(e){return WI(e)}),HI),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(r)}return(0,Pe.Z)(e,[{key:"Qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iP(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ui)}))}}]),e}();function IP(e,t,n,r){return new TP(e,t,n,r)}function EP(e,t){return CP.apply(this,arguments)}function CP(){return CP=$(Q().mark((function e(t,n){var r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eT(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=wC(),u=Wt(t);try{for(u.s();!(i=u.n()).done;){var c=i.value;a.push(c.batchId);var l,h=Wt(c.mutations);try{for(h.s();!(l=h.n()).done;){var f=l.value;s=s.add(f.key)}}catch(k){h.e(k)}finally{h.f()}}}catch(k){u.e(k)}finally{u.f()}var d,p=Wt(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=Wt(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;s=s.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,s).next((function(e){return{ji:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),CP.apply(this,arguments)}function RP(e,t){var n=eT(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=FT.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);JS(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=wC(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function NP(e){var t=eT(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Cs.getLastRemoteSnapshotVersion(e)}))}function PP(e,t){var n=eT(e),r=t.snapshotVersion,i=n.Ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Gi.newChangeBuffer({trackRemovals:!0});i=n.Ui;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.Cs.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.Cs.addMatchingKeys(e,a.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(s)?c=c.withResumeToken(oI.EMPTY_BYTE_STRING,gT.min()).withLastLimboFreeSnapshotVersion(gT.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,a)&&o.push(n.Cs.updateTargetData(e,c))}}));var s=dC(),u=wC();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(AP(e,a,t.documentUpdates).next((function(e){s=e.Wi,u=e.zi}))),!r.isEqual(gT.min())){var c=n.Cs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Cs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return FT.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,s,u)})).next((function(){return s}))})).then((function(e){return n.Ui=i,e}))}function AP(e,t,n){var r=wC(),i=wC();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=dC();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(gT.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):GS("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Wi:r,zi:i}}))}function OP(e,t){var n=eT(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function DP(e,t){var n=eT(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Cs.getTargetData(e,t).next((function(i){return i?(r=i,FT.resolve(r)):n.Cs.allocateTargetId(e).next((function(i){return r=new zR(t,i,0,e.currentSequenceNumber),n.Cs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ui.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ui=n.Ui.insert(e.targetId,e),n.qi.set(t,e.targetId)),e}))}function LP(e,t,n){return MP.apply(this,arguments)}function MP(){return MP=$(Q().mark((function e(t,n,r){var i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=eT(t),a=i.Ui.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),qT(e.t1)){e.next=12;break}throw e.t1;case 12:GS("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ui=i.Ui.remove(n),i.qi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),MP.apply(this,arguments)}function FP(e,t,n){var r=eT(e),i=gT.min(),a=wC();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=eT(e),i=r.qi.get(n);return void 0!==i?FT.resolve(r.Ui.get(i)):r.Cs.getTargetData(t,n)}(r,e,kE(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Li.getDocumentsMatchingQuery(e,t,n?i:gT.min(),n?a:wC())})).next((function(e){return ZP(r,TE(t),e),{documents:e,Hi:a}}))}))}function UP(e,t){var n=eT(e),r=eT(n.Cs),i=n.Ui.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.se(e,t).next((function(e){return e?e.target:null}))}))}function jP(e,t){var n=eT(e),r=n.Ki.get(t)||gT.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Gi.getAllFromCollectionGroup(e,t,RT(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return ZP(n,t,e),e}))}function ZP(e,t,n){var r=e.Ki.get(t)||gT.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ki.set(t,r)}function VP(e,t,n,r){return qP.apply(this,arguments)}function qP(){return qP=$(Q().mark((function e(t,n,r,i){var a,o,s,u,c,l,h,f,d,p;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=eT(t),o=wC(),s=dC(),u=Wt(r);try{for(u.s();!(c=u.n()).done;)l=c.value,h=n.Ji(l.metadata.name),l.document&&(o=o.add(h)),(f=n.Yi(l)).setReadTime(n.Xi(l.metadata.readTime)),s=s.insert(h,f)}catch(v){u.e(v)}finally{u.f()}return d=a.Gi.newChangeBuffer({trackRemovals:!0}),e.next=7,DP(a,function(e){return kE(dE(bT.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return AP(e,d,s).next((function(t){return d.apply(e),t})).next((function(t){return a.Cs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Cs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Wi,t.zi)})).next((function(){return t.Wi}))}))})));case 9:case"end":return e.stop()}}),e)}))),qP.apply(this,arguments)}function BP(e,t){return zP.apply(this,arguments)}function zP(){return zP=$(Q().mark((function e(t,n){var r,i,a,o=arguments;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:wC(),e.next=3,DP(t,kE(JR(n.bundledQuery)));case 3:return i=e.sent,a=eT(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=ZC(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ns.saveNamedQuery(e,n);var o=i.withResumeToken(oI.EMPTY_BYTE_STRING,t);return a.Ui=a.Ui.insert(o.targetId,o),a.Cs.updateTargetData(e,o).next((function(){return a.Cs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Cs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ns.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),zP.apply(this,arguments)}function WP(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function HP(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function KP(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var GP=function(){function e(t,n,r,i){Ne(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return(0,Pe.Z)(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new nT(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(QS("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),QP=function(){function e(t,n,r){Ne(this,e),this.targetId=t,this.state=n,this.error=r}return(0,Pe.Z)(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new nT(i.error.code,i.error.message))),a?new e(t,i.state,r):(QS("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),YP=function(){function e(t,n){Ne(this,e),this.clientId=t,this.activeTargetIds=n}return(0,Pe.Z)(e,null,[{key:"Zi",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=SC(),o=0;i&&o<r.activeTargetIds.length;++o)i=gI(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(QS("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),$P=function(){function e(t,n){Ne(this,e),this.clientId=t,this.onlineState=n}return(0,Pe.Z)(e,null,[{key:"Zi",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(QS("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),XP=function(){function e(){Ne(this,e),this.activeTargetIds=SC()}return(0,Pe.Z)(e,[{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"tr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),JP=function(){function e(t,n,r,i,a){Ne(this,e),this.window=t,this.Hs=n,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new JT(pT),this.started=!1,this.cr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=WP(this.persistenceKey,this.sr),this.hr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ur=this.ur.insert(this.sr,new XP),this.lr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.dr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this._r=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.wr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.mr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}return(0,Pe.Z)(e,[{key:"start",value:function(){var e=$(Q().mark((function e(){var t,n,r,i,a,o,s,u,c,l,h,f=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.vi();case 2:t=e.sent,n=Wt(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.sr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(WP(this.persistenceKey,i)))&&(o=YP.Zi(i,a))&&(this.ur=this.ur.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.gr(),(s=this.storage.getItem(this.wr))&&(u=this.yr(s))&&this.pr(u),c=Wt(this.cr);try{for(c.s();!(l=c.n()).done;)h=l.value,this.rr(h)}catch(d){c.e(d)}finally{c.f()}this.cr=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.hr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Ir(this.ur)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ur.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Tr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Tr(e,t,n),this.Er(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(KP(this.persistenceKey,e));if(n){var r=QP.Zi(e,n);r&&(t=r.state)}}return this.Ar.er(e),this.gr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ar.nr(e),this.gr()}},{key:"isLocalQueryTarget",value:function(e){return this.Ar.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(KP(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Rr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Er(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.br(e)}},{key:"notifyBundleLoaded",value:function(e){this.Pr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return GS("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){GS("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){GS("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"rr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(GS("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ar)return void QS("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable($(Q().mark((function e(){var r,i,a,o,s,u,c;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.lr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.vr(n.key),e.abrupt("return",t.Vr(r,null));case 6:if(!(i=t.Sr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Vr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.dr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Dr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Cr(a));case 16:e.next=41;break;case 18:if(!t._r.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Nr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.kr(o));case 23:e.next=41;break;case 25:if(n.key!==t.wr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.yr(n.newValue))){e.next=30;break}return e.abrupt("return",t.pr(s));case 30:e.next=41;break;case 32:if(n.key!==t.hr){e.next=37;break}u=function(e){var t=QT.at;if(null!=e)try{var n=JSON.parse(e);JS("number"==typeof n),t=n}catch(e){QS("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),u!==QT.at&&t.sequenceNumberHandler(u),e.next=41;break;case 37:if(n.key!==t.mr){e.next=41;break}return c=t.Or(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Mr(e)})));case 41:e.next=44;break;case 43:t.cr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ar",get:function(){return this.ur.get(this.sr)}},{key:"gr",value:function(){this.setItem(this.ar,this.Ar.tr())}},{key:"Tr",value:function(e,t,n){var r=new GP(this.currentUser,e,t,n),i=HP(this.persistenceKey,this.currentUser,e);this.setItem(i,r.tr())}},{key:"Er",value:function(e){var t=HP(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"br",value:function(e){var t={clientId:this.sr,onlineState:e};this.storage.setItem(this.wr,JSON.stringify(t))}},{key:"Rr",value:function(e,t,n){var r=KP(this.persistenceKey,e),i=new QP(e,t,n);this.setItem(r,i.tr())}},{key:"Pr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}},{key:"vr",value:function(e){var t=this.lr.exec(e);return t?t[1]:null}},{key:"Sr",value:function(e,t){var n=this.vr(e);return YP.Zi(n,t)}},{key:"Dr",value:function(e,t){var n=this.dr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return GP.Zi(new zS(i),r,t)}},{key:"Nr",value:function(e,t){var n=this._r.exec(e),r=Number(n[1]);return QP.Zi(r,t)}},{key:"yr",value:function(e){return $P.Zi(e)}},{key:"Or",value:function(e){return JSON.parse(e)}},{key:"Cr",value:function(){var e=$(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Fr(t.batchId,t.state,t.error));case 2:GS("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"kr",value:function(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}},{key:"Vr",value:function(e,t){var n=this,r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),o=[],s=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||s.push(e)})),this.syncEngine.Br(o,s).then((function(){n.ur=r}))}},{key:"pr",value:function(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Ir",value:function(e){var t=SC();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"C",value:function(e){return!(!e||!e.localStorage)}}]),e}(),eA=function(){function e(){Ne(this,e),this.Lr=new XP,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return(0,Pe.Z)(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Lr.er(e),this.Ur[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Ur[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Lr.nr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Ur[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Lr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Lr=new XP,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),tA=function(){function e(){Ne(this,e)}return(0,Pe.Z)(e,[{key:"qr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),nA=function(){function e(){var t=this;Ne(this,e),this.Kr=function(){return t.Gr()},this.Qr=function(){return t.jr()},this.Wr=[],this.zr()}return(0,Pe.Z)(e,[{key:"qr",value:function(e){this.Wr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}},{key:"zr",value:function(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}},{key:"Gr",value:function(){GS("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=Wt(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"jr",value:function(){GS("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=Wt(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),rA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},iA=function(){function e(t){Ne(this,e),this.Hr=t.Hr,this.Jr=t.Jr}return(0,Pe.Z)(e,[{key:"Yr",value:function(e){this.Xr=e}},{key:"Zr",value:function(e){this.eo=e}},{key:"onMessage",value:function(e){this.no=e}},{key:"close",value:function(){this.Jr()}},{key:"send",value:function(e){this.Hr(e)}},{key:"so",value:function(){this.Xr()}},{key:"io",value:function(e){this.eo(e)}},{key:"ro",value:function(e){this.no(e)}}]),e}(),aA=function(e){Kt(n,e);var t=$t(n);function n(e){var r;return Ne(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return(0,Pe.Z)(n,[{key:"fo",value:function(e,t,n,r){return new Promise((function(i,a){var o=new qS;o.setWithCredentials(!0),o.listenOnce(FS.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case MS.NO_ERROR:var t=o.getResponseJson();GS("Connection","XHR received:",JSON.stringify(t)),i(t);break;case MS.TIMEOUT:GS("Connection",'RPC "'+e+'" timed out'),a(new nT(tT.DEADLINE_EXCEEDED,"Request time out"));break;case MS.HTTP_ERROR:var n=o.getStatus();if(GS("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(tT).indexOf(t)>=0?t:tT.UNKNOWN}(r.status);a(new nT(s,r.message))}else a(new nT(tT.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new nT(tT.UNAVAILABLE,"Connection failed."));break;default:XS()}}finally{GS("Connection",'RPC "'+e+'" completed.')}}));var s=JSON.stringify(r);o.send(t,"POST",s,n,15)}))}},{key:"wo",value:function(e,t,n){var r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=DS(),a=LS(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new ZS({})),this.lo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;var s=r.join("");GS("Connection","Creating WebChannel: "+s,o);var u=i.createWebChannel(s,o),c=!1,l=!1,h=new iA({Hr:function(e){l?GS("Connection","Not sending because WebChannel is closed:",e):(c||(GS("Connection","Opening WebChannel transport."),u.open(),c=!0),GS("Connection","WebChannel sending:",e),u.send(e))},Jr:function(){return u.close()}}),f=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return f(u,VS.EventType.OPEN,(function(){l||GS("Connection","WebChannel transport opened.")})),f(u,VS.EventType.CLOSE,(function(){l||(l=!0,GS("Connection","WebChannel transport closed"),h.io())})),f(u,VS.EventType.ERROR,(function(e){l||(l=!0,YS("Connection","WebChannel transport errored:",e),h.io(new nT(tT.UNAVAILABLE,"The operation could not be completed")))})),f(u,VS.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];JS(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){GS("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=iC[e];if(void 0!==t)return lC(t)}(a),s=i.message;void 0===o&&(o=tT.INTERNAL,s="Unknown error status: "+a+" with message "+i.message),l=!0,h.io(new nT(o,s)),u.close()}else GS("Connection","WebChannel received:",n),h.ro(n)}})),f(a,US.STAT_EVENT,(function(e){e.stat===jS.PROXY?GS("Connection","Detected buffering proxy"):e.stat===jS.NOPROXY&&GS("Connection","Detected no buffering proxy")})),setTimeout((function(){h.so()}),0),h}}]),n}(function(){function e(t){Ne(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.oo=n+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return(0,Pe.Z)(e,[{key:"co",get:function(){return!1}},{key:"ao",value:function(e,t,n,r,i){var a=this.ho(e,t);GS("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(e,a,o,n).then((function(e){return GS("RestConnection","Received: ",e),e}),(function(t){throw YS("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"_o",value:function(e,t,n,r,i,a){return this.ao(e,t,n,r,i)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+WS,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ho",value:function(e,t){var n=rA[e];return"".concat(this.oo,"/v1/").concat(t,":").concat(n)}}]),e}());function oA(){return"undefined"!=typeof window?window:null}function sA(){return"undefined"!=typeof document?document:null}function uA(e){return new MC(e,!0)}var cA=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;Ne(this,e),this.Hs=t,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return(0,Pe.Z)(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&GS("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,(function(){return t.Eo=Date.now(),e()})),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),lA=function(){function e(t,n,r,i,a,o,s,u){Ne(this,e),this.Hs=t,this.vo=r,this.Vo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new cA(t,n)}return(0,Pe.Z)(e,[{key:"No",value:function(){return 1===this.state||5===this.state||this.ko()}},{key:"ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=$(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.No(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Mo",value:function(){this.state=0,this.xo.reset()}},{key:"Fo",value:function(){var e=this;this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,(function(){return e.$o()})))}},{key:"Bo",value:function(e){this.Lo(),this.stream.send(e)}},{key:"$o",value:function(){var e=$(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"Uo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"close",value:function(){var e=$(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Lo(),this.Uo(),this.xo.cancel(),this.So++,4!==t?this.xo.reset():n&&n.code===tT.RESOURCE_EXHAUSTED?(QS(n.toString()),QS("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):n&&n.code===tT.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.qo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Zr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"qo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=(0,a.Z)(t,2),i=r[0],o=r[1];e.So===n&&e.Go(i,o)}),(function(n){t((function(){var t=new nT(tT.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Qo(t)}))}))}},{key:"Go",value:function(e,t){var n=this,r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr((function(){r((function(){return n.state=2,n.Co=n.Hs.enqueueAfterDelay(n.Vo,1e4,(function(){return n.ko()&&(n.state=3),Promise.resolve()})),n.listener.Yr()}))})),this.stream.Zr((function(e){r((function(){return n.Qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Oo",value:function(){var e=this;this.state=5,this.xo.Ro($(Q().mark((function t(){return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Qo",value:function(e){return GS("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Ko",value:function(e){var t=this;return function(n){t.Hs.enqueueAndForget((function(){return t.So===e?n():(GS("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),hA=function(e){Kt(n,e);var t=$t(n);function n(e,r,i,a,o,s){var u;return Ne(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).It=o,u}return(0,Pe.Z)(n,[{key:"jo",value:function(e,t){return this.connection.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.xo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:XS()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.gt?(JS(void 0===t||"string"==typeof t),oI.fromBase64String(t||"")):(JS(void 0===t||t instanceof Uint8Array),oI.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?tT.UNKNOWN:lC(e.code);return new nT(t,e.message||"")}(o);n=new RC(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=zC(e,u.document.name),l=ZC(u.document.updateTime),h=new ZI({mapValue:{fields:u.document.fields}}),f=qI.newFoundDocument(c,l,h),d=u.targetIds||[],p=u.removedTargetIds||[];n=new EC(d,p,f.key,f)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=zC(e,v.document),m=v.readTime?ZC(v.readTime):gT.min(),g=qI.newNoDocument(y,m),k=v.removedTargetIds||[];n=new EC([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var _=zC(e,b.document),w=b.removedTargetIds||[];n=new EC([],w,_,null)}else{if(!("filter"in t))return XS();t.filter;var x=t.filter;x.targetId;var S=x.count||0,T=new uC(S),I=x.targetId;n=new CC(I,T)}return n}(this.It,e),n=function(e){if(!("targetChange"in e))return gT.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?gT.min():t.readTime?ZC(t.readTime):gT.min()}(e);return this.listener.Wo(t,n)}},{key:"zo",value:function(e){var t={};t.database=KC(this.It),t.addTarget=function(e,t){var n,r=t.target;return(n=KI(r)?{documents:eR(e,r)}:{query:tR(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=UC(e,t.resumeToken):t.snapshotVersion.compareTo(gT.min())>0&&(n.readTime=FC(e,t.snapshotVersion.toTimestamp())),n}(this.It,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return XS()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.It,e);n&&(t.labels=n),this.Bo(t)}},{key:"Ho",value:function(e){var t={};t.database=KC(this.It),t.removeTarget=e,this.Bo(t)}}]),n}(lA),fA=function(e){Kt(n,e);var t=$t(n);function n(e,r,i,a,o,s){var u;return Ne(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).It=o,u.Jo=!1,u}return(0,Pe.Z)(n,[{key:"Yo",get:function(){return this.Jo}},{key:"start",value:function(){this.Jo=!1,this.lastStreamToken=void 0,Ei(Gt(n.prototype),"start",this).call(this)}},{key:"qo",value:function(){this.Jo&&this.Xo([])}},{key:"jo",value:function(e,t){return this.connection.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(JS(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();var t=function(e,t){return e&&e.length>0?(JS(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?ZC(e.updateTime):ZC(t);return n.isEqual(gT.min())&&(n=ZC(t)),new zE(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=ZC(e.commitTime);return this.listener.Zo(n,t)}return JS(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}},{key:"eu",value:function(){var e={};e.database=KC(this.It),this.Bo(e)}},{key:"Xo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return XC(t.It,e)}))};this.Bo(n)}}]),n}(lA),dA=function(e){Kt(n,e);var t=$t(n);function n(e,r,i,a){var o;return Ne(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.It=a,o.nu=!1,o}return(0,Pe.Z)(n,[{key:"su",value:function(){if(this.nu)throw new nT(tT.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ao",value:function(e,t,n){var r=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var o=(0,a.Z)(i,2),s=o[0],u=o[1];return r.connection.ao(e,t,n,s,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===tT.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new nT(tT.UNKNOWN,e.toString())}))}},{key:"_o",value:function(e,t,n,r){var i=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(o){var s=(0,a.Z)(o,2),u=s[0],c=s[1];return i.connection._o(e,t,n,u,c,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===tT.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new nT(tT.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.nu=!0}}]),n}(function(){return(0,Pe.Z)((function e(){Ne(this,e)}))}());var pA=function(){function e(t,n){Ne(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}return(0,Pe.Z)(e,[{key:"uu",value:function(){var e=this;0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ru=null,e.au("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()})))}},{key:"hu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"au",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ou?(QS(t),this.ou=!1):GS("OnlineStateTracker",t)}},{key:"lu",value:function(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}]),e}(),vA=(0,Pe.Z)((function e(t,n,r,i,a){var o=this;Ne(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.qr((function(e){r.enqueueAndForget($(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=IA(o),!e.t0){e.next=5;break}return GS("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=$(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=eT(t))._u.add(4),e.next=4,gA(n);case 4:return n.gu.set("Unknown"),n._u.delete(4),e.next=8,yA(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.gu=new pA(r,i)}));function yA(e){return mA.apply(this,arguments)}function mA(){return mA=$(Q().mark((function e(t){var n,r,i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!IA(t)){e.next=18;break}n=Wt(t.wu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),mA.apply(this,arguments)}function gA(e){return kA.apply(this,arguments)}function kA(){return kA=$(Q().mark((function e(t){var n,r,i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Wt(t.wu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),kA.apply(this,arguments)}function bA(e,t){var n=eT(e);n.du.has(t.targetId)||(n.du.set(t.targetId,t),TA(n)?SA(n):tO(n).ko()&&wA(n,t))}function _A(e,t){var n=eT(e),r=tO(n);n.du.delete(t),r.ko()&&xA(n,t),0===n.du.size&&(r.ko()?r.Fo():IA(n)&&n.gu.set("Unknown"))}function wA(e,t){e.yu.Mt(t.targetId),tO(e).zo(t)}function xA(e,t){e.yu.Mt(t),tO(e).Ho(t)}function SA(e){e.yu=new PC({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},se:function(t){return e.du.get(t)||null}}),tO(e).start(),e.gu.uu()}function TA(e){return IA(e)&&!tO(e).No()&&e.du.size>0}function IA(e){return 0===eT(e)._u.size}function EA(e){e.yu=void 0}function CA(e){return RA.apply(this,arguments)}function RA(){return RA=$(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.du.forEach((function(e,n){wA(t,e)}));case 1:case"end":return e.stop()}}),e)}))),RA.apply(this,arguments)}function NA(e,t){return PA.apply(this,arguments)}function PA(){return PA=$(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:EA(t),TA(t)?(t.gu.hu(n),SA(t)):t.gu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),PA.apply(this,arguments)}function AA(e,t,n){return OA.apply(this,arguments)}function OA(){return OA=$(Q().mark((function e(t,n,r){var i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.gu.set("Online"),!(n instanceof RC&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=$(Q().mark((function e(t,n){var r,i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=Wt(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.du.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.du.delete(o),t.yu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),GS("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,DA(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof EC?t.yu.Gt(n):n instanceof CC?t.yu.Yt(n):t.yu.Wt(n),r.isEqual(gT.min())){e.next=29;break}return e.prev=14,e.next=17,NP(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.yu.te(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.du.get(r);i&&e.du.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.du.get(t);if(n){e.du.set(t,n.withResumeToken(oI.EMPTY_BYTE_STRING,n.snapshotVersion)),xA(e,t);var r=new zR(n.target,t,1,n.sequenceNumber);wA(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),GS("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,DA(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),OA.apply(this,arguments)}function DA(e,t,n){return LA.apply(this,arguments)}function LA(){return LA=$(Q().mark((function e(t,n,r){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(qT(n)){e.next=2;break}throw n;case 2:return t._u.add(1),e.next=5,gA(t);case 5:t.gu.set("Offline"),r||(r=function(){return NP(t.localStore)}),t.asyncQueue.enqueueRetryable($(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return GS("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t._u.delete(1),e.next=6,yA(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),LA.apply(this,arguments)}function MA(e,t){return t().catch((function(n){return DA(e,n,t)}))}function FA(e){return UA.apply(this,arguments)}function UA(){return UA=$(Q().mark((function e(t){var n,r,i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=eT(t),r=nO(n),i=n.fu.length>0?n.fu[n.fu.length-1].batchId:-1;case 2:if(!jA(n)){e.next=19;break}return e.prev=3,e.next=6,OP(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.fu.length&&r.Fo(),e.abrupt("break",19);case 10:i=a.batchId,ZA(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,DA(n,e.t0);case 17:e.next=2;break;case 19:VA(n)&&qA(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),UA.apply(this,arguments)}function jA(e){return IA(e)&&e.fu.length<10}function ZA(e,t){e.fu.push(t);var n=nO(e);n.ko()&&n.Yo&&n.Xo(t.mutations)}function VA(e){return IA(e)&&!nO(e).No()&&e.fu.length>0}function qA(e){nO(e).start()}function BA(e){return zA.apply(this,arguments)}function zA(){return zA=$(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:nO(t).eu();case 1:case"end":return e.stop()}}),e)}))),zA.apply(this,arguments)}function WA(e){return HA.apply(this,arguments)}function HA(){return HA=$(Q().mark((function e(t){var n,r,i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=nO(t),r=Wt(t.fu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Xo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),HA.apply(this,arguments)}function KA(e,t,n){return GA.apply(this,arguments)}function GA(){return GA=$(Q().mark((function e(t,n,r){var i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.fu.shift(),a=qR.from(i,n,r),e.next=3,MA(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,FA(t);case 5:case"end":return e.stop()}}),e)}))),GA.apply(this,arguments)}function QA(e,t){return YA.apply(this,arguments)}function YA(){return YA=$(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&nO(t).Yo,!e.t0){e.next=4;break}return e.next=4,function(){var e=$(Q().mark((function e(t,n){var r,i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!cC(i=n.code)||i===tT.ABORTED){e.next=7;break}return r=t.fu.shift(),nO(t).Mo(),e.next=5,MA(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,FA(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:VA(t)&&qA(t);case 5:case"end":return e.stop()}}),e)}))),YA.apply(this,arguments)}function $A(e,t){return XA.apply(this,arguments)}function XA(){return XA=$(Q().mark((function e(t,n){var r,i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=eT(t)).asyncQueue.verifyOperationInProgress(),GS("RemoteStore","RemoteStore received new credentials"),i=IA(r),r._u.add(3),e.next=6,gA(r);case 6:return i&&r.gu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r._u.delete(3),e.next=12,yA(r);case 12:case"end":return e.stop()}}),e)}))),XA.apply(this,arguments)}function JA(e,t){return eO.apply(this,arguments)}function eO(){return eO=$(Q().mark((function e(t,n){var r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=eT(t),!n){e.next=7;break}return r._u.delete(2),e.next=5,yA(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r._u.add(2),e.next=12,gA(r);case 12:r.gu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),eO.apply(this,arguments)}function tO(e){return e.pu||(e.pu=function(e,t,n){var r=eT(e);return r.su(),new hA(t,r.connection,r.authCredentials,r.appCheckCredentials,r.It,n)}(e.datastore,e.asyncQueue,{Yr:CA.bind(null,e),Zr:NA.bind(null,e),Wo:AA.bind(null,e)}),e.wu.push(function(){var t=$(Q().mark((function t(n){return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.pu.Mo(),TA(e)?SA(e):e.gu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.pu.stop();case 6:EA(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.pu}function nO(e){return e.Iu||(e.Iu=function(e,t,n){var r=eT(e);return r.su(),new fA(t,r.connection,r.authCredentials,r.appCheckCredentials,r.It,n)}(e.datastore,e.asyncQueue,{Yr:BA.bind(null,e),Zr:QA.bind(null,e),tu:WA.bind(null,e),Zo:KA.bind(null,e)}),e.wu.push(function(){var t=$(Q().mark((function t(n){return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Iu.Mo(),t.next=4,FA(e);case 4:t.next=9;break;case 6:return t.next=8,e.Iu.stop();case 8:e.fu.length>0&&(GS("RemoteStore","Stopping write stream with ".concat(e.fu.length," pending writes")),e.fu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Iu}var rO=function(){function e(t,n,r,i,a){Ne(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new rT,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return(0,Pe.Z)(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new nT(tT.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function iO(e,t){if(QS("AsyncQueue","".concat(t,": ").concat(e)),qT(e))return new nT(tT.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var aO=function(){function e(t){Ne(this,e),this.comparator=t?function(e,n){return t(e,n)||xT.comparator(e.key,n.key)}:function(e,t){return xT.comparator(e.key,t.key)},this.keyedMap=vC(),this.sortedSet=new JT(this.comparator)}return(0,Pe.Z)(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),oO=function(){function e(){Ne(this,e),this.Tu=new JT(xT.comparator)}return(0,Pe.Z)(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Tu.get(t);n?0!==e.type&&3===n.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==n.type?this.Tu=this.Tu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Tu=this.Tu.remove(t):1===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):XS():this.Tu=this.Tu.insert(t,e)}},{key:"Eu",value:function(){var e=[];return this.Tu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),sO=function(){function e(t,n,r,i,a,o,s,u,c){Ne(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u,this.hasCachedResults=c}return(0,Pe.Z)(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_E(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,aO.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),uO=(0,Pe.Z)((function e(){Ne(this,e),this.Au=void 0,this.listeners=[]})),cO=(0,Pe.Z)((function e(){Ne(this,e),this.queries=new hC((function(e){return wE(e)}),_E),this.onlineState="Unknown",this.Ru=new Set}));function lO(e,t){return hO.apply(this,arguments)}function hO(){return hO=$(Q().mark((function e(t,n){var r,i,a,o,s;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=eT(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new uO),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Au=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=iO(e.t0,"Initialization of query '".concat(xE(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.bu(r.onlineState),o.Au&&n.Pu(o.Au)&&yO(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),hO.apply(this,arguments)}function fO(e,t){return dO.apply(this,arguments)}function dO(){return dO=$(Q().mark((function e(t,n){var r,i,a,o,s;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=eT(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),dO.apply(this,arguments)}function pO(e,t){var n,r=eT(e),i=!1,a=Wt(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=Wt(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Pu(o)&&(i=!0)}}catch(h){l.e(h)}finally{l.f()}u.Au=o}}}catch(h){a.e(h)}finally{a.f()}i&&yO(r)}function vO(e,t,n){var r=eT(e),i=r.queries.get(t);if(i){var a,o=Wt(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function yO(e){e.Ru.forEach((function(e){e.next()}))}var mO=function(){function e(t,n,r){Ne(this,e),this.query=t,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}return(0,Pe.Z)(e,[{key:"Pu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=Wt(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new sO(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),a=!0):this.Cu(e,this.onlineState)&&(this.xu(e),a=!0),this.Su=e,a}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"bu",value:function(e){this.onlineState=e;var t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}},{key:"Cu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Nu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Du",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"xu",value:function(e){e=sO.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}]),e}(),gO=function(){function e(t,n){Ne(this,e),this.ku=t,this.byteLength=n}return(0,Pe.Z)(e,[{key:"Ou",value:function(){return"metadata"in this.ku}}]),e}(),kO=function(){function e(t){Ne(this,e),this.It=t}return(0,Pe.Z)(e,[{key:"Ji",value:function(e){return zC(this.It,e)}},{key:"Yi",value:function(e){return e.metadata.exists?YC(this.It,e.document,!1):qI.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}},{key:"Xi",value:function(e){return ZC(e)}}]),e}(),bO=function(){function e(t,n,r){Ne(this,e),this.Mu=t,this.localStore=n,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=_O(t)}return(0,Pe.Z)(e,[{key:"Fu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;var n=bT.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"$u",value:function(e){var t,n=new Map,r=new kO(this.It),i=Wt(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,s=r.Ji(a.metadata.name),u=Wt(a.metadata.queries);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=(n.get(c)||wC()).add(s);n.set(c,l)}}catch(h){u.e(h)}finally{u.f()}}}}catch(h){i.e(h)}finally{i.f()}return n}},{key:"complete",value:function(){var e=$(Q().mark((function e(){var t,n,r,i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,VP(this.localStore,new kO(this.It),this.documents,this.Mu.id);case 2:t=e.sent,n=this.$u(this.documents),r=Wt(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,BP(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Bu:this.collectionGroups,Lu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function _O(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var wO=(0,Pe.Z)((function e(t){Ne(this,e),this.key=t})),xO=(0,Pe.Z)((function e(t){Ne(this,e),this.key=t})),SO=function(){function e(t,n){Ne(this,e),this.query=t,this.Uu=n,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=wC(),this.mutatedKeys=wC(),this.Gu=IE(t),this.Qu=new aO(this.Gu)}return(0,Pe.Z)(e,[{key:"ju",get:function(){return this.Uu}},{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new oO,i=t?t.Qu:this.Qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=SE(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Hu(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.Gu(h,u)>0||c&&n.Gu(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(o=o.add(h),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,$i:s,mutatedKeys:a}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var a=e.zu.Eu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return XS()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)})),this.Ju(n);var o=t?this.Yu():[],s=0===this.Ku.size&&this.current?1:0,u=s!==this.qu;return this.qu=s,0!==a.length||u?{snapshot:new sO(this.query,e.Qu,i,a,e.mutatedKeys,0===s,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}},{key:"bu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new oO,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Uu=t.Uu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Uu=t.Uu.delete(e)})),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=wC(),this.Qu.forEach((function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))}));var n=[];return t.forEach((function(t){e.Ku.has(t)||n.push(new xO(t))})),this.Ku.forEach((function(e){t.has(e)||n.push(new wO(e))})),n}},{key:"tc",value:function(e){this.Uu=e.Hi,this.Ku=wC();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ec",value:function(){return sO.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}]),e}(),TO=(0,Pe.Z)((function e(t,n,r){Ne(this,e),this.query=t,this.targetId=n,this.view=r})),IO=(0,Pe.Z)((function e(t){Ne(this,e),this.key=t,this.nc=!1})),EO=function(){function e(t,n,r,i,a,o){Ne(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new hC((function(e){return wE(e)}),_E),this.rc=new Map,this.oc=new Set,this.uc=new JT(xT.comparator),this.cc=new Map,this.ac=new sP,this.hc={},this.lc=new Map,this.fc=FN.vn(),this.onlineState="Unknown",this.dc=void 0}return(0,Pe.Z)(e,[{key:"isPrimaryClient",get:function(){return!0===this.dc}}]),e}();function CO(e,t){return RO.apply(this,arguments)}function RO(){return RO=$(Q().mark((function e(t,n){var r,i,a,o,s,u;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=_D(t),!(o=r.ic.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ec(),e.next=15;break;case 6:return e.next=8,DP(r.localStore,kE(n));case 8:return s=e.sent,r.isPrimaryClient&&bA(r.remoteStore,s),u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=14,NO(r,n,i,"current"===u,s.resumeToken);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),RO.apply(this,arguments)}function NO(e,t,n,r,i){return PO.apply(this,arguments)}function PO(){return PO=$(Q().mark((function e(t,n,r,i,a){var o,s,u,c,l,h;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._c=function(e,n,r){return function(){var e=$(Q().mark((function e(t,n,r,i){var a,o,s;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Wu(r),e.t0=a.$i,!e.t0){e.next=6;break}return e.next=5,FP(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Wu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",($O(t,n.targetId,s.Xu),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,FP(t.localStore,n,!0);case 3:return o=e.sent,s=new SO(n,o.Hi),u=s.Wu(o.documents),c=IC.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=s.applyChanges(u,t.isPrimaryClient,c),$O(t,r,l.Xu),h=new TO(n,r,s),e.abrupt("return",(t.ic.set(n,h),t.rc.has(r)?t.rc.get(r).push(n):t.rc.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),PO.apply(this,arguments)}function AO(e,t){return OO.apply(this,arguments)}function OO(){return OO=$(Q().mark((function e(t,n){var r,i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=eT(t),i=r.ic.get(n),!((a=r.rc.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.rc.set(i.targetId,a.filter((function(e){return!_E(e,n)}))),void r.ic.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,LP(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),_A(r.remoteStore,i.targetId),QO(r,i.targetId)})).catch(LT);case 9:e.next=14;break;case 11:return QO(r,i.targetId),e.next=14,LP(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),OO.apply(this,arguments)}function DO(e,t,n){return LO.apply(this,arguments)}function LO(){return LO=$(Q().mark((function e(t,n,r){var i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=wD(t),e.prev=1,e.next=4,function(e,t){var n,r,i=eT(e),a=mT.now(),o=t.reduce((function(e,t){return e.add(t.key)}),wC());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var s=dC(),u=wC();return i.Gi.getEntries(e,o).next((function(e){(s=e).forEach((function(e,t){t.isValidDocument()||(u=u.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,s)})).next((function(r){n=r;var o,s=[],u=Wt(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=$E(c,n.get(c.key).overlayedDocument);null!=l&&s.push(new eC(c.key,l,VI(l.value.mapValue),WE.exists(!0)))}}catch(h){u.e(h)}finally{u.f()}return i.mutationQueue.addMutationBatch(e,a,s,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,u);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:yC(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.hc[e.currentUser.toKey()];r||(r=new JT(pT)),r=r.insert(t,n),e.hc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,eD(i,a.changes);case 9:return e.next=11,FA(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=iO(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),LO.apply(this,arguments)}function MO(e,t){return FO.apply(this,arguments)}function FO(){return FO=$(Q().mark((function e(t,n){var r,i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eT(t),e.prev=1,e.next=4,PP(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.cc.get(t);n&&(JS(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.nc=!0:e.modifiedDocuments.size>0?JS(n.nc):e.removedDocuments.size>0&&(JS(n.nc),n.nc=!1))})),e.next=8,eD(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,LT(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),FO.apply(this,arguments)}function UO(e,t,n){var r=eT(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ic.forEach((function(e,n){var r=n.view.bu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=eT(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=Wt(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.bu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&yO(n)}(r.eventManager,t),i.length&&r.sc.Wo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function jO(e,t,n){return ZO.apply(this,arguments)}function ZO(){return ZO=$(Q().mark((function e(t,n,r){var i,a,o,s,u,c;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=eT(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.cc.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new JT(xT.comparator)).insert(o,qI.newNoDocument(o,gT.min())),u=wC().add(o),c=new TC(gT.min(),new Map,new nI(pT),s,u),e.next=9,MO(i,c);case 9:i.uc=i.uc.remove(o),i.cc.delete(n),JO(i),e.next=16;break;case 14:return e.next=16,LP(i.localStore,n,!1).then((function(){return QO(i,n,r)})).catch(LT);case 16:case"end":return e.stop()}}),e)}))),ZO.apply(this,arguments)}function VO(e,t){return qO.apply(this,arguments)}function qO(){return qO=$(Q().mark((function e(t,n){var r,i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eT(t),i=n.batch.batchId,e.prev=1,e.next=4,RP(r.localStore,n);case 4:return a=e.sent,GO(r,i,null),KO(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,eD(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,LT(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),qO.apply(this,arguments)}function BO(e,t,n){return zO.apply(this,arguments)}function zO(){return zO=$(Q().mark((function e(t,n,r){var i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=eT(t),e.prev=1,e.next=4,function(e,t){var n=eT(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return JS(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,GO(i,n,r),KO(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,eD(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,LT(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),zO.apply(this,arguments)}function WO(e,t){return HO.apply(this,arguments)}function HO(){return HO=$(Q().mark((function e(t,n){var r,i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return IA((r=eT(t)).remoteStore)||GS("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=eT(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.lc.get(i)||[]).push(n),r.lc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=iO(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),HO.apply(this,arguments)}function KO(e,t){(e.lc.get(t)||[]).forEach((function(e){e.resolve()})),e.lc.delete(t)}function GO(e,t,n){var r=eT(e),i=r.hc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.hc[r.currentUser.toKey()]=i}}function QO(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=Wt(e.rc.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ic.delete(a),n&&e.sc.wc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.rc.delete(t),e.isPrimaryClient&&e.ac.ls(t).forEach((function(t){e.ac.containsKey(t)||YO(e,t)}))}function YO(e,t){e.oc.delete(t.path.canonicalString());var n=e.uc.get(t);null!==n&&(_A(e.remoteStore,n),e.uc=e.uc.remove(t),e.cc.delete(n),JO(e))}function $O(e,t,n){var r,i=Wt(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof wO?(e.ac.addReference(a.key,t),XO(e,a)):a instanceof xO?(GS("SyncEngine","Document no longer in limbo: "+a.key),e.ac.removeReference(a.key,t),e.ac.containsKey(a.key)||YO(e,a.key)):XS()}}catch(o){i.e(o)}finally{i.f()}}function XO(e,t){var n=t.key,r=n.path.canonicalString();e.uc.get(n)||e.oc.has(r)||(GS("SyncEngine","New document in limbo: "+n),e.oc.add(r),JO(e))}function JO(e){for(;e.oc.size>0&&e.uc.size<e.maxConcurrentLimboResolutions;){var t=e.oc.values().next().value;e.oc.delete(t);var n=new xT(bT.fromString(t)),r=e.fc.next();e.cc.set(r,new IO(n)),e.uc=e.uc.insert(n,r),bA(e.remoteStore,new zR(kE(dE(n.path)),r,2,QT.at))}}function eD(e,t,n){return tD.apply(this,arguments)}function tD(){return tD=$(Q().mark((function e(t,n,r){var i,a,o,s;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=eT(t),a=[],o=[],s=[],e.t0=i.ic.isEmpty(),e.t0){e.next=9;break}return i.ic.forEach((function(e,t){s.push(i._c(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=xP.Ci(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.sc.Wo(a),e.next=9,function(){var e=$(Q().mark((function e(t,n){var r,i,a,o,s,u,c,l;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eT(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return FT.forEach(n,(function(t){return FT.forEach(t.Si,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return FT.forEach(t.Di,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),qT(e.t0)){e.next=10;break}throw e.t0;case 10:GS("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=Wt(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.Ui.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.Ui=r.Ui.insert(s,l))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),tD.apply(this,arguments)}function nD(e,t){return rD.apply(this,arguments)}function rD(){return rD=$(Q().mark((function e(t,n){var r,i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=eT(t)).currentUser.isEqual(n)){e.next=11;break}return GS("SyncEngine","User change. New user:",n.toKey()),e.next=5,EP(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.lc.forEach((function(e){e.forEach((function(e){e.reject(new nT(tT.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.lc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,eD(r,i.ji);case 11:case"end":return e.stop()}}),e)}))),rD.apply(this,arguments)}function iD(e,t){var n=eT(e),r=n.cc.get(t);if(r&&r.nc)return wC().add(r.key);var i=wC(),a=n.rc.get(t);if(!a)return i;var o,s=Wt(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.ic.get(u);i=i.unionWith(c.view.ju)}}catch(l){s.e(l)}finally{s.f()}return i}function aD(e,t){return oD.apply(this,arguments)}function oD(){return oD=$(Q().mark((function e(t,n){var r,i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eT(t),e.next=3,FP(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.tc(i),e.abrupt("return",(r.isPrimaryClient&&$O(r,n.targetId,a.Xu),a));case 6:case"end":return e.stop()}}),e)}))),oD.apply(this,arguments)}function sD(e,t){return uD.apply(this,arguments)}function uD(){return uD=$(Q().mark((function e(t,n){var r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eT(t),e.abrupt("return",jP(r.localStore,n).then((function(e){return eD(r,e)})));case 2:case"end":return e.stop()}}),e)}))),uD.apply(this,arguments)}function cD(e,t,n,r){return lD.apply(this,arguments)}function lD(){return lD=$(Q().mark((function e(t,n,r,i){var a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=eT(t),e.next=3,function(e,t){var n=eT(e),r=eT(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Tn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):FT.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,FA(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(GO(a,n,i||null),KO(a,n),function(e,t){eT(eT(e).mutationQueue).An(t)}(a.localStore,n)):XS();case 11:return e.next=13,eD(a,o);case 13:e.next=16;break;case 15:GS("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),lD.apply(this,arguments)}function hD(e,t){return fD.apply(this,arguments)}function fD(){return fD=$(Q().mark((function e(t,n){var r,i,a,o,s,u,c,l;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_D(r=eT(t)),wD(r),!0!==n||!0===r.dc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,dD(r,i.toArray());case 5:return a=e.sent,r.dc=!0,e.next=9,JA(r.remoteStore,!0);case 9:o=Wt(a);try{for(o.s();!(s=o.n()).done;)u=s.value,bA(r.remoteStore,u)}catch(h){o.e(h)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.dc){e.next=25;break}return c=[],l=Promise.resolve(),r.rc.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return QO(r,t),LP(r.localStore,t,!0)})),_A(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,dD(r,c);case 21:return function(e){var t=eT(e);t.cc.forEach((function(e,n){_A(t.remoteStore,n)})),t.ac.fs(),t.cc=new Map,t.uc=new JT(xT.comparator)}(r),r.dc=!1,e.next=25,JA(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),fD.apply(this,arguments)}function dD(e,t,n){return pD.apply(this,arguments)}function pD(){return pD=$(Q().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f,d,p,v,y,m;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=eT(t),a=[],o=[],s=Wt(n),e.prev=2,s.s();case 4:if((u=s.n()).done){e.next=45;break}if(c=u.value,l=void 0,!(h=i.rc.get(c))||0===h.length){e.next=34;break}return e.next=11,DP(i.localStore,kE(h[0]));case 11:l=e.sent,f=Wt(h),e.prev=13,f.s();case 15:if((d=f.n()).done){e.next=24;break}return p=d.value,v=i.ic.get(p),e.next=20,aD(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),f.e(e.t0);case 29:return e.prev=29,f.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,UP(i.localStore,c);case 36:return m=e.sent,e.next=39,DP(i.localStore,m);case 39:return l=e.sent,e.next=42,NO(i,vD(m),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.sc.Wo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),pD.apply(this,arguments)}function vD(e){return fE(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function yD(e){var t=eT(e);return eT(eT(t.localStore).persistence).vi()}function mD(e,t,n,r){return gD.apply(this,arguments)}function gD(){return gD=$(Q().mark((function e(t,n,r,i){var a,o,s,u;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=eT(t)).dc){e.next=3;break}return e.abrupt("return",void GS("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.rc.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,jP(a.localStore,TE(o[0]));case 10:return s=e.sent,u=TC.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,oI.EMPTY_BYTE_STRING),e.next=14,eD(a,s,u);case 14:return e.abrupt("break",20);case 15:return e.next=17,LP(a.localStore,n,!0);case 17:return QO(a,n,i),e.abrupt("break",20);case 19:XS();case 20:case"end":return e.stop()}}),e)}))),gD.apply(this,arguments)}function kD(e,t,n){return bD.apply(this,arguments)}function bD(){return bD=$(Q().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=_D(t)).dc){e.next=45;break}a=Wt(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(s=o.value,!i.rc.has(s)){e.next=10;break}return GS("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,UP(i.localStore,s);case 12:return u=e.sent,e.next=15,DP(i.localStore,u);case 15:return c=e.sent,e.next=18,NO(i,vD(u),c.targetId,!1,c.resumeToken);case 18:bA(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=Wt(r),e.prev=30,f=Q().mark((function e(){var t;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i.rc.has(t),!e.t0){e.next=5;break}return e.next=5,LP(i.localStore,t,!1).then((function(){_A(i.remoteStore,t),QO(i,t)})).catch(LT);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((h=l.n()).done){e.next=37;break}return e.delegateYield(f(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),bD.apply(this,arguments)}function _D(e){var t=eT(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=MO.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=iD.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=jO.bind(null,t),t.sc.Wo=pO.bind(null,t.eventManager),t.sc.wc=vO.bind(null,t.eventManager),t}function wD(e){var t=eT(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=VO.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=BO.bind(null,t),t}function xD(e,t,n){var r=eT(e);(function(){var e=$(Q().mark((function e(t,n,r){var i,a,o,s,u;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=eT(e),r=ZC(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ns.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(_O(i)),a=new bO(i,t.localStore,n.It),e.next=15,n.mc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Fu(o);case 19:return(s=e.sent)&&r._updateProgress(s),e.next=23,n.mc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return u=e.sent,e.next=31,eD(t,u.Lu,void 0);case 31:return e.next=33,function(e,t){var n=eT(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ns.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(u.progress),e.abrupt("return",Promise.resolve(u.Bu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(YS("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var SD=function(){function e(){Ne(this,e),this.synchronizeTabs=!1}return(0,Pe.Z)(e,[{key:"initialize",value:function(){var e=$(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.It=uA(t.databaseInfo.databaseId),this.sharedClientState=this.gc(t),this.persistence=this.yc(t),e.next=5,this.persistence.start();case 5:this.localStore=this.Ic(t),this.gcScheduler=this.Tc(t,this.localStore),this.indexBackfillerScheduler=this.Ec(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Tc",value:function(e,t){return null}},{key:"Ec",value:function(e,t){return null}},{key:"Ic",value:function(e){return IP(this.persistence,new SP,e.initialUser,this.It)}},{key:"yc",value:function(e){return new dP(vP.Bs,this.It)}},{key:"gc",value:function(e){return new eA}},{key:"terminate",value:function(){var e=$(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),TD=function(e){Kt(n,e);var t=$t(n);function n(e,r,i){var a;return Ne(this,n),(a=t.call(this)).Ac=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return(0,Pe.Z)(n,[{key:"initialize",value:function(){var e=$(Q().mark((function e(t){var r=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ei(Gt(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Ac.initialize(this,t);case 4:return e.next=6,wD(this.Ac.syncEngine);case 6:return e.next=8,FA(this.Ac.remoteStore);case 8:return e.next=10,this.persistence.li((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ic",value:function(e){return IP(this.persistence,new SP,e.initialUser,this.It)}},{key:"Tc",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new zN(n,e.asyncQueue,t)}},{key:"Ec",value:function(e,t){var n=new GT(t,this.persistence);return new KT(e.asyncQueue,n)}},{key:"yc",value:function(e){var t=wP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?RN.withCacheSize(this.cacheSizeBytes):RN.DEFAULT;return new kP(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,oA(),sA(),this.It,this.sharedClientState,!!this.forceOwnership)}},{key:"gc",value:function(e){return new eA}}]),n}(SD),ID=function(e){Kt(n,e);var t=$t(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this,e,r,!1)).Ac=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return(0,Pe.Z)(n,[{key:"initialize",value:function(){var e=$(Q().mark((function e(t){var r,i=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ei(Gt(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Ac.syncEngine,e.t0=this.sharedClientState instanceof JP,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Fr:cD.bind(null,r),$r:mD.bind(null,r),Br:kD.bind(null,r),vi:yD.bind(null,r),Mr:sD.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.li(function(){var e=$(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hD(i.Ac.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"gc",value:function(e){var t=oA();if(!JP.C(t))throw new nT(tT.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=wP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new JP(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(TD),ED=function(){function e(){Ne(this,e)}return(0,Pe.Z)(e,[{key:"initialize",value:function(){var e=$(Q().mark((function e(t,n){var r=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return UO(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=nD.bind(null,this.syncEngine),e.next=12,JA(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new cO}},{key:"createDatastore",value:function(e){var t,n=uA(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new aA(t));return function(e,t,n,r){return new dA(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return UO(o.syncEngine,e,0)},a=nA.C()?new nA:new tA,new vA(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new EO(e,t,n,r,i,a);return o&&(s.dc=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=$(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=eT(t),GS("RemoteStore","RemoteStore shutting down."),n._u.add(5),e.next=5,gA(n);case 5:n.mu.shutdown(),n.gu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function CD(e,t,n){if(!n)throw new nT(tT.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function RD(e,t,n,r){if(!0===t&&!0===r)throw new nT(tT.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function ND(e){if(!xT.isDocumentKey(e))throw new nT(tT.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function PD(e){if(xT.isDocumentKey(e))throw new nT(tT.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function AD(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":XS()}function OD(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new nT(tT.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=AD(e);throw new nT(tT.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function DD(e,t){if(t<=0)throw new nT(tT.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var LD=new Map,MD=function(){function e(t){var n;if(Ne(this,e),void 0===t.host){if(void 0!==t.ssl)throw new nT(tT.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new nT(tT.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,RD("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return(0,Pe.Z)(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),FD=function(){function e(t,n,r,i){Ne(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new MD({}),this._settingsFrozen=!1}return(0,Pe.Z)(e,[{key:"app",get:function(){if(!this._app)throw new nT(tT.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new nT(tT.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new MD(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new aT;switch(e.type){case"gapi":var t=e.client;return new cT(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new nT(tT.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=LD.get(e);t&&(GS("ComponentProvider","Removing Datastore"),LD.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function UD(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=OD(e,FD))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&YS("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,s;if("string"==typeof i.mockUserToken)o=i.mockUserToken,s=zS.MOCK_USER;else{o=Sn(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new nT(tT.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new zS(u)}e._authCredentials=new oT(new iT(o,s))}}var jD=function(){function e(t,n,r){Ne(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return(0,Pe.Z)(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new VD(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),ZD=function(){function e(t,n,r){Ne(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return(0,Pe.Z)(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),VD=function(e){Kt(n,e);var t=$t(n);function n(e,r,i){var a;return Ne(this,n),(a=t.call(this,e,r,dE(i)))._path=i,a.type="collection",a}return(0,Pe.Z)(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new jD(this.firestore,null,new xT(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(ZD);function qD(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Yn(e),CD("collection","path",t),e instanceof FD){var a=bT.fromString.apply(bT,[t].concat(r));return PD(a),new VD(e,null,a)}if(!(e instanceof jD||e instanceof VD))throw new nT(tT.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(bT.fromString.apply(bT,[t].concat(r)));return PD(o),new VD(e.firestore,null,o)}function BD(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Yn(e),1===arguments.length&&(t=dT.R()),CD("doc","path",t),e instanceof FD){var a=bT.fromString.apply(bT,[t].concat(r));return ND(a),new jD(e,null,new xT(a))}if(!(e instanceof jD||e instanceof VD))throw new nT(tT.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(bT.fromString.apply(bT,[t].concat(r)));return ND(o),new jD(e.firestore,e instanceof VD?e.converter:null,new xT(o))}function zD(e,t){return e=Yn(e),t=Yn(t),(e instanceof jD||e instanceof VD)&&(t instanceof jD||t instanceof VD)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function WD(e,t){return e=Yn(e),t=Yn(t),e instanceof ZD&&t instanceof ZD&&e.firestore===t.firestore&&_E(e._query,t._query)&&e.converter===t.converter}function HD(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return $(Q().mark((function r(){var i;return Q().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return $(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var KD=function(){function e(t){Ne(this,e),this.observer=t,this.muted=!1}return(0,Pe.Z)(e,[{key:"next",value:function(e){this.observer.next&&this.Rc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Rc(this.observer.error,e):QS("Uncaught Error in snapshot listener:",e)}},{key:"bc",value:function(){this.muted=!0}},{key:"Rc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),GD=function(){function e(t,n){var r=this;Ne(this,e),this.Pc=t,this.It=n,this.metadata=new rT,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then((function(e){e&&e.Ou()?r.metadata.resolve(e.ku.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.ku))))}),(function(e){return r.metadata.reject(e)}))}return(0,Pe.Z)(e,[{key:"close",value:function(){return this.Pc.cancel()}},{key:"getMetadata",value:function(){var e=$(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"mc",value:function(){var e=$(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Vc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Vc",value:function(){var e=$(Q().mark((function e(){var t,n,r,i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Sc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.vc.decode(t),r=Number(n),isNaN(r)&&this.Dc("length string (".concat(n,") is not valid number")),e.next=9,this.Cc(r);case 9:return i=e.sent,e.abrupt("return",new gO(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"xc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Sc",value:function(){var e=$(Q().mark((function e(){var t,n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.xc()<0)){e.next=7;break}return e.next=3,this.Nc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.xc())<0&&this.Dc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Cc",value:function(){var e=$(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Nc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Dc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.vc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dc",value:function(e){throw this.Pc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Nc",value:function(){var e=$(Q().mark((function e(){var t,n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Pc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),QD=function(){function e(t){Ne(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return(0,Pe.Z)(e,[{key:"lookup",value:function(){var e=$(Q().mark((function e(t){var n,r=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new nT(tT.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=$(Q().mark((function e(t,n){var r,i,a,o,s,u;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eT(t),i=KC(r.It)+"/documents",a={documents:n.map((function(e){return BC(r.It,e)}))},e.next=5,r._o("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,s=new Map,o.forEach((function(e){var t=$C(r.It,e);s.set(t.key.toString(),t)})),u=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());JS(!!t),u.push(t)})),u));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new oC(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=$(Q().mark((function e(){var t,n=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=xT.fromPath(t);n.mutations.push(new sC(r,n.precondition(r)))})),e.next=7,function(){var e=$(Q().mark((function e(t,n){var r,i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eT(t),i=KC(r.It)+"/documents",a={writes:n.map((function(e){return XC(r.It,e)}))},e.next=3,r.ao("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw XS();t=gT.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new nT(tT.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(gT.min())?WE.exists(!1):WE.updateTime(t):WE.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(gT.min()))throw new nT(tT.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return WE.updateTime(t)}return WE.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),YD=function(){function e(t,n,r,i,a){Ne(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.kc=r.maxAttempts,this.xo=new cA(this.asyncQueue,"transaction_retry")}return(0,Pe.Z)(e,[{key:"run",value:function(){this.kc-=1,this.Oc()}},{key:"Oc",value:function(){var e=this;this.xo.Ro($(Q().mark((function t(){var n,r;return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new QD(e.datastore),(r=e.Mc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Fc(t)}))}))})).catch((function(t){e.Fc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Mc",value:function(e){try{var t=this.updateFunction(e);return!yI(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Fc",value:function(e){var t=this;this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Oc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"$c",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!cC(t)}return!1}}]),e}(),$D=function(){function e(t,n,r,i){var a=this;Ne(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=zS.UNAUTHENTICATED,this.clientId=dT.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=$(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return GS("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return GS("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return(0,Pe.Z)(e,[{key:"getConfiguration",value:function(){var e=$(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new nT(tT.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new rT;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted($(Q().mark((function n(){var r;return Q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=iO(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function XD(e,t){return JD.apply(this,arguments)}function JD(){return JD=$(Q().mark((function e(t,n){var r,i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),GS("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=$(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,EP(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),JD.apply(this,arguments)}function eL(e,t){return tL.apply(this,arguments)}function tL(){return tL=$(Q().mark((function e(t,n){var r,i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,nL(t);case 3:return r=e.sent,GS("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return $A(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return $A(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),tL.apply(this,arguments)}function nL(e){return rL.apply(this,arguments)}function rL(){return rL=$(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return GS("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,XD(t,new SD);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),rL.apply(this,arguments)}function iL(e){return aL.apply(this,arguments)}function aL(){return aL=$(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return GS("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,eL(t,new ED);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),aL.apply(this,arguments)}function oL(e){return nL(e).then((function(e){return e.persistence}))}function sL(e){return nL(e).then((function(e){return e.localStore}))}function uL(e){return iL(e).then((function(e){return e.remoteStore}))}function cL(e){return iL(e).then((function(e){return e.syncEngine}))}function lL(e){return iL(e).then((function(e){return e.datastore}))}function hL(e){return fL.apply(this,arguments)}function fL(){return fL=$(Q().mark((function e(t){var n,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,iL(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=CO.bind(null,n.syncEngine),r.onUnlisten=AO.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),fL.apply(this,arguments)}function dL(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new rT;return e.asyncQueue.enqueueAndForget($(Q().mark((function i(){return Q().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new KD({next:function(a){t.enqueueAndForget((function(){return fO(e,o)}));var s=a.docs.has(n);!s&&a.fromCache?i.reject(new nT(tT.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new nT(tT.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new mO(dE(n.path),a,{includeMetadataChanges:!0,Nu:!0});return lO(e,o)},i.next=3,hL(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function pL(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new rT;return e.asyncQueue.enqueueAndForget($(Q().mark((function i(){return Q().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new KD({next:function(n){t.enqueueAndForget((function(){return fO(e,o)})),n.fromCache&&"server"===r.source?i.reject(new nT(tT.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new mO(n,a,{includeMetadataChanges:!0,Nu:!0});return lO(e,o)},i.next=3,hL(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var vL=function(){function e(){var t=this;Ne(this,e),this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new cA(this,"async_queue_retry"),this.Wc=function(){var e=sA();e&&GS("AsyncQueue","Visibility state changed to "+e.visibilityState),t.xo.Po()};var n=sA();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Wc)}return(0,Pe.Z)(e,[{key:"isShuttingDown",get:function(){return this.Uc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.zc(),this.Hc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;var t=sA();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}},{key:"enqueue",value:function(e){var t=this;if(this.zc(),this.Uc)return new Promise((function(){}));var n=new rT;return this.Hc((function(){return t.Uc&&t.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Lc.push(e),t.Jc()}))}},{key:"Jc",value:function(){var e=$(Q().mark((function e(){var t=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Lc.length){e.next=14;break}return e.prev=1,e.next=4,this.Lc[0]();case 4:this.Lc.shift(),this.xo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),qT(e.t0)){e.next=12;break}throw e.t0;case 12:GS("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Lc.length>0&&this.xo.Ro((function(){return t.Jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t=this,n=this.Bc.then((function(){return t.Gc=!0,e().catch((function(e){t.Kc=e,t.Gc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw QS("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Gc=!1,e}))}));return this.Bc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.zc(),this.jc.indexOf(e)>-1&&(t=0);var i=rO.createAndSchedule(this,e,t,n,(function(e){return r.Yc(e)}));return this.qc.push(i),i}},{key:"zc",value:function(){this.Kc&&XS()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Xc",value:function(){var e=$(Q().mark((function e(){var t;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Bc,e.next=3,t;case 3:if(t!==this.Bc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Zc",value:function(e){var t,n=Wt(this.qc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ta",value:function(e){var t=this;return this.Xc().then((function(){t.qc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=Wt(t.qc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Xc()}))}},{key:"ea",value:function(e){this.jc.push(e)}},{key:"Yc",value:function(e){var t=this.qc.indexOf(e);this.qc.splice(t,1)}}]),e}();function yL(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=Wt(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var mL=function(){function e(){Ne(this,e),this._progressObserver={},this._taskCompletionResolver=new rT,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return(0,Pe.Z)(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),gL=function(e){Kt(n,e);var t=$t(n);function n(e,r,i,a){var o;return Ne(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new vL,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return(0,Pe.Z)(n,[{key:"_terminate",value:function(){return this._firestoreClient||bL(this),this._firestoreClient.terminate()}}]),n}(FD);function kL(e){return e._firestoreClient||bL(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function bL(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new pI(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new $D(e._authCredentials,e._appCheckCredentials,e._queue,r)}function _L(e,t,n){var r=new rT;return e.asyncQueue.enqueue($(Q().mark((function i(){var a;return Q().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,XD(e,n);case 3:return i.next=5,eL(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===tT.FAILED_PRECONDITION||e.code===tT.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(a=i.t0)){i.next=13;break}throw a;case 13:YS("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function wL(e){return function(e){return e.asyncQueue.enqueue($(Q().mark((function t(){var n,r;return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,oL(e);case 2:return n=t.sent,t.next=5,uL(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=eT(e);return t._u.delete(0),yA(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(kL(e=OD(e,gL)))}function xL(e){return function(e){return e.asyncQueue.enqueue($(Q().mark((function t(){var n,r;return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,oL(e);case 2:return n=t.sent,t.next=5,uL(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=$(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=eT(t))._u.add(0),e.next=4,gA(n);case 4:n.gu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(kL(e=OD(e,gL)))}function SL(e,t){var n=kL(e=OD(e,gL)),r=new mL;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new GD(e,t)}(function(e,t){if(e instanceof Uint8Array)return HD(e,t);if(e instanceof ArrayBuffer)return HD(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,uA(t));e.asyncQueue.enqueueAndForget($(Q().mark((function t(){return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=xD,t.next=3,cL(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function TL(e,t){return function(e,t){return e.asyncQueue.enqueue($(Q().mark((function n(){return Q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=eT(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ns.getNamedQuery(e,t)}))},n.next=3,sL(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(kL(e=OD(e,gL)),t).then((function(t){return t?new ZD(e,null,t.query):null}))}function IL(e){if(e._initialized||e._terminated)throw new nT(tT.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var EL=function(){function e(t){Ne(this,e),this._byteString=t}return(0,Pe.Z)(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(oI.fromBase64String(t))}catch(t){throw new nT(tT.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(oI.fromUint8Array(t))}}]),e}(),CL=function(){function e(){Ne(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new nT(tT.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wT(n)}return(0,Pe.Z)(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var RL=(0,Pe.Z)((function e(t){Ne(this,e),this._methodName=t})),NL=function(){function e(t,n){if(Ne(this,e),!isFinite(t)||t<-90||t>90)throw new nT(tT.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new nT(tT.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return(0,Pe.Z)(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return pT(this._lat,e._lat)||pT(this._long,e._long)}}]),e}(),PL=/^__.*__$/,AL=function(){function e(t,n,r){Ne(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return(0,Pe.Z)(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new eC(e,this.data,this.fieldMask,t,this.fieldTransforms):new JE(e,this.data,t,this.fieldTransforms)}}]),e}(),OL=function(){function e(t,n,r){Ne(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return(0,Pe.Z)(e,[{key:"toMutation",value:function(e,t){return new eC(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function DL(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw XS()}}var LL=function(){function e(t,n,r,i,a,o){Ne(this,e),this.settings=t,this.databaseId=n,this.It=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return(0,Pe.Z)(e,[{key:"path",get:function(){return this.settings.path}},{key:"sa",get:function(){return this.settings.sa}},{key:"ia",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ra",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.ua(e),r}},{key:"ca",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.na(),r}},{key:"aa",value:function(e){return this.ia({path:void 0,oa:!0})}},{key:"ha",value:function(e){return tM(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"na",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ua(this.path.get(e))}},{key:"ua",value:function(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(DL(this.sa)&&PL.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}]),e}(),ML=function(){function e(t,n,r){Ne(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.It=r||uA(t)}return(0,Pe.Z)(e,[{key:"da",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new LL({sa:e,methodName:t,fa:n,path:wT.emptyPath(),oa:!1,la:r},this.databaseId,this.It,this.ignoreUndefinedProperties)}}]),e}();function FL(e){var t=e._freezeSettings(),n=uA(e._databaseId);return new ML(e._databaseId,!!t.ignoreUndefinedProperties,n)}function UL(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.da(a.merge||a.mergeFields?2:0,t,n,i);$L("Data must be an object, but it was:",o,r);var s,u,c=QL(r,o);if(a.merge)s=new aI(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var l,h=[],f=Wt(a.mergeFields);try{for(f.s();!(l=f.n()).done;){var d=l.value,p=XL(t,d,n);if(!o.contains(p))throw new nT(tT.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));nM(h,p)||h.push(p)}}catch(v){f.e(v)}finally{f.f()}s=new aI(h),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new AL(new ZI(c),s,u)}var jL=function(e){Kt(n,e);var t=$t(n);function n(){return Ne(this,n),t.apply(this,arguments)}return(0,Pe.Z)(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.sa)throw 1===e.sa?e.ha("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ha("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(RL);function ZL(e,t,n){return new LL({sa:3,fa:t.settings.fa,methodName:e._methodName,oa:n},t.databaseId,t.It,t.ignoreUndefinedProperties)}var VL=function(e){Kt(n,e);var t=$t(n);function n(){return Ne(this,n),t.apply(this,arguments)}return(0,Pe.Z)(n,[{key:"_toFieldTransform",value:function(e){return new BE(e.path,new LE)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(RL),qL=function(e){Kt(n,e);var t=$t(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this,e))._a=r,i}return(0,Pe.Z)(n,[{key:"_toFieldTransform",value:function(e){var t=ZL(this,e,!0),n=this._a.map((function(e){return GL(e,t)})),r=new ME(n);return new BE(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(RL),BL=function(e){Kt(n,e);var t=$t(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this,e))._a=r,i}return(0,Pe.Z)(n,[{key:"_toFieldTransform",value:function(e){var t=ZL(this,e,!0),n=this._a.map((function(e){return GL(e,t)})),r=new UE(n);return new BE(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(RL),zL=function(e){Kt(n,e);var t=$t(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this,e)).wa=r,i}return(0,Pe.Z)(n,[{key:"_toFieldTransform",value:function(e){var t=new ZE(e.It,NE(e.It,this.wa));return new BE(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(RL);function WL(e,t,n,r){var i=e.da(1,t,n);$L("Data must be an object, but it was:",i,r);var a=[],o=ZI.empty();$T(r,(function(e,r){var s=eM(t,e,n);r=Yn(r);var u=i.ca(s);if(r instanceof jL)a.push(s);else{var c=GL(r,u);null!=c&&(a.push(s),o.set(s,c))}}));var s=new aI(a);return new OL(o,s,i.fieldTransforms)}function HL(e,t,n,r,i,a){var o=e.da(1,t,n),s=[XL(t,r,n)],u=[i];if(a.length%2!=0)throw new nT(tT.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push(XL(t,a[c])),u.push(a[c+1]);for(var l=[],h=ZI.empty(),f=s.length-1;f>=0;--f)if(!nM(l,s[f])){var d=s[f],p=u[f];p=Yn(p);var v=o.ca(d);if(p instanceof jL)l.push(d);else{var y=GL(p,v);null!=y&&(l.push(d),h.set(d,y))}}var m=new aI(l);return new OL(h,m,o.fieldTransforms)}function KL(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return GL(n,e.da(r?4:3,t))}function GL(e,t){if(YL(e=Yn(e)))return $L("Unsupported field value:",t,e),QL(e,t);if(e instanceof RL)return function(e,t){if(!DL(t.sa))throw t.ha("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ha("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.oa&&4!==t.sa)throw t.ha("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=Wt(e);try{for(a.s();!(n=a.n()).done;){var o=GL(n.value,t.aa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Yn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return NE(t.It,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=mT.fromDate(e);return{timestampValue:FC(t.It,n)}}if(e instanceof mT){var r=new mT(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:FC(t.It,r)}}if(e instanceof NL)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof EL)return{bytesValue:UC(t.It,e._byteString)};if(e instanceof jD){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ha("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:VC(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ha("Unsupported field value: ".concat(AD(e)))}(e,t)}function QL(e,t){var n={};return XT(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):$T(e,(function(e,r){var i=GL(r,t.ra(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function YL(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof mT||e instanceof NL||e instanceof EL||e instanceof jD||e instanceof RL)}function $L(e,t,n){if(!YL(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=AD(n);throw"an object"===r?t.ha(e+" a custom object"):t.ha(e+" "+r)}}function XL(e,t,n){if((t=Yn(t))instanceof CL)return t._internalPath;if("string"==typeof t)return eM(e,t);throw tM("Field path arguments must be of type string or ",e,!1,void 0,n)}var JL=new RegExp("[~\\*/\\[\\]]");function eM(e,t,n){if(t.search(JL)>=0)throw tM("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return Xt(CL,(0,i.Z)(t.split(".")))._internalPath}catch(r){throw tM("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function tM(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new nT(tT.INVALID_ARGUMENT,s+e+u)}function nM(e,t){return e.some((function(e){return e.isEqual(t)}))}var rM=function(){function e(t,n,r,i,a){Ne(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return(0,Pe.Z)(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new jD(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new iM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(aM("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),iM=function(e){Kt(n,e);var t=$t(n);function n(){return Ne(this,n),t.apply(this,arguments)}return(0,Pe.Z)(n,[{key:"data",value:function(){return Ei(Gt(n.prototype),"data",this).call(this)}}]),n}(rM);function aM(e,t){return"string"==typeof t?eM(e,t):t instanceof CL?t._internalPath:t._delegate._internalPath}function oM(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new nT(tT.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var sM=(0,Pe.Z)((function e(){Ne(this,e)}));function uM(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var cM=function(e){Kt(n,e);var t=$t(n);function n(e,r,i){var a;return Ne(this,n),(a=t.call(this)).ma=e,a.ga=r,a.ya=i,a.type="where",a}return(0,Pe.Z)(n,[{key:"_apply",value:function(e){var t=FL(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new nT(tT.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){bM(o,a);var u,c=[],l=Wt(o);try{for(l.s();!(u=l.n()).done;){var h=u.value;c.push(kM(r,e,h))}}catch(d){l.e(d)}finally{l.f()}s={arrayValue:{values:c}}}else s=kM(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||bM(o,a),s=KL(n,"where",o,"in"===a||"not-in"===a);var f=$I.create(i,a,s);return function(e,t){if(t.dt()){var n=yE(e);if(null!==n&&!n.isEqual(t.field))throw new nT(tT.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=vE(e);null!==r&&_M(e,t.field,r)}var i=function(e,t){var n,r=Wt(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new nT(tT.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new nT(tT.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,f),f}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new ZD(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new hE(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(sM);var lM=function(e){Kt(n,e);var t=$t(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this)).ma=e,i.pa=r,i.type="orderBy",i}return(0,Pe.Z)(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new nT(tT.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new nT(tT.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new sE(t,n);return function(e,t){if(null===vE(e)){var n=yE(e);null!==n&&_M(e,n,t.field)}}(e,r),r}(e._query,this.ma,this.pa);return new ZD(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new hE(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(sM);var hM=function(e){Kt(n,e);var t=$t(n);function n(e,r,i){var a;return Ne(this,n),(a=t.call(this)).type=e,a.Ia=r,a.Ta=i,a}return(0,Pe.Z)(n,[{key:"_apply",value:function(e){return new ZD(e.firestore,e.converter,bE(e._query,this.Ia,this.Ta))}}]),n}(sM);var fM=function(e){Kt(n,e);var t=$t(n);function n(e,r,i){var a;return Ne(this,n),(a=t.call(this)).type=e,a.Ea=r,a.Aa=i,a}return(0,Pe.Z)(n,[{key:"_apply",value:function(e){var t=gM(e,this.type,this.Ea,this.Aa);return new ZD(e.firestore,e.converter,function(e,t){return new hE(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(sM);function dM(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new fM("startAt",t,!0)}function pM(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new fM("startAfter",t,!1)}var vM=function(e){Kt(n,e);var t=$t(n);function n(e,r,i){var a;return Ne(this,n),(a=t.call(this)).type=e,a.Ea=r,a.Aa=i,a}return(0,Pe.Z)(n,[{key:"_apply",value:function(e){var t=gM(e,this.type,this.Ea,this.Aa);return new ZD(e.firestore,e.converter,function(e,t){return new hE(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(sM);function yM(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new vM("endBefore",t,!1)}function mM(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new vM("endAt",t,!0)}function gM(e,t,n,r){if(n[0]=Yn(n[0]),n[0]instanceof rM)return function(e,t,n,r,i){if(!r)throw new nT(tT.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],s=Wt(gE(e));try{for(s.s();!(a=s.n()).done;){var u=a.value;if(u.field.isKeyField())o.push(CI(t,r.key));else{var c=r.data.field(u.field);if(hI(c))throw new nT(tT.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new nT(tT.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(h){s.e(h)}finally{s.f()}return new oE(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=FL(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new nT(tT.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var s=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new nT(tT.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!mE(e)&&-1!==c.indexOf("/"))throw new nT(tT.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(bT.fromString(c));if(!xT.isDocumentKey(l))throw new nT(tT.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var h=new xT(l);s.push(CI(t,h))}else{var f=KL(n,r,c);s.push(f)}}return new oE(s,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function kM(e,t,n){if("string"==typeof(n=Yn(n))){if(""===n)throw new nT(tT.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mE(t)&&-1!==n.indexOf("/"))throw new nT(tT.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(bT.fromString(n));if(!xT.isDocumentKey(r))throw new nT(tT.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return CI(e,new xT(r))}if(n instanceof jD)return CI(e,n._key);throw new nT(tT.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(AD(n),"."))}function bM(e,t){if(!Array.isArray(e)||0===e.length)throw new nT(tT.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new nT(tT.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function _M(e,t,n){if(!n.isEqual(t))throw new nT(tT.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var wM=function(){function e(){Ne(this,e)}return(0,Pe.Z)(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(_I(e)){case 0:return null;case 1:return e.booleanValue;case 2:return cI(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(lI(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw XS()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return $T(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new NL(cI(e.latitude),cI(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=fI(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(dI(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=uI(e);return new mT(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=bT.fromString(e);JS(hR(n));var r=new vI(n.get(1),n.get(3)),i=new xT(n.popFirst(5));return r.isEqual(t)||QS("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function xM(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var SM=function(e){Kt(n,e);var t=$t(n);function n(e){var r;return Ne(this,n),(r=t.call(this)).firestore=e,r}return(0,Pe.Z)(n,[{key:"convertBytes",value:function(e){return new EL(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new jD(this.firestore,null,t)}}]),n}(wM),TM=function(){function e(t,n){Ne(this,e),this.hasPendingWrites=t,this.fromCache=n}return(0,Pe.Z)(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),IM=function(e){Kt(n,e);var t=$t(n);function n(e,r,i,a,o,s){var u;return Ne(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return(0,Pe.Z)(n,[{key:"exists",value:function(){return Ei(Gt(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new EM(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(aM("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(rM),EM=function(e){Kt(n,e);var t=$t(n);function n(){return Ne(this,n),t.apply(this,arguments)}return(0,Pe.Z)(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ei(Gt(n.prototype),"data",this).call(this,e)}}]),n}(IM),CM=function(){function e(t,n,r,i){Ne(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new TM(i.hasPendingWrites,i.fromCache),this.query=r}return(0,Pe.Z)(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new EM(n._firestore,n._userDataWriter,r.key,r,new TM(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new nT(tT.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new EM(e._firestore,e._userDataWriter,t.doc.key,t.doc,new TM(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new EM(e._firestore,e._userDataWriter,t.doc.key,t.doc,new TM(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:RM(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function RM(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return XS()}}function NM(e,t){return e instanceof IM&&t instanceof IM?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof CM&&t instanceof CM&&e._firestore===t._firestore&&WD(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var PM=function(e){Kt(n,e);var t=$t(n);function n(e){var r;return Ne(this,n),(r=t.call(this)).firestore=e,r}return(0,Pe.Z)(n,[{key:"convertBytes",value:function(e){return new EL(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new jD(this.firestore,null,t)}}]),n}(wM);function AM(e){e=OD(e,jD);var t=OD(e.firestore,gL),n=kL(t),r=new PM(t);return function(e,t){var n=new rT;return e.asyncQueue.enqueueAndForget($(Q().mark((function r(){return Q().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=$(Q().mark((function e(t,n,r){var i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=eT(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new nT(tT.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=iO(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,sL(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new IM(t,r,e._key,n,new TM(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function OM(e){e=OD(e,ZD);var t=OD(e.firestore,gL),n=kL(t),r=new PM(t);return function(e,t){var n=new rT;return e.asyncQueue.enqueueAndForget($(Q().mark((function r(){return Q().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=$(Q().mark((function e(t,n,r){var i,a,o,s,u;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,FP(t,n,!0);case 3:i=e.sent,a=new SO(n,i.Hi),o=a.Wu(i.documents),s=a.applyChanges(o,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),u=iO(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(u);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,sL(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new CM(t,r,e,n)}))}function DM(e,t,n){e=OD(e,jD);var r=OD(e.firestore,gL),i=xM(e.converter,t,n);return UM(r,[UL(FL(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,WE.none())])}function LM(e,t,n){e=OD(e,jD);for(var r=OD(e.firestore,gL),i=FL(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return UM(r,[("string"==typeof(t=Yn(t))||t instanceof CL?HL(i,"updateDoc",e._key,t,n,o):WL(i,"updateDoc",e._key,t)).toMutation(e._key,WE.exists(!0))])}function MM(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Yn(e);var s={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||yL(n[u])||(s=n[u],u++);var c,l,h,f={includeMetadataChanges:s.includeMetadataChanges};if(yL(n[u])){var d=n[u];n[u]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[u+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[u+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof jD)l=OD(e.firestore,gL),h=dE(e._key.path),c={next:function(t){n[u]&&n[u](jM(l,e,t))},error:n[u+1],complete:n[u+2]};else{var p=OD(e,ZD);l=OD(p.firestore,gL),h=p._query;var v=new PM(l);c={next:function(e){n[u]&&n[u](new CM(l,v,p,e))},error:n[u+1],complete:n[u+2]},oM(e._query)}return function(e,t,n,r){var i=new KD(r),a=new mO(t,i,n);return e.asyncQueue.enqueueAndForget($(Q().mark((function t(){return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=lO,t.next=3,hL(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.bc(),e.asyncQueue.enqueueAndForget($(Q().mark((function t(){return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=fO,t.next=3,hL(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(kL(l),h,f,c)}function FM(e,t){return function(e,t){var n=new KD(t);return e.asyncQueue.enqueueAndForget($(Q().mark((function t(){return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){eT(e).Ru.add(t),t.next()},t.next=3,hL(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.bc(),e.asyncQueue.enqueueAndForget($(Q().mark((function t(){return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){eT(e).Ru.delete(t)},t.next=3,hL(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(kL(e=OD(e,gL)),yL(t)?t:{next:t})}function UM(e,t){return function(e,t){var n=new rT;return e.asyncQueue.enqueueAndForget($(Q().mark((function r(){return Q().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=DO,r.next=3,cL(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(kL(e),t)}function jM(e,t,n){var r=n.docs.get(t._key),i=new PM(e);return new IM(e,i,t._key,r,new TM(n.hasPendingWrites,n.fromCache),t.converter)}var ZM={maxAttempts:5},VM=function(){function e(t,n){Ne(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=FL(t)}return(0,Pe.Z)(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=qM(e,this._firestore),i=xM(r.converter,t,n),a=UL(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,WE.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=qM(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=Yn(t))||t instanceof CL?HL(this._dataReader,"WriteBatch.update",i._key,t,n,o):WL(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,WE.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=qM(e,this._firestore);return this._mutations=this._mutations.concat(new oC(t._key,WE.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new nT(tT.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function qM(e,t){if((e=Yn(e)).firestore!==t)throw new nT(tT.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var BM=function(e){Kt(n,e);var t=$t(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this,e,r))._firestore=e,i}return(0,Pe.Z)(n,[{key:"get",value:function(e){var t=this,r=qM(e,this._firestore),i=new PM(this._firestore);return Ei(Gt(n.prototype),"get",this).call(this,e).then((function(e){return new IM(t._firestore,i,r._key,e._document,new TM(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){Ne(this,e),this._firestore=t,this._transaction=n,this._dataReader=FL(t)}return(0,Pe.Z)(e,[{key:"get",value:function(e){var t=this,n=qM(e,this._firestore),r=new SM(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return XS();var i=e[0];if(i.isFoundDocument())return new rM(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new rM(t._firestore,r,n._key,null,n.converter);throw XS()}))}},{key:"set",value:function(e,t,n){var r=qM(e,this._firestore),i=xM(r.converter,t,n),a=UL(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=qM(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=Yn(t))||t instanceof CL?HL(this._dataReader,"Transaction.update",i._key,t,n,o):WL(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=qM(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function zM(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new qL("arrayUnion",t)}function WM(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new BL("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){WS=e}(Hr),jr(new $n("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new gL(new sT(e.getProvider("auth-internal")),new hT(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new nT(tT.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vI(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Xr(BS,"3.7.2",e),Xr(BS,"3.7.2","esm2017")}();function HM(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new nT("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function KM(){if("undefined"===typeof Uint8Array)throw new nT("unimplemented","Uint8Arrays are not available in this environment.")}function GM(){if("undefined"==typeof atob)throw new nT("unimplemented","Blobs are unavailable in Firestore in this environment.")}var QM=function(){function e(t){Ne(this,e),this._delegate=t}return(0,Pe.Z)(e,[{key:"toBase64",value:function(){return GM(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return KM(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return GM(),new e(EL.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return KM(),new e(EL.fromUint8Array(t))}}]),e}();function YM(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=Wt(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var $M=function(){function e(){Ne(this,e)}return(0,Pe.Z)(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){IL(e=OD(e,gL));var n=kL(e),r=e._freezeSettings(),i=new ED;return _L(n,i,new TD(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){IL(e=OD(e,gL));var t=kL(e),n=e._freezeSettings(),r=new ED;return _L(t,r,new ID(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new nT(tT.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new rT;return e._queue.enqueueAndForgetEvenWhileRestricted($(Q().mark((function n(){return Q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=$(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(jT.C()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,jT.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(wP(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),XM=function(){function e(t,n,r){var i=this;Ne(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof vI||(this._appCompat=t)}return(0,Pe.Z)(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||YS("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};UD(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return wL(this._delegate)}},{key:"disableNetwork",value:function(){return xL(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&RD("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new rT;return e.asyncQueue.enqueueAndForget($(Q().mark((function n(){return Q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=WO,n.next=3,cL(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(kL(e=OD(e,gL)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return FM(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new nT("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new fF(this,qD(this._delegate,e))}catch(t){throw iF(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new rF(this,BD(this._delegate,e))}catch(t){throw iF(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new cF(this,function(e,t){if(e=OD(e,FD),CD("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new nT(tT.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new ZD(e,null,function(e){return new hE(bT.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw iF(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=OD(e,gL);var r=Object.assign(Object.assign({},ZM),n);return function(e){if(e.maxAttempts<1)throw new nT(tT.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new rT;return e.asyncQueue.enqueueAndForget($(Q().mark((function i(){var a;return Q().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,lL(e);case 2:a=i.sent,new YD(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(kL(e),(function(n){return t(new BM(e,n))}),r)}(this._delegate,(function(n){return e(new eF(t,n))}))}},{key:"batch",value:function(){var e=this;return kL(this._delegate),new tF(new VM(this._delegate,(function(t){return UM(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return SL(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return TL(this._delegate,e).then((function(e){return e?new cF(t,e):null}))}}]),e}(),JM=function(e){Kt(n,e);var t=$t(n);function n(e){var r;return Ne(this,n),(r=t.call(this)).firestore=e,r}return(0,Pe.Z)(n,[{key:"convertBytes",value:function(e){return new QM(new EL(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return rF.forKey(t,this.firestore,null)}}]),n}(wM);var eF=function(){function e(t,n){Ne(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new JM(t)}return(0,Pe.Z)(e,[{key:"get",value:function(e){var t=this,n=dF(e);return this._delegate.get(n).then((function(e){return new sF(t._firestore,new IM(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=dF(e);return n?(HM("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=dF(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=dF(e);return this._delegate.delete(t),this}}]),e}(),tF=function(){function e(t){Ne(this,e),this._delegate=t}return(0,Pe.Z)(e,[{key:"set",value:function(e,t,n){var r=dF(e);return n?(HM("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=dF(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=dF(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),nF=function(){function e(t,n,r){Ne(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return(0,Pe.Z)(e,[{key:"fromFirestore",value:function(e,t){var n=new EM(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new uF(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new JM(t),n),i.set(n,a)),a}}]),e}();nF.INSTANCES=new WeakMap;var rF=function(){function e(t,n){Ne(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new JM(t)}return(0,Pe.Z)(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new fF(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new fF(this.firestore,qD(this._delegate,e))}catch(t){throw iF(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Yn(e))instanceof jD&&zD(this._delegate,e)}},{key:"set",value:function(e,t){t=HM("DocumentReference.set",t);try{return t?DM(this._delegate,e,t):DM(this._delegate,e)}catch(n){throw iF(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?LM(this._delegate,e):LM.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw iF(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return UM(OD(e.firestore,gL),[new oC(e._key,WE.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=aF(n),a=oF(n,(function(t){return new sF(e.firestore,new IM(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return MM(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?AM(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=OD(e,jD);var t=OD(e.firestore,gL);return dL(kL(t),e._key,{source:"server"}).then((function(n){return jM(t,e,n)}))}(this._delegate):function(e){e=OD(e,jD);var t=OD(e.firestore,gL);return dL(kL(t),e._key).then((function(n){return jM(t,e,n)}))}(this._delegate),t.then((function(e){return new sF(n.firestore,new IM(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(nF.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new nT("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new jD(n._delegate,r,new xT(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new jD(n._delegate,r,t))}}]),e}();function iF(e,t,n){return e.message=e.message.replace(t,n),e}function aF(e){var t,n=Wt(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!YM(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function oF(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=YM(e[0])?e[0]:YM(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var sF=function(){function e(t,n){Ne(this,e),this._firestore=t,this._delegate=n}return(0,Pe.Z)(e,[{key:"ref",get:function(){return new rF(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return NM(this._delegate,e._delegate)}}]),e}(),uF=function(e){Kt(n,e);var t=$t(n);function n(){return Ne(this,n),t.apply(this,arguments)}return(0,Pe.Z)(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||XS()}(void 0!==t),t}}]),n}(sF),cF=function(){function e(t,n){Ne(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new JM(t)}return(0,Pe.Z)(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,uM(this._delegate,function(e,t,n){var r=t,i=aM("where",e);return new cM(i,r,n)}(t,n,r)))}catch(i){throw iF(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,uM(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=aM("orderBy",e);return new lM(n,t)}(t,n)))}catch(r){throw iF(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,uM(this._delegate,function(e){return DD("limit",e),new hM("limit",e,"F")}(t)))}catch(n){throw iF(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,uM(this._delegate,function(e){return DD("limitToLast",e),new hM("limitToLast",e,"L")}(t)))}catch(n){throw iF(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,uM(this._delegate,dM.apply(void 0,arguments)))}catch(t){throw iF(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,uM(this._delegate,pM.apply(void 0,arguments)))}catch(t){throw iF(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,uM(this._delegate,yM.apply(void 0,arguments)))}catch(t){throw iF(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,uM(this._delegate,mM.apply(void 0,arguments)))}catch(t){throw iF(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return WD(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?OM(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=OD(e,ZD);var t=OD(e.firestore,gL),n=kL(t),r=new PM(t);return pL(n,e._query,{source:"server"}).then((function(n){return new CM(t,r,e,n)}))}(this._delegate):function(e){e=OD(e,ZD);var t=OD(e.firestore,gL),n=kL(t),r=new PM(t);return oM(e._query),pL(n,e._query).then((function(n){return new CM(t,r,e,n)}))}(this._delegate),t.then((function(e){return new hF(n.firestore,new CM(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=aF(n),a=oF(n,(function(t){return new hF(e.firestore,new CM(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return MM(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(nF.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),lF=function(){function e(t,n){Ne(this,e),this._firestore=t,this._delegate=n}return(0,Pe.Z)(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new uF(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),hF=function(){function e(t,n){Ne(this,e),this._firestore=t,this._delegate=n}return(0,Pe.Z)(e,[{key:"query",get:function(){return new cF(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new uF(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new lF(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new uF(n._firestore,r))}))}},{key:"isEqual",value:function(e){return NM(this._delegate,e._delegate)}}]),e}(),fF=function(e){Kt(n,e);var t=$t(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return(0,Pe.Z)(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new rF(this.firestore,e):null}},{key:"doc",value:function(e){try{return new rF(this.firestore,void 0===e?BD(this._delegate):BD(this._delegate,e))}catch(t){throw iF(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=OD(e.firestore,gL),r=BD(e),i=xM(e.converter,t);return UM(n,[UL(FL(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,WE.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new rF(t.firestore,e)}))}},{key:"isEqual",value:function(e){return zD(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(nF.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(cF);function dF(e){return OD(e,jD)}var pF=function(){function e(){Ne(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=Xt(CL,n)}return(0,Pe.Z)(e,[{key:"isEqual",value:function(e){return(e=Yn(e))instanceof CL&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(wT.keyField().canonicalString())}}]),e}(),vF=function(){function e(t){Ne(this,e),this._delegate=t}return(0,Pe.Z)(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new VL("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new jL("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=zM.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=WM.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new zL("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),yF={Firestore:XM,GeoPoint:NL,Timestamp:mT,Blob:QM,Transaction:eF,WriteBatch:tF,DocumentReference:rF,DocumentSnapshot:sF,Query:cF,QueryDocumentSnapshot:uF,QuerySnapshot:hF,CollectionReference:fF,FieldPath:pF,FieldValue:vF,setLogLevel:function(e){!function(e){HS.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new $n("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},yF)))}(e,(function(e,t){return new XM(e,t,new $M)})),e.registerVersion("@firebase/firestore-compat","0.2.2")}(wi);wi.initializeApp({apiKey:"AIzaSyBBVoemvsm8Y-b8E2S5g9qFVWI_0avjzGQ",authDomain:"messaging-app-mern-4592b.firebaseapp.com",projectId:"messaging-app-mern-4592b",storageBucket:"messaging-app-mern-4592b.appspot.com",messagingSenderId:"29133058652",appId:"1:29133058652:web:0eaab42dad73ed0f1fac99"}).firestore(),wi.auth(),new wi.auth.GoogleAuthProvider;var mF="SET_USER",gF=function(e,t){return console.log(t),t.type===mF?lr(lr({},e),{},{user:t.user}):e};var kF=function(){var e=t.useState([]),n=(0,a.Z)(e,2),r=n[0],o=n[1],s=H(),u=(0,a.Z)(s,2);return u[0].user,u[1],t.useEffect((function(){jt.get("/messages/sync").then((function(e){o(e.data)}))}),[]),t.useEffect((function(){var e=new(qt())("a9b608a6d27f1425e9b4",{cluster:"eu"}).subscribe("messages");return e.bind("inserted",(function(e){o([].concat((0,i.Z)(r),[e]))})),function(){e.unbind_all(),e.unsubscribe()}}),[r]),console.log(r),(0,q.jsx)("div",{className:"app",children:(0,q.jsxs)("div",{className:"app__body",children:[(0,q.jsx)(K,{messages:r}),(0,q.jsx)(Zt,{messages:r})]})})};r.createRoot(document.getElementById("root")).render((0,q.jsx)(t.StrictMode,{children:(0,q.jsx)(W,{initialState:{user:null},reducer:gF,children:(0,q.jsx)(kF,{})})}))}()}();
//# sourceMappingURL=main.bb3fd862.js.map